<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="deskxpDjduMieHbS">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.waylon.one","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":5,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="sharing daily progress and life">
<meta property="og:type" content="website">
<meta property="og:title" content="One&#39;s Way">
<meta property="og:url" content="http://www.waylon.one/index.html">
<meta property="og:site_name" content="One&#39;s Way">
<meta property="og:description" content="sharing daily progress and life">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Autonomous Driving &amp; Robotic">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://www.waylon.one/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>One's Way</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">One's Way</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">sharing daily progress and life</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">102</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/waylondotone" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;waylondotone" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Programming/oom-const-reference/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Programming/oom-const-reference/" class="post-title-link" itemprop="url">临时变量赋值给常引用安全吗 / Is it safe to make a const reference member to a temporary variable?</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-09-22 23:02:48" itemprop="dateCreated datePublished" datetime="2024-09-22T23:02:48+08:00">2024-09-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-23 20:46:38" itemprop="dateModified" datetime="2024-09-23T20:46:38+08:00">2024-09-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>267</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1>临时变量的生命周期</h1>
<p>C++ 中的临时变量指的是那些由编译器根据需要在栈上产生的，没有名字的变量。其主要的用途主要有两类：</p>
<ul>
<li>函数的返回值</li>
<li>类型转换时的中间变量</li>
</ul>
<p>一般来说，C++ 中的临时变量在表达式结束之后 (full expression) 就被会销毁 / The temporary will be destroyed after the full expression.</p>
<p>The lifetime of the temporary bound to a const reference extends till the lifetime of const.</p>
<h3 id="Demo">Demo</h3>
<figure class="highlight c"><figcaption><span>Segmentation_fault_demo++</span><a href="/downloads/code/oom_reference.cpp">view raw</a></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> {</span></span><br><span class="line">   public:</span><br><span class="line">    A(<span class="type">const</span> <span class="built_in">std</span>::<span class="built_in">unordered_set</span>&lt;<span class="type">int</span>&gt;&amp; const_v_in, <span class="built_in">std</span>::<span class="built_in">unordered_set</span>&lt;<span class="type">int</span>&gt; v_in)</span><br><span class="line">        : const_set_values_(const_v_in), set_values_(v_in) {}</span><br><span class="line"></span><br><span class="line">    <span class="type">bool</span> <span class="title function_">has_const_value</span><span class="params">(<span class="type">int</span> ix)</span> <span class="type">const</span> {</span><br><span class="line">        <span class="keyword">return</span> const_set_values_.find(ix) == const_set_values_.end();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="type">bool</span> <span class="title function_">has_value</span><span class="params">(<span class="type">int</span> ix)</span> <span class="type">const</span> {</span><br><span class="line">        <span class="keyword">return</span> set_values_.find(ix) == set_values_.end();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">   private:</span><br><span class="line">    <span class="type">const</span> <span class="built_in">std</span>::<span class="built_in">unordered_set</span>&lt;<span class="type">int</span>&gt;&amp; const_set_values_;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">unordered_set</span>&lt;<span class="type">int</span>&gt; set_values_;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> {</span><br><span class="line">    A <span class="title function_">a</span><span class="params">({<span class="number">0</span>}, {<span class="number">0</span>})</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">" whether A instance has value "</span> &lt;&lt; a.has_value(<span class="number">0</span>)</span><br><span class="line">              &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">" whether A instance has const value "</span> &lt;&lt; a.has_const_value(<span class="number">0</span>)</span><br><span class="line">              &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h1>源码</h1>
<h2 id="源码下载">源码下载</h2>
<p><a href="http://www.waylon.one/downloads/code/oom_reference.cpp">源码下载</a></p>
<h2 id="编译">编译</h2>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd 文件下载目录</span><br><span class="line">g++ oom_reference.cpp -o test --std=c++14</span><br></pre></td></tr></tbody></table></figure>
<p>注意：因为编译器优化等原因 (我的版本是 g++ 7.5)，你在本地验证时不一定会崩溃，但是这即使不崩溃，也是一个 <strong>undefined bahvior</strong> 问题，不安全。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 查看 g++ 版本</span><br><span class="line">g++ --version</span><br></pre></td></tr></tbody></table></figure>
<h1>One more thing</h1>
<h2 id="编程实践">编程实践</h2>
<p>// When one stores the reference one should also forbid rvalues: A(const std::unordered_set<int>&amp;&amp;)=delete;</int></p>
<figure class="highlight c"><figcaption><span>禁止移动构造_demo++</span><a href="/downloads/code/oom_reference_rvalue.cpp">view raw</a></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A(<span class="type">const</span> <span class="built_in">std</span>::<span class="built_in">unordered_set</span>&lt;<span class="type">int</span>&gt;&amp;&amp;) = delete;</span><br></pre></td></tr></tbody></table></figure>
<h1>参考链接</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/45385433/is-it-safe-to-make-a-const-reference-member-to-a-temporary-variable">Is it safe to make a const reference member to a temporary variable</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/uncategorized/protocol-buffers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/uncategorized/protocol-buffers/" class="post-title-link" itemprop="url">protocol buffers</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-08 11:23:00" itemprop="dateCreated datePublished" datetime="2024-08-08T11:23:00+08:00">2024-08-08</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>240</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1><a target="_blank" rel="noopener" href="https://protobuf.dev/programming-guides/proto3/#packages">Package</a></h1>
<ul>
<li>You can add an optional&nbsp;<code>package</code>&nbsp;specifier to a&nbsp;<code>.proto</code>&nbsp;file to prevent name clashes between protocol message types.</li>
<li>In&nbsp;<strong>C++</strong>&nbsp;the generated classes are wrapped inside a C++ namespace.
<ul>
<li>即 package 指定的路径，会被转换为 namespace，来避免命名冲突。</li>
</ul>
</li>
</ul>
<h2 id="Arena-Allocation"><a target="_blank" rel="noopener" href="https://protobuf.dev/reference/cpp/arenas/#why">Arena Allocation</a></h2>
<ul>
<li> 功能：Arena allocation is a C+±only feature that helps you optimize your memory usage and improve performance when working with protocol buffers.</li>
<li> 原因：By default, protocol buffers performs heap allocations for each message object, each of its subobjects, and several field types, such as strings. These allocations occur in bulk when parsing a message and when building new messages in memory, and associated deallocations happen when messages and their subobject trees are freed.
<ul>
<li>Message 的构造和释放在堆栈上进行，涉及到动态内存的生成和释放，这一步骤非常昂贵。</li>
</ul>
</li>
</ul>
<h2 id="查看-version">查看 version</h2>
<p>protoc --version</p>
<h1>Python</h1>
<h2 id="Enum">Enum</h2>
<h3 id="Could-not-serialize-object-TypeError-can’t-pickle-google-protobuf-pyext-message-EnumDescriptor-objects">Could not serialize object: TypeError: can’t pickle google.protobuf.pyext._message.EnumDescriptor objects</h3>
<p>我在实际 spark 上处理数据时，报错 “Could not serialize object: TypeError: can’t pickle google.protobuf.pyext._message.EnumDescriptor objects”, 通过报错信息，很明确这是在实际 python 代码中引用 enum 导致的问题.</p>
<figure class="highlight plaintext"><figcaption><span>enum_test.proto</span><a href="/downloads/code/enum_test.proto">view raw</a></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Add code later</span><br></pre></td></tr></tbody></table></figure>
<h1>参考教程</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.vipmind.me/programing/python/understand-protobuf-enum-in-python.html">Understand Protobuf enum in python</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Programming/vector-reverse/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Programming/vector-reverse/" class="post-title-link" itemprop="url">如何反转 vector (有源码)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-08-27 07:32:48" itemprop="dateCreated datePublished" datetime="2023-08-27T07:32:48+08:00">2023-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-24 09:34:54" itemprop="dateModified" datetime="2023-09-24T09:34:54+08:00">2023-09-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>67</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<h2 id="std-reverse"><a target="_blank" rel="noopener" href="https://cplusplus.com/reference/algorithm/reverse/">std::reverse</a></h2>
<ul>
<li>Reverses the order of the elements in the range [first,last).</li>
</ul>
<h3 id="Demo">Demo</h3>
<figure class="highlight c"><figcaption><span>全部反转_demo++</span><a href="/downloads/code/vector_clear.cpp">view raw</a></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Method2_erase</span><span class="params">()</span> {</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt; data = ConstructVector();</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight c"><figcaption><span>部分反转_demo++</span><a href="/downloads/code/vector_clear.cpp">view raw</a></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 再次打印更新后 vector 容器的大小和容量</span></span><br></pre></td></tr></tbody></table></figure>
<h1>源码</h1>
<h2 id="源码下载">源码下载</h2>
<p><a href="http://www.waylon.one/downloads/code/vector_reverse.cpp">源码下载</a></p>
<h2 id="编译">编译</h2>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd 文件下载目录</span><br><span class="line">g++ vector_reverse.cpp -o test --std=c++14</span><br></pre></td></tr></tbody></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Programming/vector-clear/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Programming/vector-clear/" class="post-title-link" itemprop="url">C++ vector 清空元素的三种方法 (有源码)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-08-27 06:52:48" itemprop="dateCreated datePublished" datetime="2023-08-27T06:52:48+08:00">2023-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-08-28 00:00:10" itemprop="dateModified" datetime="2023-08-28T00:00:10+08:00">2023-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>382</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<h2 id="clear">clear</h2>
<ul>
<li>A reallocation is not guaranteed to happen, and the vector capacity is not guaranteed to change due to calling this function.</li>
</ul>
<h3 id="测试">测试</h3>
<figure class="highlight c"><figcaption><span>clear demo++</span><a href="/downloads/code/vector_clear.cpp">view raw</a></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Method1_clear</span><span class="params">()</span> {</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt; data = ConstructVector();</span><br><span class="line">  <span class="comment">// 打印 vector 容器的大小和容量</span></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"original: size = "</span> &lt;&lt; data.size()</span><br><span class="line">            &lt;&lt; <span class="string">" ; capacity = "</span> &lt;&lt; data.capacity() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  data.clear();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 再次打印更新后 vector 容器的大小和容量</span></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"new: size = "</span> &lt;&lt; data.size()</span><br><span class="line">            &lt;&lt; <span class="string">" ; capacity = "</span> &lt;&lt; data.capacity() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="输出">输出</h3>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Method 1</span><br><span class="line">original: size = 5 ; capacity = 5</span><br><span class="line">new: size = 0 ; capacity = 5</span><br></pre></td></tr></tbody></table></figure>
<h2 id="erase">erase</h2>
<ul>
<li>
<p>Removes from the vector either a single element (position) or a range of elements ([first,last)).</p>
</li>
<li>
<p>An iterator pointing to the new location of the element that followed the last element erased by the function call.</p>
</li>
</ul>
<h3 id="测试-2">测试</h3>
<figure class="highlight c"><figcaption><span>erase demo++</span><a href="/downloads/code/vector_clear.cpp">view raw</a></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Method2_erase</span><span class="params">()</span> {</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt; data = ConstructVector();</span><br><span class="line">  <span class="comment">// 打印 vector 容器的大小和容量</span></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"original: size = "</span> &lt;&lt; data.size()</span><br><span class="line">            &lt;&lt; <span class="string">" ; capacity = "</span> &lt;&lt; data.capacity() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> iter = data.begin(); iter != data.end();) {</span><br><span class="line">    iter = data.erase(iter);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 再次打印更新后 vector 容器的大小和容量</span></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"new: size = "</span> &lt;&lt; data.size()</span><br><span class="line">            &lt;&lt; <span class="string">" ; capacity = "</span> &lt;&lt; data.capacity() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt; data1 = ConstructVector();</span><br><span class="line">  data1.erase(data1.begin(), data1.begin() + <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"new: size = "</span> &lt;&lt; data1.size()</span><br><span class="line">            &lt;&lt; <span class="string">" ; capacity = "</span> &lt;&lt; data1.capacity() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="输出-2">输出</h3>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Method 2</span><br><span class="line">original: size = 5 ; capacity = 5</span><br><span class="line">new: size = 0 ; capacity = 5</span><br><span class="line">new: size = 3 ; capacity = 5</span><br></pre></td></tr></tbody></table></figure>
<h2 id="swap">swap</h2>
<ul>
<li>
<p>Exchanges the content of the container by the content of x, which is another vector object of the same type. Sizes may differ.</p>
</li>
<li>
<p>After the call to this member function, the elements in this container are those which were in x before the call, and the elements of x are those which were in this. All iterators, references and pointers remain valid for the swapped objects.</p>
</li>
</ul>
<h3 id="测试-3">测试</h3>
<figure class="highlight c"><figcaption><span>erase demo++</span><a href="/downloads/code/vector_clear.cpp">view raw</a></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Method3_swap</span><span class="params">()</span> {</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt; data = ConstructVector();</span><br><span class="line">  <span class="comment">// 打印 vector 容器的大小和容量</span></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"original: size = "</span> &lt;&lt; data.size()</span><br><span class="line">            &lt;&lt; <span class="string">" ; capacity = "</span> &lt;&lt; data.capacity() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;().swap(data);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 再次打印更新后 vector 容器的大小和容量</span></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"new: size = "</span> &lt;&lt; data.size()</span><br><span class="line">            &lt;&lt; <span class="string">" ; capacity = "</span> &lt;&lt; data.capacity() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="输出-3">输出</h3>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Method 3</span><br><span class="line">original: size = 5 ; capacity = 5</span><br><span class="line">new: size = 0 ; capacity = 0</span><br></pre></td></tr></tbody></table></figure>
<h1>区别</h1>
<ul>
<li>vector 内存占用空间只会增长，不会减小。比如你首先分配了 10,000 个字节，然后 erase 掉后面 9,999 个，则虽然有效元素只有一个，但是内存占用仍为 10,000 个。所有空间在 vector 析构时回收。</li>
<li>如果想清空原来数据占用的空间，我们可以通过交换技术 swap, 就是通过交换函数 swap ()，使得 vector 离开其自身的作用域，从而强制释放 vector 所占的内存空间.</li>
</ul>
<h1>源码</h1>
<h2 id="源码下载">源码下载</h2>
<p><a href="http://www.waylon.one/downloads/code/vector_clear.cpp">源码下载</a></p>
<h2 id="编译">编译</h2>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd 文件下载目录</span><br><span class="line">g++ vector_clear.cpp -o test --std=c++14</span><br></pre></td></tr></tbody></table></figure>
<h1>Reference</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhanggaofeng/p/9338681.html">C++ vector 清空元素的三种方法</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Trip/2023-dalian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Trip/2023-dalian/" class="post-title-link" itemprop="url">海滨风情 -- 大连三日游</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-07-17 19:02:06" itemprop="dateCreated datePublished" datetime="2023-07-17T19:02:06+08:00">2023-07-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-08-07 07:55:30" itemprop="dateModified" datetime="2023-08-07T07:55:30+08:00">2023-08-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Trip/" itemprop="url" rel="index"><span itemprop="name">Trip</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>4.3k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>16 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>周五晚上从北京乘火车出发，第二天早晨到达大连火车站；在大连游玩三天，第三天晚上乘高铁返回北京，游览了大连知名的星海广场、海之韵公园，棒棰岛等景点，品尝了炒闷子等美食，还能在市区近距离喂野生鹿，非常开心的旅行。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Trip/2023-dalian/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Ubuntu/website/frp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Ubuntu/website/frp/" class="post-title-link" itemprop="url">使用 frp 实现内网穿透搭建内网服务</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-07-09 16:29:51" itemprop="dateCreated datePublished" datetime="2023-07-09T16:29:51+08:00">2023-07-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-07-12 00:00:09" itemprop="dateModified" datetime="2023-07-12T00:00:09+08:00">2023-07-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Ubuntu/" itemprop="url" rel="index"><span itemprop="name">Ubuntu</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Ubuntu/website/" itemprop="url" rel="index"><span itemprop="name">website</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>7 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在工作和生活中，我们经常需要在外部访问我们家中的主机。然而，由于主机处于内网中，外部设备 (公网) 很难直接连接到主机以获取所需的资料。</p>
<p>本文将介绍一种通过内网穿透软件来搭建内网服务的方法，使得外部用户能够方便地访问和使用内网中的服务和资源。在这个过程中，将会涉及到内网穿透和反向代理的核心技术。</p>
<p>通过调研不同的 <a target="_blank" rel="noopener" href="https://juejin.cn/post/7240288077868286010">内网穿透工具</a>，目前主要分为两种类型：</p>
<ul>
<li>
<p>一种是通过销售硬件设备和流量的方式实现，比如快解析、花生壳、神卓互联、NAT123 等。这些工具拥有自主研发的核心技术，可以在淘宝等平台直接购买和配置。然而，这种方式的缺点是需要付费购买硬件设备，并且免费流量有限制，适合一些专业用户或氪金用户。</p>
</li>
<li>
<p>一种是使用免费开源软件（如 frp 和 nps）来搭建内网穿透，不需要额外购买硬件设备，但需要具备公网 IP 的条件。这种方式的优点在于可以根据自己的需求进行定制化配置，后续扩展性强，但对于新手来说入门门槛较高。</p>
</li>
</ul>
<p>考虑到使用开源软件的优点，我的本地主机没有敏感信息，流量不设限制，所以我选择了免费开源软件 – frp 来搭建内网穿透服务。请注意，虽然 frp 目前使用广泛，但是本身逻辑设计有先天性缺陷，网络安全性差，非常容易造成网络堵塞，不能长时间连接使用，技术不够成熟.</p>
<h1>我的应用场景</h1>
<ul>
<li>在办公室或外出办公时，能够通过远程 ssh 控制家中的另一台电脑；</li>
<li>家中电脑上运行了一个 web 服务，希望能够让非局域网的用户访问到这个服务。</li>
</ul>
<h1>工具和材料</h1>
<ul>
<li>一个云服务器（包含公网 IP）；</li>
<li>本地电脑需要联网；</li>
<li>一个域名（用于多个 web 服务，如果只有 ssh 访问则不需要）。</li>
</ul>
<p>请注意，以下的教程适合具备一定计算机基础的开发者，对于新手来说可能存在一定的配置难度。</p>
<h1>我的网络配置示意图</h1>
<p>我进行了如下的网络配置，以实现通过 frp 在远程访问家中的主机和使用 web 服务的目标。比如，在 ipad 上就可以通过网页连接内网服务上的 stable diffusion 生成图片。具体示意图如下：</p>
<img data-src="/downloads/images/frp_struct.jpg" class="" title="frp 配置示意图">
<h1>frp 是什么？</h1>
<p><a target="_blank" rel="noopener" href="https://github.com/fatedier/frp/tree/dev">frp</a> 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议，且支持 P2P 通信。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。</p>
<h2 id="内网穿透是什么">内网穿透是什么？</h2>
<p>内网穿透，即 NAT（Network Address Translator）穿透，是指计算机在内网（局域网）内使用私有 IP 地址，在连接外网（互联网）时使用全局 IP 地址的技术。简而言之，内网穿透可以将内网中的服务暴露到公网，使得这些服务可以通过公网访问。</p>
<h2 id="反向代理是什么">反向代理是什么？</h2>
<p>反向代理（reverse proxy）是指以代理服务器来接受 internet 上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给 internet 上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。</p>
<h1>frp 安装</h1>
<p>你可以参考 <a target="_blank" rel="noopener" href="https://gofrp.org/docs/setup/">安装教程</a> 中的详细步骤来下载、部署和配置 frp。该教程提供了安装和开机自启动的指导，具有很好的实用性。</p>
<h2 id="我的配置环境">我的配置环境</h2>
<h3 id="frp-服务端：">frp 服务端：</h3>
<p>操作系统：Ubuntu 20.04</p>
<h3 id="frp-客户端设备-1：">frp 客户端设备 #1：</h3>
<p>操作系统：Ubuntu 20.04</p>
<h3 id="frp-客户端设备-2：">frp 客户端设备 #2：</h3>
<p>操作系统：Ubuntu 22.04</p>
<h2 id="如何设置-frp-支持多个本地网页终端">如何设置 frp 支持多个本地网页终端</h2>
<p>在我本地的开发机器 #2 ，部署了 stable diffusion 和 Jupyter Notebook 两个 web 应用，它们通过指定的本地端口提供服务，例如通过 <code>127.0.0.1:8080</code> 可以访问 jupyter。由于这些应用都部署在本地，无法直接从公网访问，因此 #2 主机需要配置 frpc 服务来支持公网访问。</p>
<h3 id="多-web-服务主机配置">多 web 服务主机配置</h3>
<p>在 #2 的 frp 的配置文件（frpc.ini）添加下面的内容</p>
<figure class="highlight plaintext"><figcaption><span>[frpc.ini]</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[common]</span><br><span class="line">server_addr = 1.2.3.4     # 替换成公网 IP</span><br><span class="line">server_port = 1234        # 替换成开放的 Port</span><br><span class="line"># 此处省去 token 等配置</span><br><span class="line"></span><br><span class="line">[web1]   # 此处配置用于远程访问内网电脑上的 A 服务</span><br><span class="line">type = http</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = port1</span><br><span class="line">custom_domains = a.my_domain.com</span><br><span class="line"></span><br><span class="line">[web2]   # 此处配置用于远程访问内网电脑上的 B 服务</span><br><span class="line">type = http</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = port2</span><br><span class="line">custom_domains = b.my_domain.com</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>在上述配置中，我们使用不同的 <code>custom_domains</code>（例如 <code>a.my_domain.com</code> 和 <code>b.my_domain.com</code>）以及不同的 <code>local_port</code>（例如 <code>8888</code> 和 <code>9999</code>）来区分两个本地网页终端。在实际应用中，通过 custom_domains:vhost_http_port 就可以访问内网的 web 项目.</p>
<h3 id="VPS-服务器配置">VPS 服务器配置</h3>
<p>在 frp 服务器上配置相应的转发规则，将请求转发到本地网页终端。你可以在 frps.ini 配置文件中进行设置。</p>
<figure class="highlight plaintext"><figcaption><span>[frps.ini]</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_port = 1234</span><br><span class="line">token = xxxx</span><br><span class="line">vhost_http_port = 8888</span><br><span class="line">dashboard_port = xxxx</span><br><span class="line">dashboard_user = xxxx</span><br><span class="line">dashboard_pwd = xxxx</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>通过以上配置，你可以通过 <code>a.my_domain.com:8888</code> 访问第一个本地网页终端，通过 <code>b.my_domain.com:8888</code> 访问第二个本地网页终端。</p>
<h2 id="frp-如何支持多个服务端">frp 如何支持多个服务端</h2>
<p>如果你想要支持多个服务端，需要在每个客户端安装一个 frpc 服务，并根据每个设备的差异进行配置，确保每个设备的 <code>remote_port</code> 不重复即可。</p>
<p>上文提到，本地有两台主机，如果想让两台主机都可以远程访问，需要在每个客户端安装一个 frpc 服务.</p>
<h3 id="设备-1">设备 #1</h3>
<figure class="highlight plaintext"><figcaption><span>[frpc.ini]</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[common]</span><br><span class="line">server_addr = 1.2.3.4     # 替换成公网 IP</span><br><span class="line">server_port = 1234        # 替换成开放的 Port</span><br><span class="line"># 此处省去 token 等配置</span><br><span class="line"></span><br><span class="line">[ssh1] # 若有多个客户端，名称不要重复。</span><br><span class="line">type = tcp</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 22</span><br><span class="line">remote_port = 2345 # 远程连接端口不要重复</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h3 id="设备-2">设备 #2</h3>
<figure class="highlight plaintext"><figcaption><span>[frpc.ini]</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[common]</span><br><span class="line">server_addr = 1.2.3.4     # 替换成公网 IP</span><br><span class="line">server_port = 1234        # 替换成开放的 Port</span><br><span class="line"># 此处省去 token 等配置</span><br><span class="line"></span><br><span class="line">[ssh2] # 若有多个客户端，名称不要重复。</span><br><span class="line">type = tcp</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 22</span><br><span class="line">remote_port = 3456 # 远程连接端口不要重复</span><br><span class="line"></span><br><span class="line"># 此处省去 web 等配置</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h3 id="VPS-服务器配置-2">VPS 服务器配置</h3>
<figure class="highlight plaintext"><figcaption><span>[frps.ini]</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_port = 1234</span><br><span class="line">token = xxxx</span><br><span class="line">vhost_http_port = 8080</span><br><span class="line">dashboard_port = xxxx</span><br><span class="line">dashboard_user = xxxx</span><br><span class="line">dashboard_pwd = xxxx</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>根据提供的示例，两台机器都绑定服务器的 1234 端口，但是远程连接的端口不同，第一台机器的远程连接端口为 <code>2345</code>，第二台机器的远程连接端口为 <code>3456</code>。假设 #1 用户名为 test1, #2 用户名为 test2, 那么</p>
<figure class="highlight plaintext"><figcaption><span>[#1 机器连接]</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh  -oPort=2345 test1@1.2.3.4</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight plaintext"><figcaption><span>[#2 机器连接]</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh  -oPort=3456 test2@1.2.3.4</span><br></pre></td></tr></tbody></table></figure>
<h1>安全性</h1>
<h1>参考资料</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://gofrp.org">frp 文档</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/fatedier/frp/tree/dev">frp github</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/TianyuSu/p/11961994.html">frp 配置多个 web 项目，无需购买域名</a>
<ul>
<li>参考 frpc.ini 配置，但是 custom_domains 使用自己的域名，没有通过配置本地 host 文件来使用虚假域名.</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wangyuyu/p/14312431.html">frp 用一个服务器进程 frps 连接多个客户端 frpc</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/370476621">frp 内网穿透，实现局域网网页，外网访问</a>
<ul>
<li>对单个 web 应用，custom_domains 也可以设置为服务器 IP 地址，不用域名 (亲测可行) ; 多个 web 端不可行.</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Programming/c-plus-plus-vector/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Programming/c-plus-plus-vector/" class="post-title-link" itemprop="url">c_plus_plus_vector</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-07-08 17:43:07" itemprop="dateCreated datePublished" datetime="2023-07-08T17:43:07+08:00">2023-07-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-07-09 16:30:05" itemprop="dateModified" datetime="2023-07-09T16:30:05+08:00">2023-07-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>66</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="比较两个-vector-是否相等">比较两个 vector 是否相等</h2>
<p><a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/container/vector/operator_cmp">bool operator==( const std::vector&lt;T, Alloc&gt;&amp; lhs, const std::vector&lt;T, Alloc&gt;&amp; rhs )</a></p>
<ul>
<li>Checks if the contents of lhs and rhs are equal, that is, they have the same number of elements and each element in lhs compares equal with the element in rhs at the same position. </li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.techiedelight.com/zh/check-two-vectors-equal-cpp/">其他方法</a></p>
<ul>
<li> std::equal</li>
<li>std::mismatch</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/uncategorized/advanced-ubuntu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/uncategorized/advanced-ubuntu/" class="post-title-link" itemprop="url">ubuntu 进阶学习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-05-28 15:58:41" itemprop="dateCreated datePublished" datetime="2023-05-28T15:58:41+08:00">2023-05-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-07-12 00:00:09" itemprop="dateModified" datetime="2023-07-12T00:00:09+08:00">2023-07-12</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>620</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="什么是-Snap">什么是 Snap</h2>
<p>Snap 包是 Ubuntu 16.04 LTS 发布时引入的新应用格式包。</p>
<blockquote><p>当你在安装完 snap 后，你会发现在在根目录下会出现如 /dev/loop0、/dev/loop1 等挂载点，这些挂载点正是 snap 软件包的目录。Snap 使用了 squashFS 文件系统，一种开源的压缩，只读文件系统，基于 GPL 协议发行。一旦 snap 被安装后，其就有一个只读的文件系统和一个可写入的区域。应用自身的执行文件、库、依赖包都被放在这个只读目录，意味着该目录不能被随意篡改和写入。</p>
<footer><strong>Canonical </strong><cite><a target="_blank" rel="noopener" href="https://cn.ubuntu.com/blog/what-is-snap-application">什么是 Snap 应用？</a></cite></footer></blockquote>
<img data-src="/downloads/images/snap_loop.png" class="" title="/dev/loopX是 snap 的目录">
<p>较传统 Linux 的 rpm，deb 软件包，snap 引入 squashFS 文件系统，使得 snap 的安全性要优于传统的 Linux 软件包。同时，每个 snap 默认都被严格限制（confined），即限制系统权限和资源访问。但是，可通过授予权限策略来获得对系统资源的访问。</p>
<p>使用 snap 包的另一好处就是它类似一个容器拥有一个应用程序所有的文件和库，各个应用程序之间完全独立；解决了应用程序之间的依赖问题，使应用程序之间更容易管理，但是由此带来的问题就是它占用更多的磁盘空间。</p>
<h2 id="Install-Shutter-Screenshot-Tool">Install Shutter Screenshot Tool</h2>
<h3 id="Installing-Shutter-on-Ubuntu-20-04-18-04">Installing Shutter on Ubuntu 20.04 &amp; 18.04</h3>
<figure class="highlight shell"><figcaption><span>https://itsfoss.com/install-shutter-ubuntu/ Installing Shutter on Ubuntu 20.04 &amp; 18.04</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Shutter is not available in Ubuntu 20.04.</span><br><span class="line">sudo add-apt-repository ppa:linuxuprising/shutter</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install shutter</span><br></pre></td></tr></tbody></table></figure>
<h2 id="切换-Python-环境">切换 Python 环境</h2>
<figure class="highlight shell"><figcaption><span>https://www.cnblogs.com/liuzhenbo/p/13176869.html ubuntu 切换 python 版本 </span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 查看你系统中有哪些Python的二进制文件可供使用</span><br><span class="line">ls /usr/bin/python*</span><br><span class="line">// 查看python替换版本信息</span><br><span class="line">update-alternatives --list python</span><br><span class="line">// 使用以下命令随时在列出的python替换版本中任意切换</span><br><span class="line">sudo update-alternatives --config python</span><br><span class="line">// 再查一下默认Python版本</span><br><span class="line">python --version</span><br></pre></td></tr></tbody></table></figure>
<h2 id="用-aptitude-代替-apt-get-处理依赖性问题">用 aptitude 代替 apt-get 处理依赖性问题</h2>
<ul>
<li>aptitude 与 apt-get 一样，是 Debian 及其衍生系统中功能极其强大的包管理工具。与 apt-get 不同的是，aptitude 在处理依赖问题上更佳一些。举例来说，aptitude 在删除一个包时，会同时删除本身所依赖的包。这样，系统中不会残留无用的包，整个系统更为干净。</li>
<li>注意事项</li>
<li>为什么可以这么做</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/website/hexo/rebuild_website_in_vps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/website/hexo/rebuild_website_in_vps/" class="post-title-link" itemprop="url">VPS 部署 Hexo 环境</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-05-19 14:55:57" itemprop="dateCreated datePublished" datetime="2023-05-19T14:55:57+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-21 00:00:06" itemprop="dateModified" datetime="2023-05-21T00:00:06+08:00">2023-05-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/website/" itemprop="url" rel="index"><span itemprop="name">website</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/website/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2.2k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>8 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<p>目前手上有一台国外 VPS，我在 19 年开始在 VPS 上部署个人网站。之前利用这个 VPS 部署本地编译好的静态网页，流程大概是</p>
<ul>
<li>本地电脑配置 hexo 环境，在本地编辑并生成静态网页；</li>
<li>通过 git hook 等方式把本地生成的静态网页同步到远端服务器上；</li>
<li>服务器通过 nginx 支持访问静态网页内容。</li>
</ul>
<p>这种部署方式对多终端用户不友好，比如</p>
<ul>
<li>有时候想在手机或者其他终端上简单修改网站内容，但是配置 hexo 环境的电脑不在手边，往往需要把想更新的内容记下来，找个专门时间更新下内容，这样子容易导致自己忘记，做事情不连贯。</li>
<li>如果有多台电脑，只能在配备有 hexo 环境的电脑上编辑；即使多台电脑配备有 hexo 内容，也容易有数据不同步的问题。</li>
</ul>
<p>本文介绍一种方式，</p>
<img data-src="/downloads/images/website_scheme.png" class="" title="网站架构设计">
<ul>
<li>网站原始数据保存在 github，支持多终端访问和数据管理。</li>
<li>远程 VPS 上部署整套 hexo 环境，支持生成静态网页结果。</li>
<li>VPS 上获取网站数据 (通常是 source 下面的数据)，生成博客内容，启动 hexo 内置的 web 服务器（或使用 nginx 指向生成的 public 目录），对外提供访问。</li>
<li>对于生成好的内容，部署到 Github （用作备份）上</li>
</ul>
<p>这种方法可以在多终端实时更新网站内容，摆脱对单一终端的依赖，能够支持</p>
<ul>
<li>VPS 上部署 hexo 环境，支持跨平台、多终端的网站内容编辑和更新。</li>
<li>引入 git 管理网站原始数据，支持数据统一和备份。</li>
<li>支持在 github 和 VPS 等多地同时部署个人网站，不必局限于 VPS。</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/website/hexo/rebuild_website_in_vps/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Programming/cpp-heap-via-container/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Programming/cpp-heap-via-container/" class="post-title-link" itemprop="url">巧用 STL 容器构建堆</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-04-02 15:50:16" itemprop="dateCreated datePublished" datetime="2023-04-02T15:50:16+08:00">2023-04-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>320</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<h1>红黑树</h1>
<h2 id="什么是红黑树">什么是红黑树</h2>
<h1>set/multiset 实现最大堆</h1>
<p>在 STL 中，set 和 multiset 是基于红黑树实现的。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/container/set">Sets</a> are usually implemented as <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree">red-black trees</a>.</li>
<li>Sorting is done using the key comparison function <em><a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/named_req/Compare">Compare</a></em>. Search, removal, and insertion operations have logarithmic complexity.</li>
</ul>
<h2 id="Code-Example">Code Example</h2>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="comment">// Initialize a set.</span></span><br><span class="line">  <span class="comment">// Compare parameter is default to std::less&lt;Key&gt;.</span></span><br><span class="line">  std::set&lt;<span class="type">int</span>&gt; min_s;</span><br><span class="line">  min_s.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">  min_s.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">  min_s.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">  min_s.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">  min_s.<span class="built_in">insert</span>(<span class="number">4</span>);</span><br><span class="line">  min_s.<span class="built_in">insert</span>(<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">  std::cout &lt;&lt; <span class="string">"min value of set container is "</span> &lt;&lt; *min_s.<span class="built_in">begin</span>() &lt;&lt; std::endl;</span><br><span class="line">  std::cout &lt;&lt; <span class="string">"max value of set container is "</span> &lt;&lt; *min_s.<span class="built_in">rbegin</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Compare parameter is default to std::greater&lt;Key&gt;.</span></span><br><span class="line">  std::set&lt;<span class="type">int</span>, std::greater&lt;<span class="type">int</span>&gt;&gt; max_s;</span><br><span class="line">  max_s.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">  max_s.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">  max_s.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">  max_s.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">  max_s.<span class="built_in">insert</span>(<span class="number">4</span>);</span><br><span class="line">  max_s.<span class="built_in">insert</span>(<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">  std::cout &lt;&lt; <span class="string">"max value of set container is "</span> &lt;&lt; *max_s.<span class="built_in">begin</span>() &lt;&lt; std::endl;</span><br><span class="line">  std::cout &lt;&lt; <span class="string">"min value of set container is "</span> &lt;&lt; *max_s.<span class="built_in">rbegin</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Initialize a multiset.</span></span><br><span class="line">  std::multiset&lt;<span class="type">int</span>, std::greater&lt;<span class="type">int</span>&gt;&gt; max_ms;</span><br><span class="line">  max_ms.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">  max_ms.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">  max_ms.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">  max_ms.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">  max_ms.<span class="built_in">insert</span>(<span class="number">4</span>);</span><br><span class="line">  max_ms.<span class="built_in">insert</span>(<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">  std::cout &lt;&lt; <span class="string">"max value of multiset container is "</span> &lt;&lt; *max_ms.<span class="built_in">begin</span>()</span><br><span class="line">            &lt;&lt; std::endl;</span><br><span class="line">  std::cout &lt;&lt; <span class="string">"min value of multiset container is "</span> &lt;&lt; *max_ms.<span class="built_in">rbegin</span>()</span><br><span class="line">            &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>输出结果如下</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">min value of set container is -1</span><br><span class="line">max value of set container is 5</span><br><span class="line">max value of set container is 5</span><br><span class="line">min value of set container is -1</span><br><span class="line">max value of multiset container is 5</span><br><span class="line">min value of multiset container is -1</span><br></pre></td></tr></tbody></table></figure>
<p>参考 &lt;剑指 offer&gt; 面试题 40 — 最小的 k 个数</p>
<h1>基于 STL 的函数 push_heap、pop_heap 和 vector 实现堆</h1>
<p>参考 &lt;剑指 offer&gt; 面试题 41 — 数据流中的中位数</p>
<h1>更改记录</h1>
<p>2023.04.02 搭建架子，写出 set 版本。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nobody</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">266k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">16:09</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6129496365361356"
     crossorigin="anonymous"></script>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"waylondotone/blog_comment","issue_term":"pathname","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
