<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />




<!-- waylon's adsense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6129496365361356"
     crossorigin="anonymous"></script>













  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="sharing daily progress and life">
<meta property="og:type" content="website">
<meta property="og:title" content="One&#39;s Way">
<meta property="og:url" content="http://www.waylon.one/page/9/index.html">
<meta property="og:site_name" content="One&#39;s Way">
<meta property="og:description" content="sharing daily progress and life">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Autonomous Driving &amp; Robotic">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.waylon.one/page/9/"/>





  <title>One's Way</title>
  








<meta name="generator" content="Hexo 6.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">One's Way</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Dare to create</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Trip/Jinan-Taishan-trip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Trip/Jinan-Taishan-trip/" itemprop="url">北京出发夜爬泰山攻略</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-22T22:03:38+08:00">
                2019-10-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Trip/" itemprop="url" rel="index">
                    <span itemprop="name">Trip</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  5.2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  19 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>对泰山的向往，要从课本说起，从冯骥才的《挑山工》，到杜甫的“造化钟神秀，阴阳割昏晓”，自己对泰山的向往不断被加深，一直渴望去看朝阳从云海中喷薄而出，领略孔子登泰山而小鲁的心境。</p>
<p>多平台维护不易，内容实时更新于 <a
href="http://www.waylon.one/Trip/Jinan-Taishan-trip/">个人网站</a>，请移步阅读最新内容。</p>
<p>泰山本来是毕业旅行的一部分，中间却不断耽误和延后，工作一年多了也未成行，最后一狠心，不愿意再等待最佳的季节和时机，选择了一个秋日的周末
(2019年10月19~20日)，和女朋友<strong>从北京出发，小憩济南，夜爬泰山</strong>，圆了自己的泰山梦。</p>
<p>ps.这个时间点被许多人劝说天气比较冷，不适合夜爬，结果自己做足攻略和准备后，一趟下来，发现并不是别人描述的那么寒冷和危险，每个人对冷暖、风险的感受不同，所以小马过河，深浅还是需要自己试。</p>
<p>本次路线规划的特点：</p>
<ul>
<li><p>适合上班族和学生，占用周末时间，不影响周末晚上的休息，周一工作和学习元气满满。</p></li>
<li><p>密集游览济南(趵突泉、大明湖和芙蓉街)和泰山(泰山和岱庙)的主要景点。</p></li>
<li><p>浏览时间分散，休息时间比较充分，不会特别累。</p></li>
<li><p>两个人同行，旅行花销(交通、食宿、门票)不到 1400
元。途中高铁、打车较多，外加一晚的住宿，整体花销多一点。</p></li>
</ul>
<p>2019 年 10 月 18 日(周五)晚上，和女朋友乘坐 K101
火车从北京出发，在火车上休息。第二天早上五点一刻抵达济南站，火车站附近寄存行李(10元钱)，我们轻装简行，徒步前往趵突泉景点(离车站3公里)，沿途可以看济南的景色，感受生活气息，以及解决早饭，抵达趵突泉景点的时间正好是开园时间
(7:00)，门口微信购票，园内游客比较少，不用人挤人地排队等待。</p>
<p>景点的清晨，地面湿漉漉的，空气很适宜，旁边有不少本地人在晨练。</p>
<p>趵突泉位于景区的深处，三眼泉水喷突翻滚，旁边小泉串串珍珠，不愧是“泉水甲天下”。我们到达的时间比较早，游客很少，拍照和欣赏景色很方便，所以建议<strong>先游趵突泉，后看大明湖，错峰出行</strong>。</p>
<p>园内除了趵突泉，周边也是百泉争涌，各有特点，时间充裕可以看看，这些泉水先会流到济南的护城河，最终流向大明湖畔，“四面荷花三面柳，一城山色半城湖”，正是这个城市的写照。我们在趵突泉景点看得比较细，逗留的时间比较长，大概用时
2 小时。</p>
<p><img src="/downloads/images/travel/baotu_spring.JPG" width="400" height="300" title="清晨的趵突泉"></p>
<p>浏览完趵突泉后，向北 800
米可以到达芙蓉街(小吃街)，芙蓉街已经被全国各地的美食和网红食品占据，本地有特色的食品并不多，所以我匆匆路过，没有在这里停留，去看大明湖，哈哈。</p>
<p>从芙蓉街出来后，继续向北，便能到达大明湖。走在湖边，湖光潋滟，秋风阵阵，很是惬意，自己绕湖行走一圈，大概用时
1.5 小时。</p>
<p>大明湖的荷花还是蛮多的，但是秋季的时节不对，荷花已经盛开过，茂盛的荷叶依旧可以让我想象出荷花布满湖面的美景。</p>
<p><img src="/downloads/images/travel/daminghu.JPG" width="400" height="300" title="大明湖"></p>
<p>从大明湖出来后，时间略微有点紧，打车返回济南站，然后乘坐 G459
去泰安(泰山所在地)。</p>
<p>济南旅游建议：</p>
<ul>
<li><p>趵突泉旁边的小亭，有免费的泉水品尝，清冽甘美。</p></li>
<li><p>抵达趵突泉后，门口有自助买票(成人40元)，不用排队。</p></li>
<li><p>济南的趵突泉、大明湖和芙蓉街都聚在中心区，离济南站比较近，离济南西站比较远，建议买票到济南站，而非济南西站。</p></li>
</ul>
<p>从济南出发，高铁不到半小时就能抵达泰安。我们打车抵达岱庙附近的酒店，稍作休息，然后游览岱庙。</p>
<p>ps.
网上攻略说泰山<strong>出租车不打卡</strong>，自己不喜欢搞价，所以整个行程一直选择<strong>滴滴打车</strong>，避免被黑出租坑和不必要的搞价。</p>
<hr />
<p>岱庙是历代帝王举行封禅大典和祭拜泰山神的地方，园内碑林众多，一部分是泰山上的石刻复制，文化底蕴很厚实，需要静下心慢慢体会。</p>
<p>岱庙对古石刻和壁画的保护并不到位，好多石刻裸露在外，仍有游客对壁画拍照，遗憾。岱庙周边的城墙对游客开放，可以登上城墙绕行一圈，瞭望远处的泰山。自己对碑文看得略微细一点，时间稍微长点，游览时间大概
1.5
小时。岱庙和泰山的门票是共用的(成人115元，三日内不限次数)，可以微信公众号购票，景区身份证验票。</p>
<p><img src="/downloads/images/travel/two_bugs.jpg" width="400" height="300" title="岱庙石刻"></p>
<p>下午五点半游览完岱庙后，回到酒店休息，为晚上的夜爬储能。晚上 10:30
醒来，点外卖吃晚饭，然后打车直接到红门登山口，开始泰山的夜爬之行。</p>
<p>因为游览岱庙时已经买好了泰山和岱庙的通票，直接刷身份证进入景区，比排在外面买纸质票方便许多。我们大概是凌晨零点从红门开始爬山，同行爬泰山的游客很多，整个行程周围
10
米内基本会一直有同行者，很热闹，不用担心独行夜路。刚从红门上来时，道路中间会摆放一些财神塑像，注意安全。</p>
<p>泰山夜行路线比较成熟，一路上提供矿泉水、方便面、爬山杖、军大衣的商家比比皆是，完全不用担心错过这家没下家。到达中天门后，继续向前走
200
米左右，会有一个比较便宜的补给区(中天门附近车辆运输方便)，比如矿泉水10元4瓶，如果继续向上爬，价格就不会那么便宜了，所以建议在中天门适度补给。因为是夜间，水的需求量应该不会太多，不建议购买太多背上去(推荐1瓶/人)，可以自带一些热水。此外，夜间爬山时运动量大，不会太冷，所以不建议开始爬山时租军大衣，否则爬山时不方便，归还时也不方便，建议爬到南天门后再租军大衣。</p>
<p>夜爬泰山看不清远处，所以低着头一步一个脚印向前走，反而简单起来。我们在爬山时，中间有半个多小时的休息，抵达南天门时已经
4点半(从入口开始算起，大概花费4.5小时)。南天门的风明显变大，气温也比较低，那里可以租军大衣(租金10/20/30元不等，押金100元，返还衣服时退押金)。我们在那里才穿上背了一路的羽绒服(夜爬真心不冷)，外面套着租的军大衣，全副武装抗冷。</p>
<!--
  <img src="https://www.yanlongwang.net/downloads/images/travel/in_winds.jpg" width="400" height="300" title="夜爬泰山">
-->
<p>整装完毕后，便可以看时间提早去日观峰挑个好位置，观鲁台也可以。从南天门到观日出的好地点—日观峰(拱北石)，大概需要半小时，建议至少比日出时间提早一小时到，可以占个好地方，否则只能在别人的手机里看日出啦。我们提早一小时抵达时，天还很暗，但日观峰上已经是people
mountain people sea，大家翘首以待。</p>
<p><img src="/downloads/images/travel/people_mountain_people_sea.jpg" width="400" height="300" title="观日峰静候日出"></p>
<p>我们在寒风里等待了一个多小时，但这次太阳有点害羞，躲在云里迟迟不肯出来(多云天气)，大概7点多才露个脸，把大家乐得不行，也算是不枉夜爬吧。虽然没有看到朝阳从云海里喷薄而出，但是自己和一堆人盯着远处看足2个小时，从天黑到蒙蒙亮，到泛起鱼肚白，再到最后的亮堂堂，看天上云卷云舒，也算是一次很值得回忆的观日活动吧。</p>

<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
<iframe src="//player.bilibili.com/player.html?aid=90978812&cid=155358422&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe></div>

<p>看完日出后，去旁边的玉皇顶登上最高处，一览众山小，便开始往回折返。我们第一次选择的是比较成熟的红门路线，路线大概是岱庙-&gt;岱宗坊-&gt;红门宫-&gt;万仙楼-&gt;斗母宫-&gt;经石峪-&gt;壶天阁-&gt;回马岭-&gt;中天门-&gt;快活三里-&gt;云步桥-&gt;五大夫松-&gt;十八盘-&gt;南天门-&gt;天街-&gt;碧霞祠-&gt;唐摩崖-&gt;五岳独尊-&gt;日观峰-&gt;玉皇顶。</p>
<p><img src="/downloads/images/travel/Taishan_route.JPG" width="400" height="300" title="泰山路线，侵删"></p>
<p>因为晚上夜爬无法看清楚风景，所以自己选择原路折返，一路下坡，从高处看着下面曲折的山道，感慨自己是如何登上来的，正所谓“登高必自卑，行远必自迩”。我们走到中天门时，因为女朋友比较累，所以在那里乘坐景区的摆渡车下山(30元/人)到天外村，大概中午11点半到达山脚。</p>
<p>泰山旅游建议：</p>
<ul>
<li><p>预定的酒店最好在岱庙附近，距离岱庙和泰山登山口都比较近，方便出游。</p></li>
<li><p>夜爬泰山，晚上记得要吃好饭，下一顿饭估计要清晨了。看完日常后，在天街有几家10元管饱的早餐，但是不太卫生，我亲眼看到服务员会把其他人吃剩的咸菜重新放回去。</p></li>
<li><p>最好轻装简行，记得拿充电宝，拿点热水和士力架，不要带太多的零食。山上网络不好，可以带一些现金。</p></li>
<li><p>虽然路上游客比较多，但是很多路段没有灯，建议购买头灯或手电筒，偶尔借着灯光看看远处，也是不错的体验。带上头灯，你一定是泰山最亮的仔。</p></li>
<li><p>泰山光污染不严重，天气晴朗时，抬头应该可以看到月亮和繁星。</p></li>
<li><p>夜爬注意安全，泰山最抖的是十八盘路段，尤其是升仙坊这一段，记得抓好路旁边的扶手。</p></li>
<li><p>路上小贩特别多，买东西一定不要在第一家买，对半还价。尽管我做了攻略，也深谙这个道理，但是饥饿和寒冷让我一次次忘记，比如我在中天门第一家买的西瓜很贵，继续行走200米，有一排商家，可以便宜一大半，租大衣同理。</p></li>
<li><p>记得买保险，比如支付宝的旅游险，一般是三日，可以覆盖自己的短期游。</p></li>
</ul>
<!--
![](https://www.yanlongwang.net/downloads/images/travel/wuyueduzhun.jpg)
-->
<p>中午在酒店修整后，2 点出门吃午饭，乘坐 4 点多的 G322
从泰安高铁站返回北京，到北京大概是晚上 6
点半，可以美美休息一晚，第二天依然是精气神饱满。</p>
<!--
这次旅游的感悟：
要有小马过河的精神，听听别人的建议，但是敢于尝试。
永远没有做一件事情最佳的时间，如果有的话，那就是现在啦！
-->

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Linux/Install-nextcloud-in-docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux/Install-nextcloud-in-docker/" itemprop="url">使用 Docker 在 Linux 上安装 NextCloud 私有云盘</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-21T16:47:58+08:00">
                2019-09-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  12k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  45 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!--
[Nextcloud 搭建私人云服务教程](https://blog.itswincer.com/posts/bf0413ac/)
[使用Docker快速安装NextCloud个人私有云盘](https://www.moerats.com/archives/420/)
[docker容器开机自启](https://www.cnblogs.com/gcgc/p/10494615.html)
-->
<p>ps. 本文实时更新于 <a
href="http://www.waylon.one/Linux/Install-nextcloud-in-docker/">个人网站</a>，请移步阅读。</p>
<p>国内的网盘虽然免费，但总让人对隐私不太放心，毕竟“免费的永远是最贵的”。</p>
<p>自己之前购买了一个VPS，搭建自己的网站后，感觉没有充分利用 VPS
的流量和性能，于是琢磨搭建一个私人的云服务，随后就发现了 Nextcloud
这一开源云服务。</p>
<p><img
src="http://www.waylon.one/downloads/images/Baidu_to_private.JPG" /></p>
<blockquote>
<p>通过 <a target="_blank" rel="noopener" href="https://bandwagonhost.com/aff.php?aff=60653">链接</a>
注册并购买搬瓦工VPS，就可以按下面的教程安装 NextCloud
私人云盘啦，我也可以得到新客注册的返现。</p>
</blockquote>
<h1 id="about-nextcloud">About NextCloud</h1>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://nextcloud.com/">Nextcloud</a> is the <strong>open
source file sync and share software</strong> for everyone from
individuals to large enterprises and service providers. Nextcloud
provides a safe, secure and compliant file sync and share solution on
servers you control.<br />
With Nextcloud you can share one or more folders on your PC, and sync
them with your Nextcloud server. <strong>Place files in your local
shared directories, and those files are immediately synced to the
server, and then to other PCs via the desktop client.</strong> Not near
a desktop client? No problem, simply log in with the web client and
manage your files there. <strong>The Android and iOS mobile apps allow
you to browse, download and upload photos and videos.</strong><br />
Whether using a mobile device, a workstation, or a web client, Nextcloud
provides the ability to put the right files in the right hands at the
right time on any device in one simple-to-use, secure, private and
controlled solution.</p>
</blockquote>
<p><img
src="http://www.waylon.one/downloads/images/Nextcloud.png" /></p>
<p>简而言之，Nextcloud
是一个自由及开放源代码的私有云网盘，每个人都可以在私人服务器上安装并运行它，能够快速同步你的文件到你的私有服务器，方便你跨平台(现在支持PC、Android和iOS)
同步和分享文件，功能和百度云不差多少，优点是隐私好，同步下载速度取决于服务器带宽。</p>
<p>与 Dropbox 等专有服务相比，Nextcloud
的开放架构让用户可以利用应用程序的方式在服务器上新增额外的功能，并让用户可以完全掌控自己的数据。同时，Nextcloud
可与在 Windows、macOS 或是多种 Linux 发布版上运行的客户端同步。</p>
<p>Nextcloud
用户可以管理日历、联系人、计划工作与流媒体。此外，用户也可以在 Nextcloud
上使用基于浏览器的文本编辑器、书签服务、缩略网址服务、相册、RSS阅读器与文件查看器。因为有良好的扩展性，Nextcloud可以透过鼠标点一下即可完成安装的应用程序强化其功能，并可连线至
Dropbox、Google 云端硬盘与 Amazon S3 等产品。</p>
<h1 id="安装简介">安装简介</h1>
<p>Nextcloud 虽然这么好用，但是安装依赖却非常复杂，需要安装 LNMP
集成环境(i.e. Linux + Nginx + MySql +
PHP)，在搭建过程中或多或少都会出点问题。</p>
<p>本文推荐一个很方便的安装方法 <a
target="_blank" rel="noopener" href="https://github.com/chrootLogin/docker-nextcloud">docker-nextcloud</a>，使用纯命令形式在
Docker 上安装 NextCloud (Docker file
会帮你把负责的依赖都配置好)，并探讨如何配置反向代理，适合尝鲜的新手。</p>
<p>安装 Docker 后，需要安装两个容器：mysql 和 nextcloud。其中，mysql
用于存储用户的数据，nextcloud 通过向 mysql
容器读写数据，从而实现数据的存储和访问。</p>
<h1 id="安装docker">安装Docker</h1>
<blockquote>
<p>Docker
是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的
Linux 或 Windows
机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># CentOS 7、Debian、Ubuntu</span><br><span class="line">curl -sSL https://get.docker.com/ | sh</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure>
<h2 id="复习知识点">复习知识点</h2>
<ul>
<li>curl 是一个工具，用于传输来自服务器或者到服务器的数据。</li>
<li>systemctl 是一个系统管理守护进程、工具和库的集合，用于取代 system
V、service 和 chkconfig 命令，初始进程主要负责控制 systemd
系统和服务管理器。</li>
<li>systemctl start 启动服务</li>
<li>systemctl enable 激活服务并在开机时启用</li>
</ul>
<!--
[Centos7中systemctl命令详解](https://www.cnblogs.com/zhming26/p/6155201.html)
-->
<h1 id="安装-nextcloud-服务器">安装 Nextcloud 服务器</h1>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 拉取 Mysql 镜像和 Nextcloud 镜像</span><br><span class="line">docker pull rootlogin/nextcloud &amp;&amp; docker pull mariadb:10</span><br><span class="line"></span><br><span class="line"># 创建 mysql 容器，注意修改数据库信息</span><br><span class="line">docker run --name nextcloud_db -d --restart=always -e MYSQL_ROOT_PASSWORD=test -e MYSQL_DATABASE=test -e MYSQL_USER=test -e MYSQL_PASSWORD=test -v /var/nextcloud/mysql:/var/lib/mysql mariadb:10</span><br><span class="line"></span><br><span class="line"># 创建 nextcloud 容器，添加链接到 mysql 容器；ip 是浏览器访问云盘的端口号。使用镜像 rootlogin/nextcloud，以后台模式启动一个容器, 容器命名为 nextcloud，将容器的 80 端口映射到主机的 3000 端口,主机的目录 /var/nextcloud/data 映射到容器的 /data，并添加链接到上述的 nextcloud_db 容器。</span><br><span class="line">docker run --name nextcloud_db -d --restart=always -e MYSQL_ROOT_PASSWORD=test -e MYSQL_DATABASE=test -e MYSQL_USER=test -e MYSQL_PASSWORD=test -v /var/nextcloud/mysql:/var/lib/mysql mariadb:10</span><br></pre></td></tr></table></figure>
<!--
密码 supersecretpassword
-->
<!--
docker run --name nextcloud_db -d --restart=always -e MYSQL_ROOT_PASSWORD=test -e MYSQL_DATABASE=test -e MYSQL_USER=test -e MYSQL_PASSWORD=test -v /var/nextcloud/mysql:/var/lib/mysql mariadb:10
-->
<!--
docker run -d --name nextcloud --restart=always --link nextcloud_db:nextcloud_db -v /var/nextcloud/data:/data -p 3000:80 rootlogin/nextcloud
-->
<blockquote>
<p>MariaDB 和 MySQL 的关系：<strong>MariaDB 数据库管理系统是 MySQL
的一个分支</strong>。开发这个分支的原因之一是：甲骨文公司收购了 MySQL
后，有将 MySQL
闭源的潜在风险，因此社区采用分支的方式来避开这个风险。<br />
MariaDB 的目的是完全兼容 MySQL，包括 API 和命令行，使之能轻松成为 MySQL
的代替品。</p>
</blockquote>
<p>  <img
src="http://www.waylon.one/downloads/images/next_cloud_container.png" /></p>
<p>恭喜你，现在初级版的云服务器已经搭建成功。访问地址为
http://your_ip:3000。<br />
启动命令里的 3000
端口可自行替换，不过后面有关端口的命令都可自行修改，/var/nextcloud/data为网盘的数据库，可以自行修改。</p>
<h2 id="复习知识点-1">复习知识点</h2>
<ul>
<li>docker pull 是从镜像仓库拉取镜像。</li>
<li><a
target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-run-command.html">docker
run</a> 是创建一个新的容器并运行一个命令。</li>
<li>--restart=always，设置开机重启</li>
</ul>
<h1 id="防火墙开启端口">防火墙开启端口</h1>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#CentOS 7</span><br><span class="line">firewall-cmd --zone=public --add-port=3000/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h1 id="初始设置">初始设置</h1>
<ul>
<li>访问 http://your_ip:3000。</li>
<li>创建管理员帐号和密码</li>
<li>数据库选择 MySQL/MariaDB，如果配置不成功，可以选择 SQLite
(性能差点，但是可以满足个人基本的需求)。</li>
</ul>
<table>
<thead>
<tr class="header">
<th>名称</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>用户名</td>
<td>test</td>
</tr>
<tr class="even">
<td>密码</td>
<td>test</td>
</tr>
<tr class="odd">
<td>数据库名</td>
<td>test</td>
</tr>
<tr class="even">
<td>地址</td>
<td>nextcloud_db:3306</td>
</tr>
</tbody>
</table>
<blockquote>
<p>mysql数据库默认端口是3306。</p>
</blockquote>
<p><img
src="http://www.waylon.one/downloads/images/nextcloud_initialize.png" /></p>
<ul>
<li>恭喜你，进入自己的网盘界面。</li>
</ul>
<p><img src="/downloads/images/nextcloud_web.png" /></p>
<h1 id="域名访问">域名访问</h1>
<p>IP 访问会直接把云盘的 IP
和端口暴露出来，感觉不太妥。如果要<!--像上面示例 [点击访问](http://drive.waylon.one/)，-->通过域名访问自己的网盘，就需要反代了。</p>
<p>反代可以用 Nginx、Apache、Caddy，本文讲述如何使用 Nginx。</p>
<blockquote>
<p>Nginx是一款轻量级的 Web
服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，在 BSD-like
协议下发行。其特点是占有内存少，并发能力强，</p>
</blockquote>
<p>默认用户已经完成购买域名、安装 Nginx
的前序步骤，鼓励折腾一下，有问题欢迎下面留言交流。</p>
<h2 id="certbot-生成-https-证书">certbot 生成 https 证书</h2>
<p>Let's
Encrypt是很火的一个免费SSL证书发行项目，自动化发行证书，证书有90天的有效期。适合个人使用或者临时使用，不用再忍受自签发证书不受浏览器信赖的提示。<br />
附上CentOS 7.2的 <a
target="_blank" rel="noopener" href="https://www.vpser.net/build/letsencrypt-certbot.html">免费SSL证书Let's
Encrypt</a> 流程。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./certbot-auto certonly --email your_mail --agree-tos --no-eff-email --webroot -w /var/nextcloud -d drive.example.com</span><br></pre></td></tr></table></figure>
<h2 id="配置-nginx-配置文件">配置 Nginx 配置文件</h2>
<p>在/etc/nginx/conf.d/下的配置文件里添加如下配置。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line">    server_name drive.example.com;</span><br><span class="line">    # enforce https</span><br><span class="line">    return 301 https://$server_name$request_uri;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl http2;</span><br><span class="line">    listen [::]:443 ssl http2;</span><br><span class="line">    server_name drive.example.com;</span><br><span class="line"></span><br><span class="line">    ssl_certificate  /etc/letsencrypt/live/drive.example.com/fullchain.pem;</span><br><span class="line">    ssl_certificate_key  /etc/letsencrypt/live/drive.example.com/privkey.pem;</span><br><span class="line"></span><br><span class="line">    add_header Strict-Transport-Security &quot;max-age=63072000; includeSubdomains; preload&quot;;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">     proxy_pass http://your_ip:3000;</span><br><span class="line">     proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后，重启 nginx，就可以通过网址访问自己的云盘啦！</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>
<h1 id="安装中可能遇到的问题-fqa">安装中可能遇到的问题 FQA</h1>
<ul>
<li>Q:
初始化时，提示“看起来您正在尝试重新安装您的Nextcloud。但您的config文件夹中没有CAN_INSTALL文件。请在您的config文件夹中创建CAN_INSTALL文件以继续。”</li>
<li>A: 运行如下命令。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/nextcloud/data/config &amp;&amp; touch CAN_INSTALL</span><br></pre></td></tr></table></figure>
<p>其中，/var/nextcloud/data为网盘的数据库，请自行修改。</p>
<hr />
<ul>
<li>Q: 反向代理后，网址无法直接访问，比如提示403。</li>
<li>A：请先定位问题，可以在 /var/log/nginx/error.log 查看代理错误。</li>
</ul>
<hr />
<ul>
<li>Q:关机重启后，原来配置好的网盘无法访问。</li>
<li>A:在使用docker
run启动容器时，已经使用--restart参数来设置容器开机自启。如果发现服务器重启后，无法访问网盘，可以尝试
update 命令设置 --restart=always。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker update --restart=always 容器名称</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Docker 提供了 restart policy 机制，可以在容器退出或者 Docker
重启时控制容器能够自启动。这种 Restart policy
可以保证相关容器按照正确顺序启动。</p>
</blockquote>
<hr />
<ul>
<li>Q: 通过 IP 方式 登录时，没有出现登录界面，显示 "HTTP ERROR
500".</li>
<li>A: 根据 <a
target="_blank" rel="noopener" href="https://help.nextcloud.com/t/solved-nextcloud-12-http-error-500/21577">Nextcloud
12 HTTP Error 500</a> 提供的方法，更新PHP模块可以解决问题。
<ul>
<li>我使用 apt-get upgrade 升级了所有软件的版本，然后问题得到修复。</li>
</ul></li>
</ul>
<blockquote>
<p>HTTP 500 错误，全称为 HTTP 500 Internal Server Error，即 HTTP 500
内部服务器错误。<strong>HTTP 500
内部服务器错误表示服务器遇到意外情况，导致其无法履行请求</strong>，但它无法说明具体错误或发生错误的根本原因。当发生错误时，访问的网站会显示发生错误。</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Ubuntu/how-to-create-gif/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Ubuntu/how-to-create-gif/" itemprop="url">how to create gif in Ubuntu / 如何在 Ubuntu 系统上录制 gif</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-20T17:17:56+08:00">
                2019-09-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ubuntu/" itemprop="url" rel="index">
                    <span itemprop="name">Ubuntu</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  2.9k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  11 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ps. 本文实时更新于<a
href="http://www.waylon.one/Ubuntu/how-to-create-gif/">个人网站</a>，请移步阅读。</p>
<p><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/GIF/217778?fr=aladdin">Gif</a>
是当下较为流行的一种交流方式，其文件比视频小，而且比 jpg
图片生动形象，所以不仅在微薄、QQ
等社交中尤为常见，而且适用于产品和功能的展示。同时，Gif
文件大小一般是普通 MP4 格式的数倍。</p>
<blockquote>
<p>GIFs are an average of 5-10 times larger than an efficiently encoded
MP4 video. This difference in size means that GIFs waste a large amount
of bandwidth and also load at a slower rate leading to a bad user
experience.</p>
</blockquote>
<p>下文主要分享下如何在 Ubuntu 18 上录制 gif 动画以及处理 gif
文件，不必动用到 Windows 中像 Photoshop 这样的神器。</p>
<h1 id="软件需求">软件需求</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/liuxiabing150/article/details/45872783">ImageMagick</a>
&gt; ImageMagick 是一款用于创建、编辑和合并位图图像的一款开源软件。</li>
<li><a
target="_blank" rel="noopener" href="https://www.linuxidc.com/Linux/2017-12/149744.htm">byzanz</a> &gt;
byzanz是通过输入命令方式来录制文件小、清晰的GIF动态效果图。</li>
</ul>
<h1 id="gif-录制">Gif 录制</h1>
<p>本文使用byzanz来录制Gif，其主要的参数选项有：</p>
<table>
<thead>
<tr class="header">
<th>参数</th>
<th>单位</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>-d, --duration</td>
<td>SECS</td>
<td>动画的时间 (默认：10 秒)</td>
</tr>
<tr class="even">
<td>--delay</td>
<td>SECS</td>
<td>开始之前的延时(默认：1 秒)</td>
</tr>
<tr class="odd">
<td>-c, --cursor</td>
<td></td>
<td>录制鼠标光标</td>
</tr>
<tr class="even">
<td>-a, --audio</td>
<td></td>
<td>录音</td>
</tr>
<tr class="odd">
<td>-x, --x</td>
<td>像素</td>
<td>要录制矩形的 X 坐标</td>
</tr>
<tr class="even">
<td>-y, --y</td>
<td>像素</td>
<td>要录制矩形的 Y 坐标</td>
</tr>
<tr class="odd">
<td>-w, --width</td>
<td>像素</td>
<td>录制矩形的宽度</td>
</tr>
<tr class="even">
<td>-h, --height</td>
<td>像素</td>
<td>录制矩形的高度</td>
</tr>
<tr class="odd">
<td>-v, --verbose</td>
<td></td>
<td>详细</td>
</tr>
<tr class="even">
<td>--display</td>
<td></td>
<td>要使用的 X 显示</td>
</tr>
</tbody>
</table>
<h2 id="例子">例子</h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">byzanz-record -d 10 --delay=5 -x 0 -y 0 -w 1440 -h 900 out.gif  </span><br></pre></td></tr></table></figure>
<p>上面的命令是录制屏幕坐标(0,0)处宽度1440像素、高度900像素的矩形区域(指定的坐标为矩形左上角)，延时5秒开始录制，录制时间10s，输出文件out.gif。</p>
<h1 id="gif-合并">Gif 合并</h1>
<p>如果想将录制的多个Gif合并成一个文件，只需将要合并的文件存到同一文件夹当中，再执行如下命令即可，不需要安装其他软件，Ubuntu比Windows强大之处。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">convert -delay 120 -loop 0 *.gif output.gif</span><br></pre></td></tr></table></figure>
<p>其中，"-delay 120"表示Gif动画速度, "-loop 0"表示无限循环。</p>
<h1 id="参考文献">参考文献</h1>
<p><a
target="_blank" rel="noopener" href="https://www.maketecheasier.com/record-screen-as-animated-gif-ubuntu/">Record
Screen as Animated GIF in Ubuntu with Byzanz</a></p>
<p><a
target="_blank" rel="noopener" href="https://www.trellis.co/blog/gifs-vs-animated-videos-which-should-you-use">Gifs
vs animated videos - which should you use</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/paper/paper-MIT-SACADRL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/paper/paper-MIT-SACADRL/" itemprop="url">解读 Socially Aware Motion Planning with Deep Reinforcement Learning</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-20T12:13:39+08:00">
                2019-09-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/paper/" itemprop="url" rel="index">
                    <span itemprop="name">paper</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  18k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  1:05
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[toc]</p>
<!--
- 和USV的规则很类似，可以引入到USV的避障应用中。如何建立函数和表达式，是难点所在。
- norms, these policies are further evaluated on randomly generated test cases
- at human walking speed
-->
<!--
好句子，可以组合起来成为自己的句子

A key to resolving this problem is to account for cooperation, that is, to model/anticipate the impact of the robot’s motion on the nearby pedestrians

 Reciprocity implicitly encodes a model of the other agents’ behavior, which is the key for enabling cooperation without explicit communication. While no behavioral rules were imposed in the problem formulation, CADRL policy exhibits certain navigation conventions.

 Existing works have reported that human navigation (or teleoperation of a robot) tends to be cooperative and time- efficient. This work notes that these two properties are encoded in the CADRL formulation through using the min-time reward function and the reciprocity assumption.

 We first describe a strategy for shaping normative behaviors for a two-agent system in the RL framework, and then generalize the method to multiagent scenarios.

 Human-robot coexistence navigation tends to be cooperative and time-efficient, these two properties could encodes a model of Reciprocity implicitly behavior and shaping normative behaviors for a robot in the RL framework.

 A multiagent collision avoidance problem can be formulated as a sequential decision making problem in a reinforcement learning framework.

 The navigation problem can be formulated as a sequential decision making problem in a reinforcement learning framewor

 **social norms are the emergent behaviors from a time-efficient, reciprocal collision avoidance mechanism**

-->
<p>Socially Aware Motion Planning with Deep Reinforcement Learning</p>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/pdf/1703.08862.pdf">Paper download
link</a></p>
<hr />
<p>简评：之前的方法使用特征匹配 (feature-matching techniques)
的做法来描述和模仿行人的轨迹，但是人和人之间的特征是有差异的(vary from
person to
person)，所以生成的行人轨迹并不理想。这篇文献指出，尽管导航时指明机器人什么应该和人类交互做是比较困难的(精确的行人导航机制)，但是却可以简单地指明，什么是不应该做的(违反社交规范)。尤其是，本文使用深度强化学习，提出一种时间高效
(time-efficient) 的遵守社会规范的导航策略。</p>
<blockquote>
<p>This work notes that while it is challenging to directly specify the
details of what to do (precise mechanisms of human navigation), it is
straightforward to specify what not to do (violations of social norms).
Specifically, using deep reinforcement learning, this work develops a
time-efficient navigation policy that respects common social norms.</p>
</blockquote>
<p>此外，本文是在作者基于深度强化学习的多智能体避障的研究基础上，在多智能体系统中引入具有社交意识的行为，本文的主要贡献是如何在CADRL中引入和融合社交行为。所以，可以简单认为，SA-CADRL
= SA (socially aware) + CADRL(collision avoidance with deep
reinforcement learning)。</p>
<blockquote>
<p>This work extends the collision avoidance with deep reinforcement
learning framework (CADRL) to characterize and induce socially aware
behaviors in multiagent systems.</p>
</blockquote>
<p>多平台维护不易，内容实时更新于 <a
href="http://www.waylon.one/paper/paper-MIT-SACADRL/">个人网站</a>，请移步阅读最新内容。</p>

<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
<iframe src="//player.bilibili.com/player.html?aid=327568946&bvid=BV1DA41187qB&cid=172392972&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe></div>

<h1 id="introduction">INTRODUCTION</h1>
<!--
provide personal mobility services and luggage carrying support
airports and shopping malls

require the robots to be capable of navigating efficiently and safely in close proximity of people
-->
<h2 id="人机交互方法演进">人机交互方法演进</h2>
<ol type="1">
<li><p>将行人视为具有简单动力学的动态障碍物，执行特定的反应式避障行为。</p>
<blockquote>
<p>A common approach treats pedestrians as dynamic obstacles with simple
kinematics, and employs specific reactive rules for avoiding
collision.</p>
</blockquote>
<ul>
<li>缺陷：这种方法没有观察人类的行为，会产生不安全、不自然的行为，尤其当机器人的速度和人类行走速度比较靠近时。</li>
</ul>
<blockquote>
<p>Since these methods do not capture human behaviors, they sometimes
generate unsafe/unnatural movements, particularly when the robot
operates near human walking speed.</p>
</blockquote></li>
<li><p>使用更精致的运动模型来推理附近行人的运动意图(hidden
intents)，产生一系列预测轨迹。然后，使用传统的路径规划算法为机器人生成无碰撞(collision-free)的路径。</p>
<blockquote>
<p>More sophisticated motion models have been proposed, which would
reason about the nearby pedestrians’ hidden intents to generate a set of
predicted paths. Subsequently, classical path planning algorithms would
be employed to generate a collision-free path for the robot.</p>
</blockquote>
<ul>
<li>缺陷：导航问题分割为不关联的预测和路径规划，可能导致机器人冻结问题(the
freezing robot
problem)，机器人无法找到任何可行的行为，因为预测的轨迹让大部分的空间不可通行。</li>
</ul>
<blockquote>
<p>Separating the navigation problem into disjoint prediction and
planning steps can lead to the freezing robot problem, in which the
robot fails to find any feasible action because the predicted paths
could mark a large portion of the space untraversable.</p>
</blockquote></li>
</ol>
<ul>
<li>My comment
(MC):虽然作者认为这种做法不合理，但是这是在目前工业界比较流行的做法。导航问题分割为多个层次模块，上下游之间透明，容易迁移和调试。</li>
</ul>
<ol start="3" type="1">
<li>合作(cooperation)</li>
</ol>
<p>基于上述研究的问题，作者提出一种做法，合作(cooperation)，建模(model)/预测(anticipate)机器人对周围行人的影响。</p>
<blockquote>
<p>A key to resolving this problem is to account for cooperation, that
is, to model/anticipate the impact of the robot’s motion on the nearby
pedestrians.</p>
</blockquote>
<ul>
<li><p>现阶段，基于合作的社交导航研究，主要分为基于模型(model-based)的做法和基于学习(learning-based)的做法。</p>
<blockquote>
<p>Existing work on cooperative, socially compliant navigation can be
broadly classified into two categories, namely model-based and
learning-based.</p>
</blockquote>
<ul>
<li>基于模型的做法，是一种典型的多智能体避障(multiagent collision
avoidance
algorithm)的扩展，通过增加参数来引入对社交交互行为的考虑。</li>
</ul>
<blockquote>
<p>Model-based approaches are typically extensions of multiagent
collision avoidance algorithms, with additional parameters introduced to
account for social interactions.</p>
</blockquote>
<p>模型方法的缺陷：不确定行人是否会遵循预设的几何模型；势力场需要针对不同的行人，调节参数；可能导致规划轨迹震荡(oscillatory)。</p>
<ul>
<li>基于学习的做法，旨在通过匹配特征统计来开发一种策略。</li>
</ul>
<blockquote>
<p>Learning-based approaches aim to develop a policy that emulates human
behaviors by matching feature statistics. In particular, Inverse
Reinforcement Learning (IRL) has been applied to learn a cost function
from human demonstration (teleoperation), and a probability distribution
over the set of joint trajectories with nearby pedestrians.</p>
</blockquote>
<p>学习方法比模型方法更贴近人类的行为，但是同时需要更高的计算代价(computational
cost)。同时，特征统计在人和人之间变化明显(vary
significantl)，也引起其在不同场景下的泛化能力的担忧。</p></li>
</ul>
<p>简而言之，存在的方法试图建模或复制详细的社交行为机制(mechanisms of
social
compliance)，因为行人行为的随机性(stochasticity)，仍然很难去量化(quantify)。</p>
<blockquote>
<p>In short, existing works are mostly focused on modeling and
replicating the detailed mechanisms of social compliance, which remains
difficult to quantify due to the stochasticity in people’s
behaviors.</p>
</blockquote>
<p>作者认为人类会遵循一系列简单的社交规范，比如从右侧通过(passing on the
right)。所以在强化学习框架中描述(characterize)这些行为的特征，发现通过解决合作避障的问题可以生成(emerge)类人的导航惯例。</p>
<blockquote>
<p>Building on a recent paper, we characterize these properties in a
reinforcement learning framework, and show that human-like navigation
conventions emerge from solving a cooperative collision avoidance
problem.</p>
</blockquote>
<figure>
<img src="/downloads/images/blog/SACADRL_1.jpg"
alt="Symmetries in multiagent collision avoidance" />
<figcaption aria-hidden="true">Symmetries in multiagent collision
avoidance</figcaption>
</figure>
<!--
- Respects a set of simple social norms:
  * passing on the right
  * human navigation conventions are not unique, as the strength (e.g., separation distance) and passing direction vary in different countries
  -->
<h1 id="background">BACKGROUND</h1>
<h2 id="collision-avoidance-with-deep-reinforcement-learning">Collision
Avoidance with Deep Reinforcement Learning</h2>
<p>首先，多智能体的避障，可以表述为在强化学习下的一系列行为决策(a
sequential decision making)问题。</p>
<blockquote>
<p>A multiagent collision avoidance problem can be formulated as a
sequential decision making problem in a reinforcement learning
framework.</p>
</blockquote>
<ul>
<li>强化学习问题建模</li>
</ul>
<p>这部分理论分析非常精彩，建议多阅读几次，理解深意。</p>
<ol type="1">
<li><p>为了刻画附近行人意图的不确定性(uncertainty)，将状态矢量分为可观察部分(observable)和不可观察部分(unobservable)。其中，可观察部分包括行人的速度，位置和大小；不可观察部分，包括行人的目标位置，偏好速度和方向。</p></li>
<li><p>所以，模型的目标是开发一种策略，在避开和附近行人碰撞的基础上，最小化抵达目标的时间。</p></li>
<li><p>在此模型基础上，这个问题可以在强化学习框架下表述为和邻近行人的关联配置(joint
configuration)。另外，引入奖励函数，奖励那些抵达目标的智能体，惩罚那些发生碰撞的智能体。</p>
<blockquote>
<p>In particular, a reward function can be specified to reward the agent
for reaching its goal and penalize the agent for colliding with
others.</p>
</blockquote></li>
</ol>
<ul>
<li><p><strong>状态转移函数模型，因为考虑了其他智能体的隐藏意图(hidden
intents)，所以也简介考虑了其他智能体的行为不确定性</strong>。</p>
<blockquote>
<p>The unknown state-transition model takes into account the uncertainty
in the other agent’s motion due to its hidden intents.</p>
</blockquote></li>
</ul>
<ol start="4" type="1">
<li>随后，解决这个RL问题就是找到表达到达目标点的预估时间的最优值函数(the
optimal value function)，然后可以由值函数回溯得到最优策略(optimal
policy)。</li>
</ol>
<blockquote>
<p>Solving the RL problem amounts to finding the optimal value function
that encodes an estimate of the expected time to goal.</p>
</blockquote>
<p>然后，找到最优值函数的主要的挑战是，关联状态是连续的、高维的矢量，使得离散化和枚举状态空间不可行。</p>
<blockquote>
<p>A major challenge in finding the optimal value function is that the
joint state sjn is a continuous, high-dimensional vector, making it
impractical to discretize and enumerate the state space.</p>
</blockquote>
<p>最近，可以使用深度神经网络来解决这个强化学习的问题，去表示高维空间的值函数，并且具有人类水平的表现。
Recent advances in reinforcement learning address this issue by using
deep neural networks to represent value functions in high-dimensional
spaces, and have demonstrated human-level performance on various complex
tasks.</p>
<p>MC: 到目前为止，作者是在介绍自己已有的研究，the collision avoidance
with deep reinforcement learning framework
(CADRL)，接下来会在这个基础上，引入多智能体间具有社交意识的行为。</p>
<p>最后，作者公开的实现代码 <a
target="_blank" rel="noopener" href="https://github.com/mit-acl/cadrl_ros">mit-acl/cadrl_ros</a> 。</p>
<!--
In contrast, this work extends  [14] to characterize and induce socially aware behaviors in multiagent systems.
B.

> 主要讲述之前的研究成果，CADRL的模型，以及目前在行人交互中的缺陷，引出下文
-->
<h2 id="characterization-of-social-norms">Characterization of Social
Norms</h2>
<p>与其直接去量化人类行为，本文认为复杂的规范行为模式，是由一系列简单的局部交互组成的。MC:
我赞同这个观点，可以把复杂的问题拆分为小问题，容易解决。</p>
<blockquote>
<p>Rather than trying to quantify human behaviors directly, this work
notes that the complex normative motion patterns can be a consequence of
simple local interactions.</p>
</blockquote>
<p>因此，本文进一步猜想，相比于一系列精确定义的规则(a set of precisely
defined procedural rules)，社交规范是从相互避免碰撞的机制中新生的。</p>
<blockquote>
<p>Thus, we conjecture that rather than a set of precisely defined
procedural rules, <strong>social norms are the emergent behaviors from a
time-efficient, reciprocal collision avoidance mechanism</strong>.</p>
</blockquote>
<blockquote>
<p>Reciprocity implicitly encodes a model of the other agents’ behavior,
which is the key for enabling cooperation without explicit
communication.</p>
</blockquote>
<p>有点哲学感:
局部避免碰撞中的互惠原则，衍生出来了所谓的社交行为规范。作者进一步实验表明，无规则的CADRL也可以展示出一定的导航规范。(可以作为research
hypothesis)</p>
<blockquote>
<p>Reciprocity implicitly encodes a model of the other agents’ behavior,
which is the key for enabling cooperation without explicit
communication. While no behavioral rules were imposed in the problem
formulation, CADRL policy exhibits certain navigation conventions.</p>
</blockquote>
<p>所以，作者在这个基础上认为，通过多智能体的避碰学习，可以习得人类现在的行为规范。</p>
<p>已有的文献报道，人类导航趋向于合作和时间最优。所以，作者在CADRL基础上，通过引入最小时间奖励函数和互惠假设(学习到的最优行为，智能体基本都会采用)。</p>
<blockquote>
<p>Existing works have reported that human navigation (or teleoperation
of a robot) tends to be cooperative and time- efficient. This work notes
that these two properties are encoded in the CADRL formulation through
using the min-time reward function and the reciprocity assumption.</p>
</blockquote>
<p>同时，作者指出，从CADRL
衍生的合作行为，和人类现有的理解是不同的。所以，作者会进一步解决这个问题。</p>
<blockquote>
<p>However, the cooperative behaviors emerging from a CADRL solution are
not consistent with human interpretation. The next section will address
this issue and present a method to induce behaviors that respect human
social norms.</p>
</blockquote>
<h1 id="approach">APPROACH</h1>
<blockquote>
<p>本章首先描述两个智能体如何在RL框架中塑造规范行为，然后将这一方法推广到多智能体场景。</p>
</blockquote>
<p>We first describe a strategy for shaping normative behaviors for a
two-agent system in the RL framework, and then generalize the method to
multiagent scenarios.</p>
<h2 id="inducing-social-norms">Inducing Social Norms</h2>
<blockquote>
<p>和自己的解法基本是一致的，只不过没有使用神经网络罢了</p>
</blockquote>
<p>现有的社交行为是众多解决对称避障的方法之一。为了引入一个特定的行为，就需要向RL中引入一点偏爱(bias)，更偏向于一组行为。</p>
<blockquote>
<p>This work notes that social norms are one of the many ways to resolve
a symmetrical collision avoidance scenario. To induce a particular norm,
a small bias can be introduced in the RL training process in favor of
one set of behaviors over others.</p>
</blockquote>
<p>如作者所说，这一方法的优点在于，违背特定性为的做法一般容易被识别，并且这一规范不需要精确。这是因为新增的惩罚打破了避碰的平衡和对称，所以会偏向于遵守社会规则的行为。</p>
<blockquote>
<p>The advantage of this approach is that violations of a particular
social norm are usually easy to specify; and this specification need not
be precise. This is because the addition of a penalty breaks the
symmetry in the collision avoidance problem, thereby favoring behaviors
respecting the desired social norm.</p>
</blockquote>
<!--
Also note that training is performed on randomly generated test cases, and not on the validation test cases.
B.
-->
<!-- 作者自信满满，不愧是MIT出品方 -->
<p>最后，训练的结果表明学到了和人类行为类似的策略，比如 left-handed and
right-handed norms。</p>
<blockquote>
<p>As long as training converges, the penalty sets’ size does not have a
major effect on the learned policy. This is expected because the desired
behaviors are not in the penalty set.</p>
</blockquote>
<h2 id="training-a-multiagent-value-network">Training a Multiagent Value
Network</h2>
<p>因为上文的训练只是在两个智能体之间，所以很难引入到更高阶的行为，比如多智能体环境。这部分主要讲述如何训练多智能体。</p>
<blockquote>
<p>Since training was solely performed on a two-agent system, it was
difficult to encode/induce higher order behaviors, such as accounting
for the relations between nearby agents. This work addresses this
problem by developing a method that allows for training on multiagent
scenarios directly.</p>
</blockquote>
<p>为了刻画多智能体对称的特性，本文使用了权重共享(weight-sharing)和最大池(max-pooling
layers)的神经网络。该网络涉及4个智能体，其中附近三个智能体的状态可以互换而不影响训练结果。</p>
<p>网络结构的详细设计，可以阅读原文。</p>
<blockquote>
<p>To capture the multiagent system’s symmetrical structure, a neural
network with weight-sharing and max-pooling layers is employed,</p>
</blockquote>
<figure>
<img src="/downloads/images/blog/SACADRL_2.jpg"
alt="Network structure for multiagent scenarios" />
<figcaption aria-hidden="true">Network structure for multiagent
scenarios</figcaption>
</figure>
<p>在训练中，会先生成轨迹，然后将轨迹转化为经验集。
<!--这和自己的研究计划类似，轨迹转化为经验值，只不过自己属于模仿学习的范畴，从行人已有的轨迹中提取策略-->
&gt; The trajectories are then turned into state-value pairs and
assimilated into the experience sets.</p>
<p>CADRL和SA-CADRL的训练区别 - Two experience sets are used to
distinguish between trajectories that reached the goals and those that
ended in a collision. - During the training process, trajectories
generated by SA-CADRL are reflected in the x-axis with probability. *
This procedure exploits symmetry in the problem to explore different
topologies more efficiently.</p>
<p>作者在网络训练时已经设置开关(a binary flag indicating whether the
other agent is real or virtual (details)，所以n-智能体的网络也可以用于p
(p&lt;=n) 个智能体的场景。</p>
<blockquote>
<p>An n-agent network can be used to generate trajectories for scenarios
with fewer agents.</p>
</blockquote>
<h1 id="results">RESULTS</h1>
<h2
id="computational-details-online-performance-and-offline-training">Computational
Details (online performance and offline training)</h2>
<p>模型具有比较优秀的实时和收敛(convergence and
time-efficient)表现。</p>
<blockquote>
<p>The size and connections in the multiagent network are tuned to
obtain good performance (ensure convergence and produce time-efficient
paths) while achieving real-time performance.</p>
</blockquote>
<!--
没有探讨agent扩多后，训练效率的问题，担心会指数级增加
-->
<h2 id="simulation-results">Simulation Results</h2>
<p>三组对比试验：一组没有社交行为奖励函数，另外两组是偏向左和右的行为奖励函数。</p>
<blockquote>
<p>Three copies of four-agent SA-CADRL policies were trained, one
without the norm inducing reward, one with the left-handed, and the
other with the right-handed.</p>
</blockquote>
<h2 id="hardware-experiment">Hardware Experiment</h2>
<p>硬件设备</p>
<ul>
<li>The differential-drive vehicle is outfitted with a Lidar for
localization, three Intel Realsenses for free space detection, and four
webcams for pedestrian detection.</li>
</ul>
<p>A hardware demonstration video can be found at <a
target="_blank" rel="noopener" href="https://youtu.be/CK1szio7PyA">here</a>.</p>
<!--
navigate fully autonomously in a dynamic indoor environment
-->
<h1 id="conclusion">CONCLUSION</h1>
<h3 id="contribution">Contribution</h3>
<ul>
<li>In a reinforcement learning framework, a pair of simulated agents
navigate around each other to learn a policy that respect human
navigation norms, such as passing on the right and overtaking on the
left in a right-handed system.</li>
<li>This approach is further generalized to multiagent (n &gt; 2)
scenarios through the use of a symmetrical neural network
structure.</li>
<li>Moreover, SA-CADRL is implemented on robotic hardware, which enabled
fully autonomous navigation at human walking speed in a dynamic
environment with many pedestrians.</li>
</ul>
<h3 id="future-work">Future work</h3>
<ul>
<li>Consider the relationships between nearby pedestrians, such as a
group of people who walk together.
<ul>
<li><a
target="_blank" rel="noopener" href="https://www.yanlongwang.net/Paper/paper-group-surfing/">Group
surfing</a></li>
</ul></li>
<li>MC:可以迁移到其他具有规则学习的场景，比如水面无人艇中COLREGS规则和人类的行为类似。
<ul>
<li><a target="_blank" rel="noopener" href="https://www.yanlongwang.net/USV/colregs-paper/">A
COLREGs-based obstacle avoidance approach for unmanned surface
vehicles</a></li>
</ul></li>
<li>网络模型训练的效率，文章只是训练4个智能体，如果场景复杂，进一步扩展呢？</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/paper/paper-group-surfing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/paper/paper-group-surfing/" itemprop="url">Group Surfing A Pedestrian-based Approach to Sidewalk Robot Navigation / 解读 Group Surfing paper</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-18T12:13:39+08:00">
                2019-09-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/paper/" itemprop="url" rel="index">
                    <span itemprop="name">paper</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  11k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  39 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[toc]</p>
<p><a
target="_blank" rel="noopener" href="https://www.monash.edu/__data/assets/pdf_file/0006/1981176/icra_conference_sidewalk_delivery_robot_navigation.pdf">文献下载地址</a></p>
<!--
![](https://www.codecogs.com/latex/eqneditor.php)
[Autonomous Social Robots in Pedestrian-Rich Environments](https://www.monash.edu/engineering/robotics/projects/autonomous-social-robots-in-pedestrian-rich-environments)
![video_1](https://www.youtube.com/watch?v=fy7fKOADg_A)
![video_2](https://www.youtube.com/watch?v=PHhtYIkdxiw)
-->
<p>这篇论文主要研究如何在人行道上给机器人导航。论文根据人行横道上行人的多与少，来使用两种不同的算法为机器人导航。在行人密集(pedestrian-rich)
的环境下，使用 Group Surfing 方法，模仿前方的行人，以遵守规则
(socially-compliant)
的行为来避开行人和障碍物，并最后抵达目的地；在行人稀疏
(pedestrian-sparse)
的环境下，通过检测马路沿，沿着马路沿导航。在这两种算法下，底层的避障模块是有模仿人类倾向
(human-aware)。最后，作者在仿真和实物上均验证了算法。</p>
<p>总体而言，这篇文章跟踪行人的思路比较好，算法实现细节清楚，在算法验证阶段有条理，总体质量比较高。</p>
<p>多平台维护不易，内容实时更新于<a
href="http://www.waylon.one/paper/paper-group-surfing/">个人网站</a>，请移步阅读最新内容。</p>

<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
<iframe src="//player.bilibili.com/player.html?aid=667526557&bvid=BV1Va4y1t77j&cid=172396208&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe></div>


<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
<iframe src="//player.bilibili.com/player.html?aid=412574140&bvid=BV1aV411f7cx&cid=172397637&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe></div>

<h1 id="introduction">INTRODUCTION</h1>
<p>本文的一个侧重点是，人机交互，强调机器人尽量不影响行人的行为，或者以人的方式去交互。所以，研究目标不是一个简单的(类似于最短路径)求最优解的问题。</p>
<p>首先，这篇文章的应用场景是人行道(Sidewalk)，导航空间在路旁，行人的方向大概是两个线性的。</p>
<blockquote>
<p>Sidewalks present a unique yet challenging environment in that the
navigable space combines elements of both roads and free indoor spaces.
Often sidewalk motion is restricted to two linear directions and the
resulting navigable space is limited, like on roads.</p>
</blockquote>
<p>问题的复杂性在于，行人的活动比较随机，可能聚团(group)一起走。</p>
<blockquote>
<p>However, pedestrians generally do not walk in perfect queues.
Instead, people tend to walk in groups of variable sizes and speeds and
move along with a general self-organizing crowd flow.</p>
</blockquote>
<p>人行道导航(sidewalk
navigation)的特点是，必须考虑行人的随机行为，同时遵守一定的社会规则，比如行人的交互常识(pedestrian
conventions)，人际距离学(appropriate
proxemics)，即行走方向保持的距离比垂直方向的距离要远。</p>
<blockquote>
<p>Compared to autonomous road navigation, sidewalk navigation must also
account for stochastic human movement that necessitates dynamic obstacle
avoidance. Furthermore, certain social rules, such as walking in lanes
or affording more space in the direction of walking than in the
perpendicular direction, are rules that a robot should follow as
well.</p>
</blockquote>
<p>已有的研究方法有推理(reasoning)和学习(learning)，或者两者的结合。社会规则(Social
rules)，在推理方法中作为代价函数，或在学习方法中作为奖励函数。</p>
<blockquote>
<p>In general, methods are based on either reasoning, learning, or a
combination thereof.</p>
</blockquote>
<p>已有方法的局限性在于，利用对行人意图的理解，通常适用于开放环境(open
environments)，而本文的研究问题是有限制的人行道环境，同时没有考虑人行横道的物理边界，机器人的运动会影响行人流等。</p>
<blockquote>
<p>Here, the aforementioned approaches may be less effective as they do
not account for the physical sidewalk boundaries, or how robot movement
will affect pedestrian flow.</p>
</blockquote>
<p>所以，本文的主要研究问题是如何考虑附近行人的行为和行人流，机器人最终抵达终点。</p>
<blockquote>
<p>The key research question this paper considers is how mobile robots
can utilize nearby pedestrian behaviours and flows to navigate towards a
global goal.</p>
</blockquote>
<p>针对这个问题，作者给出的答案是，模仿行人的行为。当检测到有行人朝向机器人的终点时，会允许机器人模仿并从用行人的社交行为。</p>
<blockquote>
<p>When our navigation stack detects people moving towards the robot’s
goal, a ‘group surfing’ behaviour is used. This allows the robot to
imitate and participate in pedestrian social behaviours.</p>
</blockquote>
<p>在行人稀疏或者简单的人行道，距离人行道的路沿一段距离，沿着这个向目标走(trajectory
following)。</p>
<blockquote>
<p>In an unpopulated and simple sidewalk environment, the default
behaviour is to follow a trajectory offset from the sidewalk curb
towards the goal.</p>
</blockquote>
<h1 id="system">SYSTEM</h1>
<p>系统的设计比较中规中矩，有新意的是，在航路点外，生成动态的子目标点(subgoals)。</p>
<figure>
<img src="/downloads/images/blog/Navigation_flow_diagram.jpg"
alt="示意图" />
<figcaption aria-hidden="true">示意图</figcaption>
</figure>
<ol type="1">
<li>首先利用 Google Maps’ API 去生成高层次的航路点 (waypoint)；</li>
<li>导航模块 (sidewalk navigation module) 根据附近是否有行人流 (nearby
pedestrian flow) 来采用 group surfing 或者 sidewalk following
方法。</li>
<li>无论哪种方法，对外输出是子目标点
(subgoals)，这是避障算法的输入，最后输出速度矢量 (velocity command)
指令，控制机器人的运动。</li>
<li>周期轮训，是否抵达当前目标点。</li>
</ol>
<!--If the robot has reached the waypoint within a predefined tolerance, the module checks if there are more waypoints.-->
<h1 id="methods">METHODS</h1>
<h2 id="group-surfing">Group Surfing</h2>
<p>核心思路和目标：模仿人类的自然行为，包括沿路行走 (walking in
lanes)，避障 (avoiding collisions with other pedestrians or
obstacles)，路口等待 (waiting at intersections to cross)，不走入交通中
(not walking into
traffic)。类似于仿生学，这次模仿的只不过是人类自己罢了。</p>
<ol type="1">
<li>Filter Candidate Groups</li>
</ol>
<ul>
<li>过滤那些远离航路点的行人组。 &gt; Filter out groups moving away from
the waypoint.</li>
<li>重点解释下，<span class="math inline">\(\[v_{G_{i}}\cdot
x_{I}\]\)</span>
的意义。在我看来，这个并没有物理意义，作者只不过想利用向量点乘的正负来判断行人是否在远离航路点。ps.
向量点乘的正负性取决于余弦角，只要两个向量的夹角小于90度(向目标点靠近)，就是正值。
&gt; If this value is non-positive, discard Gi as a subgoal
candidate.</li>
</ul>
<figure>
<img src="/downloads/images/blog/group_surfing_1.jpg" alt="示意图" />
<figcaption aria-hidden="true">示意图</figcaption>
</figure>
<ol start="2" type="1">
<li>Smart Group Selection</li>
</ol>
<ul>
<li>方法核心思路和目标：从筛选后的行人组中，选择平均速度小于且最接近于机器人最大速度的作为最优跟踪组
(the optimal group to
follow)。选择该组中距离机器人最近行人的当前位置作为子目标点
(subgoals)。</li>
</ul>
<blockquote>
<p>Once we have filtered out unsuitable groups, the algorithm selects
the optimal group to follow.</p>
</blockquote>
<ul>
<li>那么，路径规划和避障的问题就是在机器人当前位置和最优跟踪组的最近行人之间，规划出一条无碰撞的路径。</li>
</ul>
<blockquote>
<p>We intentionally select the closest person as a subgoal as attempting
to reach the average group position could lead to path planning through
pedestrians located between the average group position and the robot’s
current position.</p>
</blockquote>
<h2 id="curb-following">Curb Following</h2>
<p>方法核心思路和目标：使用 3D laser sensor 采集点云，然后利用 Random
Sample Consensus (RANSAC) 算法去识别马路沿。</p>
<blockquote>
<p>We make use of contextual knowledge; sidewalks are normally
surrounded by streets and buildings or empty space. Our robot first
acquires a surrounding point cloud using a 3D laser sensor and filters
out points that are at the same height as or above the plane defined by
the robot wheel contacts.</p>
</blockquote>
<h2 id="collision-avoidance">Collision Avoidance</h2>
<ol type="1">
<li>Human-Aware Collision Avoidance</li>
</ol>
<ul>
<li><p>在 group surfing 和 curb following
中，使用已有的学习方法，Socially-Aware Collision Avoidance with Deep
Reinforcement Learning (SA-CADRL) 来作为避障算法。 &gt; Socially-Aware
Collision Avoidance with Deep Reinforcement Learning (SA-CADRL), as the
collision avoidance component of our navigation stack. The collision
avoidance system navigates to a local subgoal generated by either the
group surfing or the curb following approach.</p></li>
<li><p>其中，引入社交奖励函数来鼓励社会行为。 The reinforcement training
process induces social awareness through social reward functions, which
give higher values to actions that follow social rules.</p></li>
</ul>
<ol start="2" type="1">
<li>Static Obstacle Avoidance:</li>
</ol>
<ul>
<li>把静态障碍物作为静态的行人，仍然使用SA-CADRL算法来处理。 &gt; We
also use SA-CADRL to avoid these static obstacles by adding “static
pedestrians” to the state vector.</li>
</ul>
<h1 id="simulation-demonstration-and-experiments-for">SIMULATION
DEMONSTRATION AND EXPERIMENTS For</h1>
<p>仿真环境的构建：使用ROS和Gazebo仿真套件。 &gt; We use the Robot
Operating System (ROS) and Gazebo simulator suite. To simulate
pedestrians, we use the Pedsim ROS library, which relies on the social
force model.</p>
<h2 id="simulation-demonstration">Simulation Demonstration</h2>
<p>在虚拟环境中，以 GPS
校准，重新搭建了周围的环境，复制了机器人模型。</p>
<!--
![video_1](https://www.youtube.com/watch?v=fy7fKOADg_A)
-->
<h2 id="simulation-experiments-and-evaluation">Simulation Experiments
and Evaluation</h2>
<p>目的：验证机器人可以沿着社会接受 (socially-acceptable)
的行为，最后抵达终点，即机器人的路径和行人的路径是相似的。</p>
<blockquote>
<p>In evaluating our navigation system, our main goal was to show that
the system successfully navigates the robot to its final goal through a
socially-acceptable path. That is, the path that our robot takes to the
goal is similar to what a pedestrian would take to the same goal.</p>
</blockquote>
<p>首先，在虚拟环境中，使用提出的算法抵达终点；然后，文中引入对比试验，使用最短路径的方法抵达终点。</p>
<blockquote>
<p>We tracked the path taken by the robot and the path taken by a
simulated pedestrian. We also tracked the shortest path that the robot
could take within the confines of the sidewalk.</p>
</blockquote>
<p>现在，有三组轨迹，行人的真实轨迹，现有算法轨迹，最短路径的轨迹。本文使用
an independent samples t-test
等数学方法，比较两个轨迹和人类实际轨迹的相似度，来证明现有的算法更加符合人类的行为。</p>
<p>MC：赞一下，比较的有理有据。</p>
<h1 id="hardware-demonstration">HARDWARE DEMONSTRATION</h1>
<h2 id="hardware-setup">Hardware Setup</h2>
<p>机器人的配置如下：</p>
<blockquote>
<p>We use the PowerBot from Omron Adept Mobile Robots as our
differential drive mobile base. The robot is equipped with multiple
sensors: a Velodyne VLP-16 3D LiDAR sensor; a SICK LMS-200 2D laser
sensor; a RealSense RGB-D sensor, and GPS and IMU sensors. Our
PowerBot’s max speed is 0.8m/s. This limits its capacity of following
faster pedestrian groups.</p>
</blockquote>
<h2 id="demonstration-and-discussion">Demonstration and Discussion</h2>
<!--
![video_2](https://www.youtube.com/watch?v=PHhtYIkdxiw)
-->
<ul>
<li>使用SPENCER算法来识别行人和行人流。</li>
<li>原打算使用lidar来识别行人的腿部，但是错误率太多，使用SPENCER提供的RGB-D-based的上身识别算法。</li>
<li>对机器人局限的探讨，以及算法的不足之处，从工程的角度讨论。</li>
</ul>
<h1 id="conclusions">CONCLUSIONS</h1>
<p>待提高的地方： - For the group surfing component, one main area for
improvement is in the selection process of groups to imitate. -
Criteria: group velocity; group trajectory; group size - External
observers of the group surfing behaviour will be interviewed to gauge if
the imitation behaviour is socially acceptable. - For collision
avoidance, a more specialized technique would allow for more efficient
navigation. - We hope to decouple static collision avoidance from
dynamic collision avoidance. - For curb following, our approach only
works for sidewalks that limit directly to the street, ignoring common
tree belt, median, hellstrip, etc. Our future plan is to introduce
detection and recognition of these non-transitable areas and incorporate
them in our navigation module.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Ubuntu/install-sogou-ubuntu-18/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Ubuntu/install-sogou-ubuntu-18/" itemprop="url">How to install Sogou Pinyin in non-Chinese versions of Ubuntu 18.04 / 如何在非中文版的Ubuntu 18.04安搜狗拼音输入法</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-09T23:38:08+08:00">
                2019-08-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ubuntu/" itemprop="url" rel="index">
                    <span itemprop="name">Ubuntu</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  5.2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  19 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[toc]</p>
<h1 id="background">Background</h1>
<p>Recently, I updated my Ubuntu version from 16.04 to 18.04, and I'd
like to share my experience on how to build a work or study environment
for yourself.</p>
<p>This blog mainly introduces how to install Sogou pinyin in
non-Chinese versions of Ubuntu.</p>
<p><img src="/downloads/images/Chinese_characters.png" /></p>
<h1 id="how-to-install-sogou-pinyin">How to install Sogou pinyin</h1>
<p><strong>Firstly</strong>, you should install fcitx, a lightweight
input method framework aimed at providing environment independent
language support for Linux. <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install fcitx-bin</span><br><span class="line">sudo apt install fcitx-table</span><br></pre></td></tr></table></figure></p>
<p>You can also uninstall ibus, an input-method framework for Unix-like
computer operating-systems. <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt purge ibus</span><br><span class="line">sudo apt autoremove</span><br></pre></td></tr></table></figure> <!--
[Another method to install pinyin](https://www.pinyinjoe.com/linux/ubuntu-18-gnome-chinese-setup.htm)
--></p>
<p>BTW, you can read <a
target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/260601/understanding-setting-up-different-input-methods">Understanding
&amp; setting up different input methods</a> if you are interested in
the difference between fcitx and ibus.</p>
<p>Recall that: &gt; remove - remove is identical to install except that
packages are removed instead of installed. Note that removing a package
leaves its configuration files on the system. If a plus sign is appended
to the package name (with no intervening space), the identified package
will be installed instead of removed.</p>
<blockquote>
<p>purge - purge is identical to remove except that packages are removed
and purged (any configuration files are deleted too). This of course,
does not apply to packages that hold configuration files inside the
user's home folder.</p>
</blockquote>
<blockquote>
<p>what sudo apt autoremove actually does? Whenever you install an
application (using apt-get), the system will also install the software
that this application depends on. It is common in Ubuntu/Linux that
applications share the same libraries. When you remove the appplication
the dependency will stay on your system. So apt-get autoremove will
remove those dependencies that were installed with applications and that
are no longer used by anything else on the system.</p>
</blockquote>
<p>You can subsequently open <strong>Language Suppor</strong> to
double-check that <strong>Key board input method system</strong> has
change from ibus to fcitx, and you can change it manuallyif not. You can
ignore it and click the "Remind Me later" button if you are reminded
that "The language support is not installed completely".</p>
<p><img src="/downloads/images/language_support_linux.png" /></p>
<p>Importantly, you must <font color="red">
<strong>reboot</strong></font> your system after that.</p>
<p>After that, you can download the deb package from the official
website, <a target="_blank" rel="noopener" href="https://pinyin.sogou.com/linux/?r=pinyin">搜狗输入法
for Linux</a>, or here (also official links) directly.</p>
<ul>
<li><a
target="_blank" rel="noopener" href="http://cdn2.ime.sogou.com/dl/index/1524572032/sogoupinyin_2.2.0.0108_i386.deb?st=g_AXK19LEkZ7zsl2oOV3hQ&amp;e=1582358642&amp;fn=sogoupinyin_2.2.0.0108_i386.deb">32bit
- sogoupinyin_2.2.0.0108_i386.deb</a></li>
<li><a
target="_blank" rel="noopener" href="http://cdn2.ime.sogou.com/dl/index/1571302197/sogoupinyin_2.3.1.0112_amd64.deb?st=EIacqcesOuHgsaQY0n9bjQ&amp;e=1582358642&amp;fn=sogoupinyin_2.3.1.0112_amd64.deb">64bit
- sogoupinyin_2.3.1.0112_amd64.deb</a></li>
</ul>
<p>You can install it in <strong>Ubuntu Software</strong> by
double-clicking, shown as below.</p>
<p><img src="/downloads/images/sogou_deb_installed.png" /></p>
<p>Importantly, you must <font color="red">
<strong>reboot</strong></font> your system again.</p>
<p>You can open fcitx config tool after rebooting, as you can see below.
You should also see Sogou Pinyin in the lists. Unfortunately, if not,
you can add it by clicking the + mark, choose Sogou Pinyin and reboot
the system again.</p>
<p><img src="/downloads/images/fcitx_config.png" /></p>
<p>Now, you should input Chinese characters at the same time. In other
words, you can use it as convenient in Windows system, like the
Shuangpin input method. Yeah, you can learn more detail about Shuangpin
in <a
target="_blank" rel="noopener" href="https://www.yanlongwang.net/monthly-skills/monthlyskills-shuangpin/">双拼学习</a>.</p>
<p>Just enjoy Ubuntu 18.04.</p>
<h1 id="references">References</h1>
<p><a
target="_blank" rel="noopener" href="https://www.pinyinjoe.com/linux/ubuntu-18-gnome-chinese-setup.htm">Ubuntu
Chinese Setup</a><br />
<a target="_blank" rel="noopener" href="https://xunyunliu.github.io/post/install_sogou/">How to install
Sogou input on Ubuntu 16.04</a></p>
<!--
[Reference link](https://blog.csdn.net/f_c_g_/article/details/81265589)
-->

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Ubuntu/install-rtags-vim-ubuntu-18/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Ubuntu/install-rtags-vim-ubuntu-18/" itemprop="url">How to install rtags for vim in Ubuntu 18.04</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-09T23:36:25+08:00">
                2019-08-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Ubuntu/" itemprop="url" rel="index">
                    <span itemprop="name">Ubuntu</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  4.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  15 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1
id="how-to-install-rtags-for-vim-in-ubuntu-18.04-如何在ubuntu-18.04-vim上安装rtags插件">How
to install rtags for vim in Ubuntu 18.04 / 如何在Ubuntu 18.04
vim上安装rtags插件</h1>
<p>This blog introduces how to install the best cross-reference tool, <a
target="_blank" rel="noopener" href="https://github.com/Andersbakken/rtags">rtags</a>, that I have ever
used in vim, step by step. I hope it helps.</p>
<h1 id="whats-rtags">What's rtags</h1>
<p><a target="_blank" rel="noopener" href="https://github.com/Andersbakken/rtags">Rtags</a> is a
client/server application that indexes C/C++ code and keeps a persistent
file-based database of references, declarations, definitions,
symbolnames etc. It allows you to find symbols by name (including nested
class and namespace scope). Most importantly, it gives you proper
follow-symbol and find-references support.</p>
<p>Rtags comes with emacs support but there are projects supporting
other IDEs: <a target="_blank" rel="noopener" href="https://github.com/lyuts/vim-rtags">vim-rtags</a>
and <a
target="_blank" rel="noopener" href="https://github.com/rampage644/sublime-rtags">sublime-rtags</a>.</p>
<p>In this blog, We would install vim-rtags later.</p>
<h1 id="how-to-install-rtags">How to install rtags</h1>
<p><strong>First</strong>, you need clang, which is a compiler front end
for the C, C++, Objective-C and so on. It uses the LLVM compiler
infrastructure as its back end and has been part of the LLVM release
cycle since LLVM 2.6. <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Commands in Ubuntu terminal</span><br><span class="line">// sudo apt install clang-5.0 lld-5.0  </span><br><span class="line">// sudo apt install libclang-5.0-dev  </span><br><span class="line">sudo apt install llvm-7-dev libclang-7-dev</span><br></pre></td></tr></table></figure></p>
<!--And then add the bin binary to your path.-->
<p><strong>Secondly</strong>, make and install <a
target="_blank" rel="noopener" href="https://github.com/Andersbakken/rtags">rtags</a> as follows.
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// Commands in Ubuntu terminal</span><br><span class="line">git clone --recursive https://github.com/Andersbakken/rtags.git</span><br><span class="line">cd rtags &lt;-- in rtags directory</span><br><span class="line">cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=1 .</span><br><span class="line">make</span><br><span class="line">sudo make install </span><br></pre></td></tr></table></figure></p>
<p><strong>Thirdly</strong>, you should install vim-rtags in <a
target="_blank" rel="noopener" href="https://github.com/VundleVim/Vundle.vim">Vundle.vim</a>. I think
it's the easiest way to install rtags plugin in vim. You need to add the
following line to .vimrc if you have installed Vundle, and then run
:PluginInstall in vim. <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Plugin &#x27;lyuts/vim-rtags&#x27; &lt;-- install in vim</span><br></pre></td></tr></table></figure></p>
<p><strong>Finally</strong>, the last but essential step is that forcing
cmake to output compile_commands.json (like <a
target="_blank" rel="noopener" href="https://cmake.org/cmake/help/v3.5/variable/CMAKE_EXPORT_COMPILE_COMMANDS.html">DCMAKE_EXPORT_COMPILE_COMMANDS</a>)
and link it with rtags according to your project. <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=1 [***] your_src_path</span><br><span class="line">rc -J your_build_folder_path  &lt;-- use compile_commands.json in your build folder</span><br><span class="line">rdm &amp; &lt;-- launch the rtags server</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/website/statistics-visitor-traffic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/website/statistics-visitor-traffic/" itemprop="url">通过 clustermaps 统计 Hexo 网站的访问地区和 IP</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-08T10:06:46+08:00">
                2019-08-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/website/" itemprop="url" rel="index">
                    <span itemprop="name">website</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  4.8k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  17 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[toc]</p>
<h1 id="前言">前言</h1>
<p>在 <a href="http://www.waylon.one/website/Website-FAQ/">Website
FAQ</a>，实现了使用"卜算子"来统计网站访问人数，但是"卜算子"仅可以提供访问人数的统计，进一步的信息却无法提供。那么，如果想知道过往访客来自哪些国家和地区，显示网站访问实时动态的信息，应该怎么做呢？</p>
<p>多平台维护不易，本博客实时更新于 <a
href="http://www.waylon.one/website/statistics-visitor-traffic/">个人网站</a>，请移步阅读最新内容。</p>
<h1 id="clustermaps-是什么">clustermaps 是什么</h1>
<p><a target="_blank" rel="noopener" href="https://clustrmaps.com">clustrmaps.com</a>
是美国的一家数据网站，能够汇总公共记录来分析美国城市的社会人口和商业环境。</p>
<blockquote>
<p>Add the ClustrMaps hit tracker to your site or blog and see a
real-time map of your visitors from around the world! Proudly show and
grow your hidden community of interest.</p>
</blockquote>
<p>网址提供了生成访问者地址分布图的代码，可以嵌入到网站或博客中，来显示来自世界各地访问者的实时地图，有助于发展您隐藏的兴趣社区。最重要的是，这个功能是<strong>免费</strong>的，能够满足个人网站的需求，如下图所示。</p>
<p><img src="/downloads/images/blog/visitor_traffic_demo.png" /></p>
<h1 id="配置-clustrmaps">配置 clustrmaps</h1>
<ul>
<li>网站注册后，访问 <a target="_blank" rel="noopener" href="https://clustrmaps.com/add">Enter your
website address</a> 添加自己的网站地址，选择免费的服务。</li>
</ul>
<p><img src="/downloads/images/blog/input_url.png" /></p>
<p><img src="/downloads/images/blog/choose_plan.png" /></p>
<ul>
<li>选择自己喜欢的插件格式，现在 Hexo 的 Next
两种主题都是支持的，但是自己比较喜欢 Map widget 的主题。</li>
</ul>
<p><img src="/downloads/images/blog/map_widget.png" /></p>
<ul>
<li>点击选择后，拷贝网站出现的脚本
javascript代码，粘贴到Next主题下某个位置。博主测试过如下两个位置，挑选一个配置即可以。推荐位置二，自定义程度高。
<ul>
<li><p>位置一：将代码插入到 themes\_partials.swig 的最后。
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Insert clustrmaps.com --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">id</span>=<span class="string">&#x27;clustrmaps&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;//cdn.clustrmaps.com/map_v2.js?XXX&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% include &#x27;../_custom/header.swig&#x27; %&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>位置二：将代码插入到 \_macro.swig 文件的</p>
<div class="”sidebar-inner”">

</div>
<p>图层。 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;sidebar&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sidebar-inner&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;%- set display_toc = page.toc.enable and display_toc %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Begin Insert clustrmaps.com --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">id</span>=<span class="string">&quot;clustrmaps&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//clustrmaps.com/map_v2.js?d=iBmc9XXXXXX=a&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- End Insert clustrmaps.com --&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;%- if display_toc %&#125;</span><br><span class="line">      &#123;%- set toc = toc(page.content, &#123; class: &quot;nav&quot;, list_number: page.toc.number, max_depth: page.toc.max_depth &#125;) %&#125;</span><br></pre></td></tr></table></figure></p></li>
</ul></li>
<li>重新部署网站，就可以在首页看到实时访客来源图，如我的网站首页所示。另外，点击地图，可以看到更详细的信息，包括访客的地图、浏览设备以及
IP。</li>
</ul>
<p><img src="/downloads/images/blog/detaile_IP.png" /></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Reading/A-Gentleman-in-Moscow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Reading/A-Gentleman-in-Moscow/" itemprop="url">Impression of “A Gentleman in Moscow”</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-02T07:23:53+08:00">
                2019-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Reading/" itemprop="url" rel="index">
                    <span itemprop="name">Reading</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  2.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  8 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>《莫斯科绅士》讲述的是在沙皇被推翻之后，一个沙皇伯爵回到俄国，被软禁在莫斯科大都会酒店度过一生的故事。作者通过伯爵的回忆，简单描述了沙皇时期贵族的一些生活场景，又以伯爵的视角，通过描绘大都会酒店的变化，侧面反映了俄国的政治、社会变化。</p>
<p><img
src="/downloads/images/blog/A-Gentleman-in-Moscow-Cover.jpg" /></p>
<p>读完故事简介时，我以为这本书会很无趣，但是最后发现我自己陷入到里故事中去，一个月的时间就读完了此书。</p>
<p>我看书的时候一般不关注作者，但是在看这本书的过程中，我一直在不断地推测作者跟伯爵的关系。我想这会不会有点类似于传记的小说，作者就是伯爵本人或者他听过伯爵讲这些故事？毕竟他在对贵族场景和绅士遵守的规则时那么熟悉，毕竟他对伯爵心理活动的描述那么精确，我笔记中收藏了好几处他对伯爵心理活动的描写。退一步讲，如果他不是伯爵本人，那么至少他是一个地地道道的俄国人，一生中经历过沙皇倒台、十月革命、苏维埃政权建立以及斯大林时代结束。然而最终阅读完毕去查阅作者时，我才知到作者是一个美国人，不禁要感叹一声，此人何以如此厉害，居然可以如此了解那个时代的苏联，了解俄国人的特点和俄国的特色。</p>
<p>沙皇被推翻后，伯爵旧时的象征尊贵的身份此时却是一种罪。他被软禁在已经居住了许多年的大都会酒店中，只不过之前，他住的是能看到红场和大剧院的视野最好的大套房，如今却被安置到6楼的一个小房间。因为新房间过矮，身材高大的伯爵无法直起身子，而且因为房间变小，他的很多东西都只能舍弃。当时他从老家庄园搬到大都会酒店时就迫不得已丢弃了许多物品，此次剩下的便更少了。多么像人生的一辈子，就是在不断地舍弃，不断地舍弃。</p>
<p>伯爵被软禁之后，一直在竭力掌控自己的命运和生活，而不是被命运所掌控。一个人的命运是无法脱离社会的大环境而独立地发展的，就像伯爵自己，像伯爵在酒店中认识的第一个朋友小尼娜，像伯爵的朋友米什尔，没有一个人能够完全挣脱那个社会环境带给他们的命运。然而作为一个人仍然可以努力地掌控自己的生活，决定自己如何地生活。虽然伯爵不能摆脱被软禁在酒店半辈子的命运，但是他却可以始终选择做一名绅士，保持有规律的生活。他每天早晨7点起床，吃丰盛的有水果、茶和饼干的早餐，每天做几十个蹲起和伸展，每周二去理发，努力地不让生活变得一片荒芜。</p>
<p>人终究是群居动物，一个人总要与外界的生活有所羁绊，才能有勇气和动力坚持生活下去。伯爵被软禁之后，认识了第一个朋友小尼娜，我觉得小尼娜对于伯爵而言，是刚被软禁后的灰色生活中的一抹亮色，正如她爱穿的黄色一样。小尼娜有酒店的万能钥匙，带着伯爵访遍了酒店的各个角落，伯爵因此有机会再次进入他之前的大套间，透过那个视野最好的窗户看红场和大剧院，也有机会参观酒店的储物间。后来伯爵又与演员安娜有了一夜情缘，这一次他感觉受到了冷落。因为这次的冷落，伯爵突然觉得他已经被时代抛弃了，产生了轻生的想法，可是当他遗嘱等一切后事安排好，午夜12点站在酒店楼顶马上要纵身一跃的时候，被他之前认识的看房子的老人叫住了，热情地非得让他品尝蜂蜜，他在蜂蜜里尝到了他家乡苹果花的味道，然后也打消了轻生的念头。而本以为只是一夜情缘的伯爵与安娜，后来因为世事变幻，又保持了神秘亲密关系。随着时代的发展，他在酒店里成为了领班，认识了很多朋友，与饭店主厨和主管组成了“三巨头”。又过去了很久，长大结婚后的尼娜与他的丈夫因为被流放到边境，把小索菲亚托付给老伯爵照看一个月，但是尼娜再也没有来领小索菲亚，因此老伯爵便承担起抚养小索菲亚的责任，他又有了一个更深的羁绊。</p>
<p>人不愿意为自己去冒险，却会为了爱的人全心谋划甘冒巨大风险。我看书前一直以为伯爵会伺机逃离大都会，可我发现他在里面呆了大半辈子都没想过要逃离，可是最终为了索菲亚能有更好的未来，可以获得更自由的生活，他制定了周密的计划将索菲亚送到了新的世界，自己也离开了大都会。</p>
<p>我想一个人对自己的国家和故土会有深深的眷恋，尤其是老去以后。逃离酒店后，我本以为他会去与小索菲亚汇合，没想到他回到了自己的故乡，最后从结局可以看出来他与安娜在故乡汇合了，不知道他们是否会遭到搜查，是否可以一直安稳幸福，不过我相信至少他们会努力把每一天过的都不荒芜。</p>
<p>我不清楚这本书本意想要带给读者什么，只聊聊自己读完之后的一些感想。看完之后我会觉得人一生中一些大的运数可能真的是由天或环境决定的，但是也不要因为那样，就任由命运摆布，完全放弃主动权。既然有很多事情不是自己能够决定的，那就做好自己可以决定的事情，不是非要做出什么伟大的事情，但是至少可以掌控自己的每一天的细小生活，把每一天过的不荒芜。此外我觉得虽然人生有那么多苦，但是在苦与苦的缝隙之间，还是隐藏了一些糖果和温暖，找到这些糖果和温暖，带着它们上路，我们就可以坚持走过下一段苦。</p>
<p>转载自 《余苗》</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/monthly-skills/monthlyskills-shuangpin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/monthly-skills/monthlyskills-shuangpin/" itemprop="url">双拼学习</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-19T14:51:14+08:00">
                2019-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/monthly-skills/" itemprop="url" rel="index">
                    <span itemprop="name">monthly skills</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  3.7k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  14 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>流水不逝，维护不易，最新文章更新于<a
href="http://www.waylon.one/monthly-skills/monthlyskills-shuangpin/">个人网站</a>，欢迎访问！</p>
<blockquote>
<p>You cannot teach an old dog new tricks.</p>
</blockquote>
<p>在新的一年，保持学习的状态，每个月学习一项新技能，持续输入。</p>
<p><strong>2019年2月，新的技能选择学习小众的「双拼」输入法</strong>。</p>
<h1 id="什么是双拼">什么是双拼</h1>
<blockquote>
<p>双拼是一种建立在拼音输入法基础上的输入方法，是汉语拼音输入法的一种编码方案，可视为全拼的一种改进。它通过将汉语拼音中每个含多个字母的声母或韵母各自映射到某个按键上，使得每个音都可以用两个按键打出，一个代表声母的字母，一个代表韵母的字母，极大地提高了拼音输入法的输入速度。</p>
</blockquote>
<p>目前<font color="green"> Windows、Android、macOS、iOS 平台
</font>上都有输入法支持双拼，包括<strong>iOS系统自带输入法</strong>、
QQ输入法、百度输入法、搜狗输入法、谷歌输入法和微软必应输入法等。</p>
<figure>
<img src="/downloads/images/blog/xnheulpb.png" alt="小鹤双拼" />
<figcaption aria-hidden="true">小鹤双拼</figcaption>
</figure>
<h1 id="放弃全拼学习双拼的理由">放弃全拼，学习双拼的理由</h1>
<p>目前，市面上最为主流的拼音输入法方案是「全拼」，它确实有着简单、易上手化、兼容性高的优势。事实上，「全拼」有着一个非常明显的缺点：多击键次数，即在键盘打字，大部分文字需要点击多个按键。也许你会反驳称「全拼」有智能联想、模糊音等快捷输入，但是「双拼」也有着类似的快捷输入。
对比「全拼」，「双拼」主要有以下优势：</p>
<h2 id="双拼按键效率高">「双拼」按键效率高</h2>
<p>汉语拼音多由「声母」+「韵母」组成，除了「啊 - a」「哦 - o」「额 -
e」这类极少的单韵母，每个拼音的全拼输入至少需要两次，而对于所有拼音，双拼输入只需要两次。这样看来，双拼的按键效率远远高于全拼。</p>
<figure>
<img src="/downloads/images/blog/ugmuyymu.png" alt="声母和韵母" />
<figcaption aria-hidden="true">声母和韵母</figcaption>
</figure>
<p>以“双拼”为例，全拼方案需要输入「shuangpin」；若用小鹤双拼方案(上图)，只需要输入「ulpb」：
- 点击按键「u」「l」,就能输入sh、uang. -
点击按键「p」「b」,就能输入p、in.</p>
<p>你可以发现，即使是2个字，双拼比全拼减少了5次按键。这对文字工作者而言，长篇的文章写下来，可节省了许多功夫啊。</p>
<h2 id="双拼符合人的拼音思维">「双拼」符合人的拼音思维</h2>
<p>虽然目前没有研究数据支持，但是可以肯定「双拼」其实很符合人的拼音思维。
还是以“双拼”为例，你第一时间想到的一定是「sh、uang、p、in」这样的声母和韵母搭配，而不是散落、毫无逻辑的「s、h、u、a、n、g、p、i」。</p>
<h2 id="酷酷的感觉">酷酷的感觉</h2>
<p>双拼的优势除了
“击键次数少、更符合拼音思维、文字输入效率高”外，「双拼」方案对拼音的打乱，会给外行人神秘的感觉，甚至可以用于简单加密。</p>
<!--试想，许多年以后，来到一个陌生的电脑前，看见他们激烈地在键盘前忙碌地来回敲打，不时还对你冲莞尔：「我打字快不？」，这时你只需报之神秘的一笑，让笑意消散在风中。-->
<p>总而言之，作为更出色的拼音输入方案，刚接触「双拼」时，我们难免需要花费一定的时间去学习、去了解，但绝对不能站在接触「全拼」多年的角度去全盘否定它。</p>
<h1 id="如何学习双拼">如何学习双拼</h1>
<p>目前，「双拼」输入法有着多种方案，比如常见的<strong>小鹤双拼、搜狗双拼、微软拼音2003、智能ABC</strong>等等，甚至还允许用户自定义方案。</p>
<h2 id="哪个双拼方案更好用">哪个双拼方案更好用</h2>
<p>现在的双拼方案层出不穷，常见的双拼方案有自然码方案以及相近的微软和搜狗，以及自然码方案基础上改动键位的小鹤。其中，微软双拼的方案非常普及，小鹤双拼则主打畅快高效，强调节奏感，尤其是加了鹤形之后，基本可以消除重码，实现「非智能输入」。各方案之间并无明显的优劣之分，需要根据不同人的需求，根据自己的喜好自由选择。</p>
<p>我个人<font color="red">
<strong>推荐「小鹤双拼」</strong></font>，相比其他方案，小鹤的键位布置比较合理，左右手能够比较均衡的负担输入任务，边角位置的减少使用也能让小拇指轻松一点。而关键是，小鹤双拼中鹤形的加入能极大地消除重码，轻松实现候选字直接上屏，大大的加快输入。当然，如果懒得记鹤形，仅用双拼也已经比全拼方便很多了，毕竟现在都是词组整句的智能输入了。</p>
<p>目前，<font color="red"><strong>各个主流输入法均支持「小鹤双拼」方案</strong></font>，甚至ios自带输入法也提供支持。所以，「小鹤双拼」方案可以满足跨平台、跨输入法的需求。</p>
<h2 id="小鹤双拼学习">小鹤双拼学习</h2>
<p>目前<font color="green"> Windows、Android、macOS、iOS 平台
</font>上都有输入法支持双拼，建议学习双拼时采用“赶鸭子上架”式学习法： 1.
读规则，仔细读两遍； - 附上小鹤双拼官网学习教程：<a
target="_blank" rel="noopener" href="https://www.flypy.com/pin.html">让您的输入更舒适</a> 。 2.
按照规则试着打几句话几个字； 3. 背诵口诀；<br />
<img src="/downloads/images/blog/kzjt.png" alt="小鹤双拼口诀" /> 4.
把需要记忆和背诵的键位打印出来，放显示器旁边，然后关掉输入法的双拼同时使用全拼，开心去聊吧；
-
生命短暂，时间宝贵，强烈建议直接上手，不要把时间浪费在「双拼」练字上。</p>
<p>为了快速学习和方便记忆，附上小鹤双拼键盘映射和口诀表，可以直接打印。</p>
<h2
id="小鹤双拼键盘映射和口诀图片可下载打印">小鹤双拼键盘映射和口诀（图片可下载打印）</h2>
<figure>
<img src="/downloads/images/blog/xnheulpbkzjt.jpg"
alt="小鹤双拼键盘映射和口诀" />
<figcaption aria-hidden="true">小鹤双拼键盘映射和口诀</figcaption>
</figure>
<h2 id="友情链接">友情链接</h2>
<p><a
target="_blank" rel="noopener" href="https://www.zybuluo.com/jianshu/note/370049">作业部落-双拼输入法学习经验</a></p>
<!--
- &emsp;Qiu Wei Ruan T_ue_ve Yun U_shu I_chi &emsp;Song _iong Dai Fen Geng Hang J_an  
&emsp;秋&emsp;闱&emsp;&emsp;软&emsp;&emsp;月&emsp;&emsp;云&emsp;&emsp;梳&emsp;&emsp;翅&emsp;&emsp;松&emsp;&emsp;拥&emsp;&emsp;黛&emsp;粉&emsp;更&emsp;&emsp;航&emsp;安  
 &emsp;uai _ing Liang _uang Zou Xia _ua  &emsp;Pie Cao V_zhui _v Bin Niao Mian  
 &emsp;快&emsp;莺&emsp;&emsp;两&emsp;&emsp;望&emsp;奏&emsp;夏&emsp;蛙&emsp;&emsp;撇&emsp;草&emsp;&emsp;追&emsp;鱼&emsp;滨&emsp;鸟&emsp;眠)
-->
<hr />
<ul>
<li>2019年02月19日创建，陆续增添补充链接；</li>
<li>2019年02月24日文章基本成型，陆续发表到各平台；</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/10/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">94</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">38</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/waylondotone" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:me@waylon.one" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nobody</span>

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  














  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
