<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="deskxpDjduMieHbS">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.waylon.one","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":5,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="sharing daily progress and life">
<meta property="og:type" content="website">
<meta property="og:title" content="One&#39;s Way">
<meta property="og:url" content="http://www.waylon.one/page/7/index.html">
<meta property="og:site_name" content="One&#39;s Way">
<meta property="og:description" content="sharing daily progress and life">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Autonomous Driving &amp; Robotic">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://www.waylon.one/page/7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/7/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>One's Way</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">One's Way</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">sharing daily progress and life</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">98</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/waylondotone" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;waylondotone" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/website/site-indexed/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/website/site-indexed/" class="post-title-link" itemprop="url">网站被谷歌和百度收录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-05-31 15:44:32" itemprop="dateCreated datePublished" datetime="2020-05-31T15:44:32+08:00">2020-05-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/website/" itemprop="url" rel="index"><span itemprop="name">website</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.2k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>4 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<p>在谷歌或者百度的搜索链接中，使用以下格式可以直接搜索自己的域名。如果能搜索到就说明已经被收录，反之则没有。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// site: your_wabsite</span><br><span class="line">site: http://www.waylon.one</span><br></pre></td></tr></tbody></table></figure>
<p>如果自己的域名没有被收录，那么可以通过下面的方式，让自己的网站内容被 baidu 和 google 收录，增加网站 SEO。</p>
<h1>Google</h1>
<h2 id="注册-webmasters">注册 webmasters</h2>
<p><a target="_blank" rel="noopener" href="http://www.google.cn/webmasters/">webmasters 入口</a></p>
<h2 id="添加网站资源">添加网站资源</h2>
<p>根据 <a target="_blank" rel="noopener" href="https://support.google.com/webmasters/answer/34592">添加网站资源</a>，现在支持网址前缀资源和网域资源。</p>
<ul>
<li>网址前缀资源：仅包含具有指定前缀（包括协议 http/https）的网址。</li>
<li>网域资源：包括所有子网域（m、www 等）和多种协议（http、https、ftp）的网域级资源。</li>
<li>如果您希望资源匹配任何协议或子网域（http/https/www./m. 等），请考虑改为添加网域资源，但 <strong>网域资源仅支持 DNS 记录验证</strong>。</li>
</ul>
<ul>
<li>选择网域资源后，弹框要求对 DNS 支持验证。</li>
</ul>
<p><img data-src="http://www.waylon.one/downloads/images/blog/google_DNS_detail.jpg" alt=""></p>
<ul>
<li>登录到域名提供商网站（我是在 Doynadot 解析域名）。</li>
<li>将验证的 TXT 记录复制到验证网站的 DNS 配置中。</li>
<li>注意：DNS 更改可能要过一段时间才会生效。如果 Search Console 未能立即发现相应记录，请等待 1 天，然后重新尝试验证。</li>
</ul>
<p><img data-src="http://www.waylon.one/downloads/images/blog/google_DNS_verification.jpg" alt=""></p>
<h2 id="添加站点地图">添加站点地图</h2>
<p>站点地图（sitemap），是一个页面，上面放置了网站上需要搜索引擎抓取的所有页面的链接。站点地图可以告诉搜索引擎网站上有哪些可供抓取的网页，以便搜索引擎可以更加智能地抓取网站。</p>
<h3 id="配置站点地图">配置站点地图</h3>
<ul>
<li>安装百度和 Google 的站点地图生成插件。</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>修改配置文件</li>
</ul>
<p>修改 Hexo 站点配置文件 _config.yml，添加以下内容：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 自动生成 sitemap</span><br><span class="line">sitemap:</span><br><span class="line">  path: sitemap.xml</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>执行网站生成和部署命令，进入 \public 目录，检查里面是否有 sitemap.xml 文件，这就是生成的站点地图，里面包含了网站上所有页面的链接，google 搜索引擎通过这个文件来抓取网站页面。</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g &amp;&amp; hexo d</span><br></pre></td></tr></tbody></table></figure>
<h3 id="提交站点地图">提交站点地图</h3>
<p>如下图所示，在<strong>添加新的站点地图</strong>中添加自己的站点地图并提交，那么自己的网站内容就会被 google 周期性收录。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/google_sitemap.jpg" alt=""></p>
<h1>Baidu</h1>
<h2 id="网站提交">网站提交</h2>
<ul>
<li>提交网址给百度的入口 <a target="_blank" rel="noopener" href="https://ziyuan.baidu.com/site/siteadd#/">点这里</a>。</li>
<li>网站提交过后，在第三步有一个验证网站步骤，证明您是该域名的拥有者。
<ul>
<li>我选择的是文件验证，需要将验证文件放置于您所配置域名的根目录下，对应于 Hexo 的 hexo_file_path\public 的根目录下。</li>
<li>网站发布成功后，返回站点验证。</li>
<li>为保持验证通过的状态，成功验证后请不要删除 HTML 文件。</li>
</ul>
</li>
</ul>
<h2 id="资源提交">资源提交</h2>
<ul>
<li>普通收录工具可以向百度搜索主动推送资源，缩短爬虫发现网站链接的时间。入口 <a target="_blank" rel="noopener" href="https://ziyuan.baidu.com/linksubmit/index?site">点这里</a>。</li>
<li>在资源提交中，我选择了<strong>主动推送</strong> (实时) 的方式，有以下优势。
<ul>
<li>及时发现：可以缩短百度爬虫发现您站点新链接的时间，使新发布的页面可以在第一时间被百度收录。</li>
<li>保护原创：对于网站的最新原创内容，使用主动推送功能可以快速通知到百度，使内容可以在转发之前被百度发现。</li>
</ul>
</li>
</ul>
<h2 id="推送配置">推送配置</h2>
<p>参考 <a target="_blank" rel="noopener" href="https://lanlan2017.github.io/blog/7ac3f85/">hexo 百度主动推送</a> 实现，实现基于插件的自动推送。</p>
<ol>
<li>安装 hexo-baidu-url-submit 插件</li>
</ol>
<p>在 Hexo 站点根目录下，输入下面命令安装插件。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-baidu-url-submit --save</span><br></pre></td></tr></tbody></table></figure>
<ol start="2">
<li>在站点配置文件 (_config.yml) 中添加 baidu-url-submit 的配置项</li>
</ol>
<p>其中，进入主动推送工具后，会看到接口调用地址的 token，token 是由 16 个英文数字组合的字符串。</p>
<p><img data-src="https://zhanzhang.bj.bcebos.com/files/000471450342318.jpg" alt=""></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 设置百度主动推送</span><br><span class="line">baidu_url_submit:</span><br><span class="line">  count: 200  # 比如200，代表提交最新的200个链接</span><br><span class="line">  host: your_website # 在百度站长平台中注册的域名</span><br><span class="line">  token: your_token # 请注意这是您的秘钥， 所以请不要把博客源代码发布在公众仓库里!</span><br><span class="line">  path: baidu_urls.txt # 文本文档的地址，文件默认</span><br></pre></td></tr></tbody></table></figure>
<ol start="3">
<li>加入新的 deploy 配置项</li>
</ol>
<p>在站点配置文件中找到 deploy 项，添加新的推送项，如下所示：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- type: git</span><br><span class="line">  repo: XXX</span><br><span class="line">  branch: master</span><br><span class="line">- type: baidu_url_submitter</span><br></pre></td></tr></tbody></table></figure>
<ol start="4">
<li>验证配置是否成功</li>
</ol>
<p>重新部署网站，查看 git-bash 中的信息，类似于下面的信息。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INFO  Deploying: baidu_url_submitter</span><br><span class="line">INFO  Submitting urls</span><br><span class="line">http://www.waylon.one/blog/uncategorized/dynadot-buy-domain/</span><br><span class="line">http://www.waylon.one/blog/uncategorized/hello-world/</span><br><span class="line">{"remain":2998,"success":2}</span><br><span class="line">INFO  Deploy done: baidu_url_submitter</span><br></pre></td></tr></tbody></table></figure>
<p>对比接口的返回信息，推送成功。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{"remain":2998,"success":2}</span><br></pre></td></tr></tbody></table></figure>
<p><img data-src="http://www.waylon.one/downloads/images/blog/baidu_push_feedback.jpg" alt=""></p>
<h1>References</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://lanlan2017.github.io/blog/7ac3f85/">hexo 百度主动推送</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/25145964abf3">hexo 博客被 Google 和百度收录</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/website/dynadot-buy-domain/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/website/dynadot-buy-domain/" class="post-title-link" itemprop="url">从域名注册商 Dynadot 购买域名及配置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-05-30 17:19:02" itemprop="dateCreated datePublished" datetime="2020-05-30T17:19:02+08:00">2020-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/website/" itemprop="url" rel="index"><span itemprop="name">website</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>903</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>3 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<p>域名是进入一个网站的唯一途径，也是网站的唯一 ID。一旦我们决定建立一个网站，那么域名是不可或缺的。</p>
<h1>域名注册商是什么</h1>
<p>域名注册商，就是提供域名注册服务的商家，主要包括两大类，一类是自己取得了 ICANN 注册资质的商家，这类商家一般都是很大牌、靠谱的商家，因为取得 ICANN 认证的门槛比较高；还有一类是经销商，也就是 Reseller，他们自己没有 ICANN 资质，但是通过代理销售别的有资质的商家，也提供域名注册服务。</p>
<p>本文介绍的域名注册商 – <a target="_blank" rel="noopener" href="https://www.dynadot.com/">Dynadot</a>， 是成立于 2002 年的老牌的域名注册商，总部位于加利福尼亚州圣马特奥，ICANN 授权的域名注册商和网站托管公司。</p>
<p>Dynadot 目前已经有中文网站，支持<strong>支付宝付款</strong>，并且有在线客服可以提供中文支持。</p>
<h1>为什么选择 Dynadot ?</h1>
<ul>
<li>
<p>Dynadot 是获得 ICANN 授权的老牌域名注册商，是一家无负债的私营公司，确保了公司的稳定运营。</p>
</li>
<li>
<p>相比 GoDaddy 付费的隐私保护，Dynadot 提供<strong>免费的隐私保护</strong>.</p>
<ul>
<li>
<p>当注册一个域名时，ICANN 会要求把注册人的个人信息 (邮件地址、电话等) 公开到 Whois 数据库中，那么任何人都可以通过 Whois 来查询你的个人联系信息。</p>
<blockquote>
<p>When you register a domain, ICANN, the non-profit regulatory body that is responsible for managing the domain name system (DNS), requires that your personal contact information including your email address, phone number, and mailing address be placed into a Whois database that is publicly available online. This gives anyone - including spammers and scammers - the ability to easily find your personal contact information simply by doing a Whois lookup on your domain.</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>Dynadot 有大量的特殊后缀域名可以注册，比如 .io, .one 等，域名价格通常比 GoDaddy 便宜。</p>
<ul>
<li>域名注册费用 <a target="_blank" rel="noopener" href="https://www.dynadot.com/zh/domain/tlds.html">顶级域价格</a></li>
<li>以 .one 为例，Dynadot 的注册、续费、转移费用均为 ￥58；而 GoDaddy 的注册、续费价格为 ￥94.07.</li>
</ul>
</li>
</ul>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Dynadot_one_domain_price.jpg" alt=""></p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Godaddy_one_domain_price.jpg" alt=""></p>
<ul>
<li>
<p>限时活动</p>
<ul>
<li>通过链接  <a target="_blank" rel="noopener" href="http://www.dynadot.com/?st6XZ6K6t8G7X7q">http://www.dynadot.com/?st6XZ6K6t8G7X7q</a>  注册账号，并在 48 小时内创建账户并消费 ¥65，我们都将获得价值 ¥32 的 DynaDollar，可以用于后续的域名续费。</li>
<li>具体的活动详情 <a target="_blank" rel="noopener" href="https://www.dynadot.com/zh/community/refer-a-friend.html">推荐给朋友 </a>。</li>
</ul>
</li>
</ul>
<p><img data-src="http://www.waylon.one/downloads/images/blog/share_to_friends.jpg" alt=""></p>
<p>综合比价后，我从 Dynadot 注册了 waylon.one 的域名，并且续费到 10 年。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/manage_domain.jpg" alt=""></p>
<h1>注册</h1>
<ul>
<li>
<p>点击注册链接 <a target="_blank" rel="noopener" href="http://www.dynadot.com/?st6XZ6K6t8G7X7q">http://www.dynadot.com</a> 或 <a target="_blank" rel="noopener" href="http://www.dynadot.com/?st6XZ6K6t8G7X7q">http://www.dynadot.com/?st6XZ6K6t8G7X7q</a>(活动期间返利￥32)。</p>
</li>
<li>
<p>网站支持中文，可以在右上角选择 [中文]，界面可以切换为中文。</p>
</li>
<li>
<p>在注册过程中，注意<strong>验证码大小写敏感</strong>。</p>
</li>
</ul>
<h1>购买</h1>
<ul>
<li>选择好域名后，在右上角货币的地方，选择人民币支付，就可以使用支付宝或者微信支付。</li>
</ul>
<h1>域名 DNS 解析</h1>
<p>IP 地址是网络上标识站点的数字地址，为了方便记忆，采用域名来代替 IP 地址标识站点地址。域名解析就是域名到 IP 地址的转换过程，域名的解析工作由 DNS 服务器完成。Dynadot 现在提供免费的域名解析服务。</p>
<ul>
<li>登录账户后，在左上角依次点击 我的域名 | 管理域名 | DNS 设置，选择自定义 DNS。</li>
</ul>
<p><img data-src="http://www.waylon.one/downloads/images/blog/enter_DNS_setting.jpg" alt=""></p>
<ul>
<li>我已经购买了 VPS，打算在上面部署网站，所以域名解析到对应的 IP 上。注意，DNS 更改后需要等待一段时间才起效。
<ul>
<li><a target="_blank" rel="noopener" href="https://www.dynadot.com/zh/community/help/question/%C3%A8%C2%AE%C2%BE%C3%A7%C2%BD%C2%AE-DNS">怎样为我的域名设置 DNS？</a></li>
</ul>
</li>
</ul>
<p><img data-src="http://www.waylon.one/downloads/images/blog/DNS_config.jpg" alt=""></p>
<h1>References</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ec30a84bf589">最便宜的域名注册网站</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bzbl.com/best-cheap-domain-name-registry.html">2020 年最好的便宜域名注册商推荐排行</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/paper/autonomous-helicopter-flight-via-RL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/paper/autonomous-helicopter-flight-via-RL/" class="post-title-link" itemprop="url">Autonomous Helicopter Flight via RL 笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-25 20:44:53" itemprop="dateCreated datePublished" datetime="2020-04-25T20:44:53+08:00">2020-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/paper/" itemprop="url" rel="index"><span itemprop="name">paper</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>3.7k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>13 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<p>Autonomous Helicopter Flight via Reinforcement Learning</p>
<p><a target="_blank" rel="noopener" href="https://people.eecs.berkeley.edu/~jordan/papers/ng-etal03.pdf">Paper download link</a></p>
<p>多平台维护不易，内容实时更新于 <a href="http://www.waylon.one/paper/autonomous-helicopter-flight-via-RL/">个人网站</a>，请移步阅读最新内容。</p>
<!--
- 先给出结论，然后举个例子，方便读者理解。这是一种好的写作方法，可以借鉴下。

-->
<h1>Abstract</h1>
<p>直升机飞行被普遍认为是一个具有挑战性的控制问题。作者在本文中描述了强化学习在自动直升机飞行控制器设计上的成功应用：本文首先拟合了一个随机、非线性的直升机动态模型，然后使用该模型去学习如何定点悬浮 (hover in place)，以及如何飞出 RC 直升机竞赛的复杂行为 (maneuvers)。</p>
<blockquote>
<p>In this paper, we describe the successful application of reinforcement learning to designing a controller for autonomous helicopter flight.</p>
</blockquote>
<blockquote>
<p>CM (Comment): 博客着重分析直升机模型建立，以及基于模型的控制策略学习。</p>
</blockquote>
<h1>INTRODUCTION</h1>
<ul>
<li>
<p>直升机悬停的难度，旋翼顺时针转动，直升机底盘会逆时针旋转；引入尾部旋翼来克服底盘的转动，但同时带来了漂移 (drift) 的问题。所以，直升机悬停时，一般是机体向右倾斜。</p>
<blockquote>
<p>So, for a helicopter to hover in place, it must actually be tilted slightly to the right, so that the main rotor’s thrust is directed downwards and slightly to the left, to counteract this tendency to drift sideways.</p>
</blockquote>
</li>
<li>
<p>对于没有较多直升机控制知识的同学，建议先观看一个讲解直升机飞行原理和控制策略的科普视频，复习一下牛顿三大定律在直升机控制上的应用，否则后面的控制学习不容易理解。</p>
</li>
</ul>
<!--
[牛顿力学三大定律](http://gaozhongwuli.com/zt/niudun/480447.html)
- 牛顿第一运动定律(惯性定律):   
  * 任何物体都保持静止或匀速直线运动的状态，直到受到其它物体的作用力迫使它改变这种状态为止。
- 牛顿第二运动定律(加速度定律):
  * 物体在受到合外力的作用会产生加速度，加速度的方向和合外力的方向相同，加速度的大小正比于合外力的大小与物体的惯性质量成反比。
- 牛顿第三运动定律(作用力与反作用力定律):
  * 两个物体之间的作用力和反作用力，在同一条直线上，大小相等，方向相反。
-->

<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
<iframe src="//player.bilibili.com/player.html?aid=14831817&amp;bvid=BV1mx411G7tG&amp;cid=24168563&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div>

<!--
- 在物理学里，作用力促使物体绕着转动轴或支点转动的趋向，称为力矩（torque或moment），也就是扭转的力。
- 力矩是角动量的变化量。
- 陀螺进动
  * 进动（precession）是自转物体之自转轴又绕着另一轴旋转的现象。
  * [link](https://zh.wikipedia.org/wiki/%E9%80%B2%E5%8B%95)
-->
<ul>
<li>看完视频后，相比可以看到直升机设计精巧 (ingenious solutions)，然而不直观的直升机动力学 (nonintuitive dynamics) 使得直升机的控制具有难度。</li>
</ul>
<h1>Autonomous Helicopter</h1>
<h2 id="硬件设备">硬件设备</h2>
<ul>
<li>Yamaha R-50 helicopter (长 3.6m，载重 20kg)
<ul>
<li>an Inertial Navigation System (INS)</li>
<li>a differential GPS system (a resolution of 2cm)</li>
<li>a digital compass</li>
<li>an onboard navigation computer</li>
</ul>
</li>
</ul>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Yamaha_R-50_helicopter.png" alt=""></p>
<ul>
<li> 最后，基于卡尔曼滤波 (the position estimates given by the Kalman filte)，上述硬件以 50Hz 对外输出直升机的状态估计 (数字量)：位置 (position)，方向 (orientation)，速度 (velocity) 和角速度 (angular velocities)。</li>
</ul>
<p>基于上述视频容易理解，大多数直升机是通过 4 维的运动空间 (4-dimensional action space) 来实现飞行控制的：桨旋转平台的前后左右的倾斜 (tilting this plane either forwards/backwards or sideways)，主螺旋桨角度的变化，机翼螺旋桨角度的变化。</p>
<ol>
<li>Cyclic pitch: The longtitudinal (front-back) and latitudinal (left-right) cyclic pitch controls. By tilting this plane (the helicopter’s rotors rotate) either forwards/backwards or sideways, these controls cause the helicopter to accelerate forward/backwards or sideways.</li>
</ol>
<img width="467" height="263" data-src="http://www.waylon.one/downloads/images/blog/cyclic_pitch.jpg">
<ol start="2">
<li>Collective pitch: The (main rotor) collective pitch control. By varying the tilt angle ofthe rotor blades, the collective pitch control affects the main rotor’s thrust.</li>
</ol>
<img width="467" height="263" data-src="http://www.waylon.one/downloads/images/blog/collective_pitch.jpg">
<ol start="3">
<li>Yaw motion: The tail rotor collective pitch control. Using a mechanism similar to the main rotor collective pitch control, this controls the tail rotor’s thrust.</li>
</ol>
<img width="467" height="263" data-src="http://www.waylon.one/downloads/images/blog/yaw_motion.jpg">
<p>综上，本文的任务就是基于卡尔曼滤波的位置估计，周期 (50Hz) 挑选好的控制行为 (pick good control actions)。</p>
<blockquote>
<p>Using the position estimates given by the Kalman filter, our task is to pick good control actions every 50th of a second.</p>
</blockquote>
<h1>Model identification</h1>
<h2 id="Fit-the-helicopter’s-dynamics-model">Fit the helicopter’s dynamics model</h2>
<ul>
<li>
<p>数据输入：记录人类驾驶员操作直升机的数据 (12-dimensional helicopter state &amp; 4-dimensional helicopter control inputs)，使用这些飞行数据进行模型拟合 (model fittin)。</p>
<blockquote>
<p>We began by asking a human pilot to fly the helicopter for several minutes, and recorded the 12-dimensional helicopter state and 4-dimensional helicopter control inputs as it was flown.</p>
</blockquote>
</li>
<li>
<p>使用机体坐标系 (helicopter body coordinates)，可以减少参数辨识量。</p>
<blockquote>
<p>in which the x, y, and z axes are forwards, sideways, and down relative to the current position of the helicopter.</p>
</blockquote>
<blockquote>
<p>Our model is identified in the body coordinates, which has four fewer variables than the spatial (world) coordinates.</p>
</blockquote>
</li>
</ul>
<h3 id="Locally-weighted-linear-regression-局部加权线性回归">Locally weighted linear regression (局部加权线性回归)</h3>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/czdbest/p/5767138.html">局部加权线性回归知识</a></p>
</li>
<li>
<p>s(t+1) = f(s(t), a(t), noise)</p>
<blockquote>
<p>By applying locally-weighted regression with the state s(t) and action a(t) as inputs, and the one-step differences of each of the state variables in turn as the target output, this gives us a non-linear, stochastic, model ofthe dynamics, allowing us to predict s(t+1) as a function of s(t) and a(t) plus noise.</p>
</blockquote>
</li>
<li>
<p>此外，和直升机的先验知识结合，提出优化模型的一些策略方法，减少拟合的参数量。</p>
<blockquote>
<p>Similar to the use of body coordinates to exploit symmetries, there is other prior knowledge that can be incorporated.</p>
</blockquote>
<blockquote>
<p>Similar reasoning allows us to conclude that certain other parameters should be 0， 1/50(50Hz) or g(gravity), and these were also <strong>hard-coded</strong> into the model.</p>
</blockquote>
</li>
<li>
<p>加入三个不可观测的参数 (unobserved variables) 来描述模型在控制上的延迟 (model latencies)。</p>
<blockquote>
<p>Finally, we added three extra (unobserved) variables to model latencies in the responses to the controls.</p>
</blockquote>
</li>
<li>
<p>通过图片 (plots) 将长时间段的均方差显示出来的交互方式，更容易看出差异和比较来选择模型，观察模型在长时间段内的拟合准确程度。</p>
<blockquote>
<p>Our main tool for choosing among the models was plots.</p>
</blockquote>
<blockquote>
<p>查看在一段时间内 (at longer time scales) 的预测位置 (estimated position) 和真实位置 (true position) 的均方差 (mean-squared error)。</p>
</blockquote>
<blockquote>
<p>For a model, the mean-squared error (as measured on test data) between the helicopter’s true position and the estimated position at a certain time in the future.</p>
</blockquote>
</li>
<li>
<p>建立好模型的意义，增强后期在真实环境下的可靠性。</p>
<blockquote>
<p>We wanted to verify the fitted model carefully, so as to be reasonably confident that a controller tested successfully in simulation will also be safe in real life.</p>
</blockquote>
<blockquote>
<p>对没有建模的噪声输入，担心噪声超出模型的预测。为次，通过图片检查 (plots) 直升机的预测输出是否超出误差阈值。</p>
</blockquote>
<blockquote>
<p>One of our concerns was the possibility that unmodeled correlations in noise might mean the noise variance of the actual dynamics is much larger than predicted by the model.</p>
</blockquote>
</li>
</ul>
<h1>Reinforcement learning: The PEGASUS algorithm</h1>
<h2 id="对PEGASUS的描述">对 PEGASUS 的描述</h2>
<img width="628" height="140" data-src="http://www.waylon.one/downloads/images/blog/PEGASUS.jpg">
<ul>
<li>这些使用程序很难精确计算，但是可以借助于计算机来仿真 MDP 的动力学。</li>
</ul>
<img width="631" height="120" data-src="http://www.waylon.one/downloads/images/blog/PEGASUS_calculate.jpg">
<!--
- 看似简单的PEGASUS算法，实则是一个困难的随机优化问题。

CM: 为何会有这样的论断，自己却不是很清楚，看来对深度学习的理论知识了解的还不够呢。

> This is a difficult stochastic optimization problem.
-->
<img width="631" height="108" data-src="http://www.waylon.one/downloads/images/blog/good_estimate_of_U.jpg">
<h1>Learning to Hover</h1>
<ul>
<li>
<p>以其他控制器尝试为例 (μ-synthesis)，来说明问题的难度和微妙</p>
<blockquote>
<p>These comments should not be taken as conclusive of the viability of any of these methods; rather, we take them to be indicative of the difficulty and subtlety involved in learning a helicopter controller.</p>
</blockquote>
</li>
</ul>
<!--
自己的眼光局限，限制了对Matlab的理解，原来matlab有很多的tools，避免重复造轮子的麻烦

[matlab toolbox](http://math.cumt.edu.cn/_upload/article/files/0c/51/f02bf76b4f06ad4652ba3818e1c4/90c825c4-382c-473f-9be8-c54074793153.pdf)
[Matlab 工具介绍](http://www.360doc.com/content/16/0719/12/27698033_576742232.shtml)
![Matlab toolbox](57057D4A185949F5A4225AC73B271013)

![](https://www.yanlongwang.net/downloads/images/blog/matlab_toolbox.jpg)

曾经以为，计算机是万能的，机械无用论，matlab可以被python无情替代，现在看来是自己太naive，各行各业都有一大群人在默默地努力。计算机只是一个替代人计算和行动的工具，怎么可能是万能的呢？

尊重每一个学科，存在是有必要性的，只不过必要性现在没有体现出来而已。如果自己不是读文献，不是准备读博士，怎么会发现世界的奇妙呢？困在自己的一点认知中，妄自尊大才可怕。
-->
<ul>
<li>
<p>从直升机悬停开始学习策略。</p>
<blockquote>
<p>We began by learning a policy for hovering in place.</p>
</blockquote>
<ul>
<li>
<p>直升机悬停控制的神经网络设计<br>
<img data-src="http://www.waylon.one/downloads/images/blog/RL_helicopter_policy_class.jpg" alt=""></p>
<blockquote>
<p>The picture inside the circles indicate whether a node outputs the sum of their inputs, or the tanh of the sum of their inputs. Each edge with an arrow in the picture denotes a tunable parameter. The solid lines show the hovering policy class. The dashed lines show the extra weights added for trajectory following.</p>
</blockquote>
<ul>
<li>很明显，需要具备直升机控制的理论和实践知识。</li>
</ul>
<blockquote>
<p>Each of the edges in the figure represents a weight, and <strong>the connections were chosen via simple reasoning about which control channel should be used to control which state variables</strong>.</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>结合具体的问题和目标，设计奖励函数和惩罚函数，这是需要除计算机知识和强化学习知识外的专业知识和实践经验。</p>
<ul>
<li>二阶奖励函数 (靠近目标点 + 速度变化慢)
<blockquote>
<p>This encourages the helicopter to hover near target position, while also keeping the velocity small and not making abrupt movements.</p>
</blockquote>
</li>
<li>二阶惩罚函数 (鼓励平滑控制和小行动)
<blockquote>
<p>To encourage small actions and smooth control of the helicopter, we also used a quadratic penalty for actions.</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>基于辨识的模型 (model identified)，使用 PEGASUS 算法来获得实用策略 (the utilities of policies) 的近似值 $[\hat {U}(\pi)]$。</p>
<blockquote>
<p>Using the model identified, we can now apply PEGASUS to define approximations $[\hat{U}(\pi)]$ to the utilities of policies.</p>
</blockquote>
</li>
<li>
<p>策略和动态特性的可连续和平滑性。</p>
<blockquote>
<p>Since policies are smoothly parameterized in the weights, and the dynamics are themselves continuous in the actions, the estimates of utilities are also continuous in the weights.</p>
</blockquote>
</li>
</ul>
<!--
  * 作者在脚注中，非常严谨地作出说明，因为计算的数值精度，可能导致策略的不连续性。严谨的做学问态度，让自己自愧不如。

一篇好的实用论文，绝对不是因为弄虚作假而被人喜爱，如果自己辛苦的实现，仅仅是一堆废纸，弄虚作假浪费别人的时间，价值无法被肯定，那么写来有何用。乾隆的诗词万篇，最后流传被人喜爱的又有几篇呢？
-->
<ul>
<li>
<p>求取策略的权重时，应用爬山算法来最大化 $[\hat {U}(\pi)]$，其中使用梯度上升 (gradient ascent algorithm) 和随机游走 (random-walk algorithm) 两种算法，来最大化策略 $[\pi]$。</p>
<blockquote>
<p>We may thus apply standard hillclimbing algorithms to maximize $[\hat{U}(\pi)]$ in terms of the policy’s weights.</p>
</blockquote>
</li>
<li>
<p>在策略学习中，最消耗资源的是重复加速蒙特卡罗评价 (Monte Carlo evaluation) 来获得策略，文章提出使用并行计算 (parallelized our implementation) 来加速蒙特卡罗评价的训练。</p>
<ul>
<li>在不同的计算机使用不同的样本来计算；</li>
<li>然后聚合训练结果，获得策略 $[\hat {U}(\pi)]$。</li>
</ul>
<blockquote>
<p>The most expensive step in policy search was the repeated Monte Carlo evaluation to obtain $[\hat{U}(\pi)]$. To speed this up, we parallelized our implementation, and Monte Carlo evaluations using different samples were run on different computers, and the results were then aggregated to obtain $[\hat{U}(\pi)]$.</p>
</blockquote>
</li>
<li>
<p>如何评价控制策略的表现：文章比较基于学习的策略和人类驾驶员的性能表现，来证明算法的稳定性。</p>
<blockquote>
<p>We also compare the performance of our learned policy against that of our human pilot trained and licensed by Yamaha to fly the R-50 helicopter.</p>
</blockquote>
</li>
</ul>
<h1>Flying competition maneuvers</h1>
<ul>
<li>
<p>作者参加了 AMA (the Academy of Model Aeronautics) 组织的直升机飞行挑战 (an annual RC helicopter competition)，挑战极具难度的 3 个行为，比如如下图所示的 pirouette (turning in place)。</p>
<blockquote>
<p>We took the first three maneuvers from the most challenging, Class III, segment of their competition.</p>
</blockquote>
<img width="300" height="300" data-src="https://thumbs.dreamstime.com/b/colorful-dancer-pirouette-fifth-position-vector-illustration-79727401.jpg">
</li>
</ul>
<!--
貌似搞学术，也是可以参加一些竞赛的，验证自己的水平，为自己的研究打call!

读论文，居然可以学习到芭蕾的一个概念，单脚尖旋转，看起来很酷。
-->
<ul>
<li>
<p>文章目前只是学习了如何悬停 (hover)，那么如何能够沿着轨迹飞行呢？作者给出的一种做法是让直升机沿着特定的轨迹点，慢慢变化状态，控制策略和悬停基本一致。</p>
<blockquote>
<p>How does one design a controller for flying trajectories? Given a controller for keeping a system’s state at a point, one standard way to make the system move through a particular trajectory is to slowly vary along a sequence of set points on that trajectory.</p>
</blockquote>
</li>
<li>
<p>另一种做法，重新训练参数来准确跟踪轨迹</p>
<blockquote>
<p>Retrain the policy’s parameters for accurate trajectory following.</p>
</blockquote>
<ul>
<li>
<p>trajectory following vs trajectory tracking</p>
<blockquote>
<p>Path/Trajectory following is all about following a predefined path which does not involve time as a constraint. Thus, if you are on the path and following it with whatever speed you have reached your goal. On the contrary, trajectory tracking involves time as a constraint. Meaning that you have to be at a certain point at a certain time.</p>
</blockquote>
</li>
</ul>
<ul>
<li>
<p>基于直升机的理论机制，优化网络模型。</p>
<blockquote>
<p>Since we are now flying trajectories and not only hovering, we also augmented the policy class to take into account more of the coupling between the helicopter’s different sub-dynamics. / 比如旋转时，尾翼控制会带来漂移；上升下降控制时，带来旋转的影响，这一部分在最开始的视频中有讲到。</p>
</blockquote>
</li>
<li>
<p>设计 (specify) 轨迹跟踪 (trajectory following) 时的奖励函数。</p>
<ul>
<li>
<p>贴近轨迹 (penalize deviation)：惩罚位置的偏差，计算直升机当前位置和其投影到理想轨迹的位置偏差。</p>
<blockquote>
<p>“tracked” position: the “projection” of the helicopter’s position onto the path of the idealized, desired trajectory.</p>
</blockquote>
<blockquote>
<p>the learning algorithm pays a penalty that is quadratic between the actual position and the “tracked” position on the idealized trajectory.</p>
</blockquote>
</li>
<li>
<p>前进奖励 (making progress)：使用沿着轨迹增加的势函数 (potential function)，如果直升机前进，那么可以获得正奖励 (positive reward)。</p>
<blockquote>
<p>Since, we are already tracking where along the desired trajectory the helicopter is, we chose a potential function that increases along the trajectory. Thus, whenever the helicopter’s makes forward progress along this trajectory, it receives positive reward.</p>
</blockquote>
</li>
<li>
<p>定义解耦 (decouple our definition)</p>
<blockquote>
<p>Finally, our modifications have decoupled our definition of the reward function from (x*, y*, z*, w*) and the evolution of (x*, y*, z*, w*) in time.</p>
</blockquote>
<ul>
<li>(x*, y*, z*, w*) represents a desired hovering position and orientation.</li>
</ul>
<blockquote>
<p>We considered several alternatives, but the main one used ended up being a modification for flying trajectories that have both a vertical and a horizontal component (such as along the two upper edges of the triangle in III.1).</p>
</blockquote>
</li>
<li>
<p>模型控制需要根据实际测试，人为干预，不断调整，而不是一劳永逸，比如在 z 方向上人为加入时延，来避免 “bowed-out” 或者 “bowed-in” 轨迹。</p>
<blockquote>
<p>the z (vertical)-response of the helicopter is very fast. In contrast, the x and y responses are much slower.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
<iframe src="//player.bilibili.com/player.html?aid=242991298&amp;bvid=BV19e411s7Ho&amp;cid=183111788&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div>

<h1>References</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/u013181595/article/details/86563414">吴恩达直升机控制系列论文笔记</a></li>
<li><a target="_blank" rel="noopener" href="http://heli.stanford.edu/">吴恩达的链接</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Reading/reprinte-impression-of-Ein-Hund-namens-Money/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Reading/reprinte-impression-of-Ein-Hund-namens-Money/" class="post-title-link" itemprop="url">转载 - 小狗钱钱读后感 - 不只是理财</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-03-17 08:43:36" itemprop="dateCreated datePublished" datetime="2020-03-17T08:43:36+08:00">2020-03-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Reading/" itemprop="url" rel="index"><span itemprop="name">Reading</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>7 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>挺喜欢这篇文章的几个非理财观点，文章转载于 <a target="_blank" rel="noopener" href="http://minxueyu.com/2020/03/10/%E3%80%8A%E5%B0%8F%E7%8B%97%E9%92%B1%E9%92%B1%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F-%E5%AE%9E%E7%94%A8%E7%9A%84%E5%BB%BA%E8%AE%AE/">实用的建议</a>。</p>
<p>通过阅读《小狗钱钱》这本书，我们除了可以收获很多金钱、理财相关的观念和知识外，还可以获得很多实用的建议，我认为将这些实践应用于日常生活中，可以帮助我们进步、达成自己的目标。</p>
<p>本书关于金钱、理财的观点和建议，大家可以看我的另一篇读后感<a target="_blank" rel="noopener" href="http://minxueyu.com/2020/03/10/%E3%80%8A%E5%B0%8F%E7%8B%97%E9%92%B1%E9%92%B1%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F-%E5%85%B3%E4%BA%8E%E9%87%91%E9%92%B1/">《小狗钱钱》读后感 - 关于金钱</a>。</p>
<div align="center">
  <img width="200" data-src="http://minxueyu.com/img/financing/小狗钱钱.jpg">
</div>
<h1>实用的建议</h1>
<h2 id="你只有两个选择：做与不做，没有试试看">你只有两个选择：做与不做，没有试试看</h2>
<p>本书关于做一件事情的理念：你只有两个选择：做与不做，没有试试看。</p>
<p>当小狗钱钱给吉娅提出梦想储钱罐和梦想相册时，吉娅说自己会试试看，小狗钱钱对吉娅说：</p>
<blockquote>
<p>你只有两个选择：做或不做，不能是我试一下”</p>
</blockquote>
<blockquote>
<p>如果你只是抱着试试看的心态，那么你只会以失败告终，你会一事无成。尝试纯粹是一种借口，你还没有做，就已经给自己想好了退路。</p>
</blockquote>
<p>反思一下我们自己，在做一件事情时，我们是不是要么犹豫半天后选择不做，要么是不是会说 “我尝试一下吧”，其实那时候内心已经允许自己完不成了，甚至已经接受了失败这个结局。为了避免这样的事情发生，我们可以像吉娅一样，虽然没有监督自己的狗狗，但是可以自己监督自己，一旦说 “尝试一下” 就在本子上记录一次，最后争取只留下 “做” 与 “不做” 两个选项。</p>
<h2 id="多想实现目标后的美好，少想事情做不好的原因">多想实现目标后的美好，少想事情做不好的原因</h2>
<p>钱钱给吉娅提出她看待问题的一个错误思维：首先考虑的总是事情做不成的原因，而不是去想象达成目标后的美好。</p>
<blockquote>
<p>你必须设想你已经拥有了这些东西，这样捏的一个小愿望才会变成一种强烈的愿望，你想象的越多，你的愿望就越强烈，那么你就会开始寻找机会来实现自己的梦想。</p>
</blockquote>
<p>基于此，钱钱给她提出的可实践性建议是建立梦想相册，让她把梦想 “去美国交流”、“笔记本电脑” 相关的图片保存到相册中，时常拿出来看，加强自己的渴望。</p>
<p>关于梦想储钱罐和梦想相册，我自己也进行了实践了一下，我找出本子罗列自己十个需要金钱来实现的愿望，挑选出了三个，并设定了各自的资金来源，刚好咕咕机到手了，所以打算把与愿望相关的图片都打印出来，而且还要把梦想写的更详细一点，等我达成某个梦想时，再来与大家分享。</p>
<h2 id="自信决定了是否可以成功">自信决定了是否可以成功</h2>
<p>本书还强调了自信的重要性，而且认为过于自信比不够自信要好得多。</p>
<blockquote>
<p>你的自信程度决定了你是否相信自己的能力，是否相信你自己，如果你根本不相信你能做到的话，那么你就根本不会动手去做，而假如你不开始去做，那么你就什么也得不到。</p>
</blockquote>
<p>这段话我深感理解，我是一个自卑的人，任何时候都不自信，而且由于没有信心做成功，自然也不会付出相应的努力，所以很多事情不出所料地都失败了，而这些事情的失败像是地上的雪花，自卑这个雪球经过一片片雪花逐渐变的越来越大，之后又更容易沾上雪花。自卑、不为之努力、失败形成了一个完美的循环，自己无法逃脱。</p>
<p>关于如何建立自信，钱钱给吉娅的建议是：设立自己的 “成功日记”，每天记录至少 5 件个人成果，任何小事都可以，而且不用纠结有些事情是否属于成果，可以给予自己肯定的答复。这个建议之前也有在别的地方听到过，但是都没有付诸实践，这次我计划开始写 “成功日记”，到目前为止已经坚持了 17 天，未有过间断，我发现自己喜欢上了这项活动。虽然里面记录的大部分搜是很小的事情，现在我每天晚上睡觉前拿出我的小本本回想今天的个人成果，感觉很开心，这对自己至少是一种积极的暗示，而且我发现开始更愿意完成自己每天的任务计划，不知道是不是有它的功劳呢。</p>
<h2 id="把精力集中在你知道的、能做的和拥有的东西上">把精力集中在你知道的、能做的和拥有的东西上</h2>
<p>当吉娅决定要开始赚钱，但是不知道如何下手时，钱钱给她讲了个故事，借故事提出两个建议：</p>
<blockquote>
<ol>
<li>为别人解决一个难题，那么你就能赚到很多钱；</li>
<li>把精力集中在你知道的、能做的和拥有的东西上。</li>
</ol>
</blockquote>
<p>如果你也有 “开源” 的打算，我感觉这两个建议非常好，考虑下别人需要什么和自己有什么。而第二个建议可能不仅限于赚钱，自己的事业或工作也一样，人的精力是有限的，专注于自己知道、能做和拥有的东西上，不要跟随潮流看大家干嘛自己也干嘛，最终可能什么都不精，找到自己会的，把某一方面做的很精通，可能整体带来的收益更大。</p>
<h2 id="重要的事情要坚持做">重要的事情要坚持做</h2>
<p>由于小狗钱钱是吉娅捡到的，当吉娅找到狗主人时，由于害怕失去钱钱而十分害怕和烦恼，因此停止了成功日记的记录和梦想相册的整理。钱钱因此非常生气，它说：</p>
<blockquote>
<p>困难总是在不断地出现。尽管如此，你每天还是要不间断地去做对你地未来意义重大地事情，这件事情可能花费时间不多，但就是这段时间会让一切变得不同。</p>
</blockquote>
<p>这个有点观点比较像四现象法则中提出的对待 “重要不紧急” 事件的态度，这些事情可能不是十分紧急的，但是这些事情的重要性却很高，无论如何都应该坚持，那么有什么好的建议吗？钱钱给的建议是，应该在固定的时间里，有规律地做这些事情，这样可以防止由于其他紧急事情、或者心情等原因导致的中断。</p>
<h2 id="72小时规定">72 小时规定</h2>
<p>钱钱告诉吉娅在想做什么事情时，在 72 小时内去完成，不要拖太久时间，否则这件事情你可能永远不会再做了。</p>
<p>这个规定很适合于我们平常一些灵感和想法的实施，这些事情完全属于自主自愿，更多的是靠一时的冲动和兴趣，如果开始的太晚，或者持续时间太久，很容易中途放弃，最终就不了了之。</p>
<h1>写在最后</h1>
<p>关于实用的建议，我大概就梳理出了这么几个，希望大家可以找到适合自己的建议并进行实践，我实践一段时间后，也会和大家分享我的成长和收获。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/USV/Mercator-projection/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/USV/Mercator-projection/" class="post-title-link" itemprop="url">简明版墨卡托投影坐标系 (原理到实现)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-08 16:49:10" itemprop="dateCreated datePublished" datetime="2020-02-08T16:49:10+08:00">2020-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/USV/" itemprop="url" rel="index"><span itemprop="name">USV</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.4k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>5 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<h1>前言</h1>
<p>FYI 本博客初稿完成于 2017 年，内容更新于 <a href="http://www.waylon.one/USV/Mercator-projection/">个人网站 - 简明版墨卡托投影坐标系</a>，请移步阅读最新内容。</p>
<p>本文讲述了墨卡托投影坐标系的基本原理和实现，但是因为地球非标准椭圆，经纬度和米坐标的转换复杂，本文提供的算法存在较大误差，仅适用于初步验证。</p>
<h1>墨卡托投影坐标系</h1>
<p>墨卡托投影 (Mercator Projection) 是一种 “等角正切圆柱投影”，荷兰地图学家墨卡托 (Mercator) 在 1569 年拟定：假设地球被围在一个中空的圆柱里，其赤道与圆柱相接触，然后再假想地球中心有一盏灯，把球面上的图形投影到圆柱体上，再把圆柱体展开，这就是一幅标准纬线为零度（即赤道）的 “墨卡托投影” 绘制出的世界地图。<br>
墨卡托投影在今天对于航海事业起着极为重要的作用，目前世界各国绘制海洋地图时仍广泛使用墨卡托投影，国际水路局 (IHB) 规定：“除特殊情况外，各国都要用墨卡托投影绘制海图”。国际水路局发行的《大洋水深总图》是把全世界分成 24 幅编辑的，在南北纬 72 度之间就是使用墨卡托投影绘成的。</p>
<h1>墨卡托投影性质</h1>
<p>由于墨卡托投影的经纬线离开赤道逐渐以相同倍数伸长，所以又称为渐长投影，由于它是具有等角性质的圆筒投影，所以也叫做等角圆筒投影。<strong>注意：这种投影不适合高纬地区，通常纬度 60 度以上区域，不用此投影</strong>。</p>
<p><img data-src="/downloads/images/blog/Mercator_1.png" alt=""></p>
<p><img data-src="/downloads/images/blog/Mercator_2.png" alt=""></p>
<p>墨卡托投影有一个特别的特性：所有罗盘等角线，或称斜航线（就是与所经过的所有经线形成相同角度的航线，也称恒向航线）在墨卡托投影下都是直线。这使得在航海领域这个投影非常重要。<br>
注意：经纬线的伸长与纬线的正割成比例变化，随纬度增高极具拉伸，到极点成为无穷大；面积的扩大更为明显，在 60 度的地方面积要扩大四倍。如下图所示，地理上等半径圆在高纬度面积明显扩大。</p>
<p><img data-src="/downloads/images/blog/Mercator_3.png" alt=""></p>
<p>墨卡托投影是按等角条件修改透视圆筒投影而得到的投影，等角（也称为保形） 是指当地图上任何一点的各方向具有相同的比例，称为局部保形，透视圆筒投影如图 1 所示。从墨卡托投影图上可以看出，经线间隔的经度如果相等，则经线是等距平行的直线， 纬线也是平行的直线，而且经纬线是相互垂直的。墨卡托投影对透视圆筒投影改造点：要使圆筒投影称为等角的性质，必须使由赤道向两极经线逐渐伸长的倍数与经线上各点相应的纬度扩大的倍数相同。</p>
<p><img data-src="/downloads/images/blog/Mercator_4.png" alt=""></p>
<p><img data-src="/downloads/images/blog/Mercator_5.png" alt=""></p>
<p>透视圆筒投影</p>
<p><img data-src="/downloads/images/blog/Mercator_6.png" alt=""></p>
<h1>墨卡托投影方程式</h1>
<p>墨卡托投影以整个世界范围，赤道作为标准纬线，本初子午线作为中央经线，两者交点为坐标原点，向东向北为正，向西向南为负。南北极在地图的正下、上方，而东西方向处于地图的正右、左。由于墨卡托投影在两极附近是趋于无限值，因此它并没完整展现了整个世界，地图上最高纬度是 85.05 度（通过纬度取值范围 ys 反解计算可得到纬度值为 85.05112877980659）。为了简化计算，我们采用球形映射，而不是椭球体形状。</p>
<p>公式推导具体见文献 <a target="_blank" rel="noopener" href="http://new.oversea.cnki.net/kcms/detail/detail.aspx?filename=LNSZ198001001&amp;dbcode=CJFQ&amp;dbname=CJFD1980&amp;v=">墨卡托投影与大圆投影的构成及其在定航线计算航程与航向方面的应用_程光举</a>。</p>
<p><img data-src="/downloads/images/blog/Mercator_7.png" alt=""><br>
<img data-src="/downloads/images/blog/Mercator_8.png" alt=""></p>
<p>利用等角条件 m=n 来讨论具体公式，具体分为三步：</p>
<ol>
<li>根据 m=n 得到地球表面投影到平面上的微积线段的关系式。</li>
<li>把地球视为球体：<br>
设地球表面 A 点经纬坐标为（λ，Φ），对应的投影坐标为（x,y）, 基准纬线设置为赤道，则 R 为地球半径；</li>
</ol>
<p>墨卡托投影方程式为：</p>
<p><img data-src="/downloads/images/blog/Mercator_9.png" alt=""></p>
<ol start="3">
<li>把地球视为旋转椭球体</li>
</ol>
<p>墨卡托投影正反解公式：</p>
<p><img data-src="/downloads/images/blog/Mercator_10.png" alt=""></p>
<p><img data-src="/downloads/images/blog/Mercator_11.png" alt=""></p>
<p>公式推导具体见文献 <a target="_blank" rel="noopener" href="http://new.oversea.cnki.net/kcms/detail/detail.aspx?filename=LNSZ198001001&amp;dbcode=CJFQ&amp;dbname=CJFD1980&amp;v=">墨卡托投影与大圆投影的构成及其在定航线计算航程与航向方面的应用_程光举</a>。</p>
<h1>程序实现</h1>
<p>最新版见 <a target="_blank" rel="noopener" href="https://github.com/wylloong/-GeographyCoordinateTransform/blob/master/Mercator">Geography Coordinate Transform Lite/Mercator</a></p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Lite版，仅适用于初步验证</span></span><br><span class="line"><span class="comment">//把地球视为球体实现经纬度和墨卡托投影的函数</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">	<span class="type">double</span> x;</span><br><span class="line">	<span class="type">double</span> y;</span><br><span class="line">}WayPoint;</span><br><span class="line"></span><br><span class="line"><span class="comment">//经纬度转墨卡托</span></span><br><span class="line">WayPoint <span class="title function_">lonLat2Mercator</span><span class="params">(WayPoint lonLat)</span></span><br><span class="line">{</span><br><span class="line">	WayPoint mercator;</span><br><span class="line">	<span class="type">double</span> x = lonLat.x * <span class="number">20037508.34</span> / <span class="number">180</span>;</span><br><span class="line">	<span class="type">double</span> y = <span class="built_in">log</span>(<span class="built_in">tan</span>((<span class="number">90</span> + lonLat.y) * Pi / <span class="number">360</span>))/(Pi / <span class="number">180</span>);  </span><br><span class="line">	y = y * <span class="number">20037508.34</span> / <span class="number">180</span>;</span><br><span class="line">	mercator.x = x;</span><br><span class="line">	mercator.y = y;</span><br><span class="line">	<span class="keyword">return</span> mercator;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//墨卡托转经纬度</span></span><br><span class="line">WayPoint <span class="title function_">Mercator2lonLat</span><span class="params">(WayPoint mercator)</span></span><br><span class="line">{</span><br><span class="line">	WayPoint lonLat;</span><br><span class="line">	<span class="type">double</span> x = mercator.x / <span class="number">20037508.34</span> * <span class="number">180</span>;</span><br><span class="line">	<span class="type">double</span> y = mercator.y / <span class="number">20037508.34</span> * <span class="number">180</span>;</span><br><span class="line">	y = <span class="number">180</span> / Pi * (<span class="number">2</span> * <span class="built_in">atan</span>(<span class="built_in">exp</span>(y * Pi / <span class="number">180</span>)) - Pi / <span class="number">2</span>);</span><br><span class="line">	lonLat.x = x;</span><br><span class="line">	lonLat.y = y;</span><br><span class="line">	<span class="keyword">return</span> lonLat;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h1>Reference</h1>
<ul>
<li>程光举。墨卡托投影与大圆投影的构成及其在确定航线、计算航程与航向方面的应用 [J]. 辽宁师院学报 (自然科学版),1980 (01):13-28. </li>
<li><a target="_blank" rel="noopener" href="http://download.csdn.net/detail/wylloong/9813502">墨卡托投影与经纬度转换源代码及原理文献</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Python/python-interactive-mode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Python/python-interactive-mode/" class="post-title-link" itemprop="url">基于 interactive mode 实现 matplotlib 动态更新图片 (交互式绘图)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-08 16:27:36" itemprop="dateCreated datePublished" datetime="2020-02-08T16:27:36+08:00">2020-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>816</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>3 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<p>最近在研究动态障碍物避障算法，在 Python 语言进行算法仿真时需要实时显示障碍物和运动物的当前位置和轨迹，利用 Anaconda 的 Python 打包集合，在 Spyder 中使用 Python3.5 语言和 matplotlib 实现路径的动态显示和交互式绘图 (和 Matlab 功能类似)。</p>
<p>本博客初稿完成于 2017 年，多平台维护不易，内容更新于 <a target="_blank" rel="noopener" href="https://www.yanlongwang.net/Python/python-interactive-mode/">个人网站</a>，请移步阅读最新内容。</p>
<h1>背景知识</h1>
<h2 id="Anaconda">Anaconda</h2>
<p><a target="_blank" rel="noopener" href="https://www.anaconda.com/">Anaconda</a> 是一个用于科学计算的 Python 发行版，支持 Linux, Mac, Windows 系统，提供了包管理与环境管理的功能，可以很方便地解决多版本 python 并存、切换以及各种第三方包安装问题。</p>
<p>Anaconda 利用工具 / 命令 conda 来进行 package 和 environment 的管理，并且已经包含了 Python 和相关的配套工具。</p>
<h2 id="matplotlib">matplotlib</h2>
<p><a target="_blank" rel="noopener" href="http://matplotlib.org/">matplotlib</a> 是 python 最著名的绘图库，它提供了一整套和 matlab 相似的命令 API，十分适合交互式地进行制图。而且也可以方便地将它作为绘图控件，嵌入 GUI 应用程序中。其中，matplotlib 的 pyplot 子库提供了和 matlab 类似的绘图 API，方便用户快速绘制 2D 图表，它的文档相当完备，并且 Gallery 页面中有上百幅缩略图，打开之后都有源程序。</p>
<h1>matplotlib 交互式绘图</h1>
<h2 id="原理">原理</h2>
<p>在调研 matplotlib 动态绘制曲线方法中，和 matlab 相似有 animation 方法和交互式绘图，但是 animation 方法灵活性不高，不太适合路径的实时动态显示，本文最后采用交互式绘图模（interactive mode）-- <a target="_blank" rel="noopener" href="http://matplotlib.org/users/shell.html">Using matplotlib in a python shell</a>。</p>
<blockquote>
<p>The interactive property of the pyplot interface controls whether a figure canvas is drawn on every pyplot command. If interactive is False, then the figure state is updated on every plot command, but will only be drawn on explicit calls to draw(). When interactive is True, then every pyplot command triggers a draw.</p>
</blockquote>
<h2 id="实践">实践</h2>
<p>当绘图语句中加入 pl.ion () 时，表示打开了交互模式。此时 python 解释器解释完所有命令后，给你出张图，但不会结束会话，而是等着你跟他交流交流。如果你继续往代码中加入语句，run 之后，你会实时看到图形的改变。当绘图语句中加入 pl.ioff () 时或不添加 pl.ion () 时，表示打关了交互模式。此时要在代码末尾加入 pl.show () 才能显示图片。python 解释器解释完所有命令后，给你出张图，同时结束会话。如果你继续往代码中加入语句，再不会起作用，除非你关闭当前图片，重新 run。</p>
<h1>Example</h1>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Created on Sat Mar 25 23:28:29 2017</span></span><br><span class="line"><span class="string">@author: wyl</span></span><br><span class="line"><span class="string">original link: https://www.yanlongwang.net/Python/python-interactive-mode/</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib.patches <span class="keyword">import</span> Circle</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line">    </span><br><span class="line">plt.close()  <span class="comment">#clf() # 清图  cla() # 清坐标轴 close() # 关窗口</span></span><br><span class="line">fig=plt.figure()</span><br><span class="line">ax=fig.add_subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">ax.axis(<span class="string">"equal"</span>) <span class="comment">#设置图像显示的时候XY轴比例</span></span><br><span class="line">plt.grid(<span class="literal">True</span>) <span class="comment">#添加网格</span></span><br><span class="line">plt.ion()  <span class="comment">#interactive mode on</span></span><br><span class="line">IniObsX=<span class="number">0000</span></span><br><span class="line">IniObsY=<span class="number">4000</span></span><br><span class="line">IniObsAngle=<span class="number">135</span></span><br><span class="line">IniObsSpeed=<span class="number">10</span>*math.sqrt(<span class="number">2</span>)   <span class="comment">#米/秒</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'开始仿真'</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">180</span>):</span><br><span class="line">        <span class="comment">#障碍物船只轨迹</span></span><br><span class="line">        obsX=IniObsX+IniObsSpeed*math.sin(IniObsAngle/<span class="number">180</span>*math.pi)*t</span><br><span class="line">        obsY=IniObsY+IniObsSpeed*math.cos(IniObsAngle/<span class="number">180</span>*math.pi)*t</span><br><span class="line">        ax.scatter(obsX,obsY,c=<span class="string">'b'</span>,marker=<span class="string">'.'</span>)  <span class="comment">#散点图</span></span><br><span class="line">        <span class="comment">#ax.lines.pop(1)  删除轨迹</span></span><br><span class="line">        <span class="comment">#下面的图,两船的距离</span></span><br><span class="line">        plt.pause(<span class="number">0.001</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">    <span class="built_in">print</span>(err)</span><br></pre></td></tr></tbody></table></figure>
<p><img data-src="https://www.yanlongwang.net/downloads/images/blog/python_interactive_mode_example.png" alt=""></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/website/Introduce-AdSense-to-website/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/website/Introduce-AdSense-to-website/" class="post-title-link" itemprop="url">How to bring in google AdSense to Hexo website / Hexo 网站承接 google AdSense 广告</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-08 08:44:20" itemprop="dateCreated datePublished" datetime="2020-02-08T08:44:20+08:00">2020-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/website/" itemprop="url" rel="index"><span itemprop="name">website</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>7 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<p>FYI 本博客实时更新于 <a target="_blank" rel="noopener" href="https://www.yanlongwang.net/website/Introduce-AdSense-to-website/">个人网站 - Hexo 网站引入 google AdSense</a>，请移步阅读最新内容。</p>
<h1>前言</h1>
<p>个人网站 <a href="www.yanlongwang.net">www.yanlongwang.net</a> 已经运营近一年，每日的浏览量不断上升，现在维持在两位数，打算承接一点广告赚睡后收入，用来维持网站的日常运营，希望能覆盖网站的服务器和域名开销。</p>
<p>目前，自己通过 Google AdSense 在个人网站的广告位承接广告，下面主要讲解从注册 Google AdSense，到审核通过后设置广告的基本操作。</p>
<p>点击 <a href="www.yanlongwang.net">www.yanlongwang.net</a> 测试体验，如下图。在侧边栏下部应该可以看到 AdSense 推送的广告，如果看不到，查看浏览器是否安装了 AdBlock 等广告屏蔽插件，请暂时关闭这些插件。</p>
<p><img data-src="https://www.yanlongwang.net/downloads/images/blog/AdSense_sidebar_ad_example.jpg" alt=""></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 系统</span><br><span class="line">- Next Theme</span><br><span class="line">// 在 hexo 目录下, 输入 “hexo version” 可以查看 Next 及依赖的版本</span><br><span class="line">- hexo: 3.8.0</span><br><span class="line">- hexo-cli: 1.1.0</span><br><span class="line">- ...</span><br></pre></td></tr></tbody></table></figure>
<h1>广告联盟选择</h1>
<p>在国内，比较知名的广告联盟都要求网站备案，比如<a target="_blank" rel="noopener" href="http://union.baidu.com/customerLogin.html">百度广告联盟</a>，否则无法承接广告，而自己的小网站暂时没有备案，所以只能选择国外的广告联盟。</p>
<p>国外的广告联盟，毫无疑问会选择 Google AdSense，申请门槛相对较低。网站一般运营几个月，有十几篇文章，是比较容易通过审核的。并且，AdSense 的广告相比百度联盟的还是比较优质的，所以最后选择 google AdSense 联盟。</p>
<h1>注册 AdSense 账号</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.google.com/adsense/start/#">注册网站</a> 搬梯子登录</li>
<li>点击右上角 Get started 进行注册；如有 google 账号，可以直接点击 sign in 进行登录。</li>
</ul>
<p><img data-src="https://www.yanlongwang.net/downloads/images/blog/adsense_sign_up.jpg" alt=""></p>
<ul>
<li>填写完信息之后，页面会生成一段代码，要求你放置到你的网站的标记中。注意，当审核通过后，这一段代码在开启 “自动广告” 后，会自动推送广告。
<ul>
<li>针对 Next Theme，可以复制代码到 themes\next\layout\_partials\head.swig 中任意一个 script 块下。</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- layout example in head.swig --&gt;</span></span><br><span class="line">{% if theme.google_site_verification %}</span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"google-site-verification"</span> <span class="attr">content</span>=<span class="string">"{{ theme.google_site_verification }}"</span> /&gt;</span></span><br><span class="line">{% endif %}</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-ad-client</span>=<span class="string">"ca-pub-612**56"</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">{% if theme.bing_site_verification %}</span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"msvalidate.01"</span> <span class="attr">content</span>=<span class="string">"{{ theme.bing_site_verification }}"</span> /&gt;</span></span><br><span class="line">{% endif %}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>在你添加完成之后，在 google AdSense 上点击确认，谷歌会到你的网站上进行核查和验收。</li>
<li>博主是 2020.02.05 上午申请，2020.02.06 上午收到申请通过的邮件。</li>
</ul>
<p><img data-src="https://www.yanlongwang.net/downloads/images/blog/AdSense_check_pass.jpg" alt=""></p>
<h1>配置广告位</h1>
<p>在收到审核通过的邮件后，可以登录 google AdSense 在自己的网站上进行广告位置的筛选和设计了，目前 google AdSense 主要提供了自动广告和广告单元两种形式的广告添加方式。</p>
<h2 id="自动广告">自动广告</h2>
<p>自动广告是 google AdSense 近来提供的一种广告形式，它能够通过分析你的博客布局结构，自定义的在你的网站中插入合适的广告，无论是内容，还是广告尺寸，都是完全契合网站内容本身的，算是一种比较高质量的广告。</p>
<p>打开 AdSense 首页，然后转到广告。您可以在概览中为各个网站设置自动广告。</p>
<p>如果您的网站已经启用自动广告，在审核通过的几个小时内，您便会在网站上看到相关的广告，并开始累积收入 (之前插入的检验代码，接入了 google AdSense 的自动广告)。</p>
<p><img data-src="https://www.yanlongwang.net/downloads/images/blog/AdSense_Autonomous_Ads.jpg" alt=""></p>
<p>这种广告投放的几率比较小，在 PC 端效率比较低，如果你的网站支持移动端查看的话，会自动投放移动端自适应的广告。</p>
<h2 id="广告单元">广告单元</h2>
<p>为了能够最高效的利用自己博客的广告位，AdSense 提供了三种固定广告位。</p>
<ul>
<li>文字广告和展示广告 (即侧边栏，评论区之类的固定广告位)</li>
<li> 信息流广告 (插入在信息流内容的广告位置)</li>
<li> 文章内嵌广告 (主要是插入在每篇文章内部的开始，中间，结尾部分，展示次数比较多，强烈推荐)</li>
</ul>
<p><img data-src="https://www.yanlongwang.net/downloads/images/blog/AdSense_blocks.jpg" alt=""></p>
<p>由于本人的是博客网站，所以第二种信息流广告没有投入使用，第三种影响阅读体验，所以博主现在主要采用第一种方式，在侧边栏展示广告。</p>
<p>具体的操作流程是，在网站上，选择广告单元 -&gt; 新建广告位 -&gt; 选择对应的广告类型 -&gt; 生成对应的广告代码。</p>
<h3 id="广告单元插入">广告单元插入</h3>
<p>博主启用了自动广告，广告单元仅使用了第一种方式，在网站的侧边栏和评论区展示广告，但下面会提供几种针对 Hexo 的 Next Theme 广告单元代码位置的插入。</p>
<h4 id="插入评论区">插入评论区</h4>
<p>将广告单元生成的广告代码插入 \themes\next\layout_partials\comments.swig 中的末尾即可。</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  {% elseif theme.valine.appid and theme.valine.appkey %}</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comments"</span> <span class="attr">id</span>=<span class="string">"comments"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  {% endif %}</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Insert google ad blocks --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Comment_Below --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ins</span> <span class="attr">class</span>=<span class="string">"adsbygoogle"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">style</span>=<span class="string">"display:block"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-client</span>=<span class="string">"ca-pub-61***56"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-slot</span>=<span class="string">"83***73"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-format</span>=<span class="string">"auto"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-full-width-responsive</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">     (adsbygoogle = <span class="variable language_">window</span>.<span class="property">adsbygoogle</span> || []).<span class="title function_">push</span>({});</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">{% endif %}</span><br></pre></td></tr></tbody></table></figure>
<h4 id="插入侧边栏">插入侧边栏</h4>
<p>将代码插入 \themes\next\layout\_macro\sidebar.swig 文件中</p><div class="”sidebar-inner”"> </div>的最下侧。<p></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">      {% if theme.sidebar.b2t %}</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"back-to-top"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-arrow-up"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">          {% if theme.sidebar.scrollpercent %}</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"scrollpercent"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span>%<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          {% endif %}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      {% endif %}</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Insert google ad blocks --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Comment_Below --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ins</span> <span class="attr">class</span>=<span class="string">"adsbygoogle"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">style</span>=<span class="string">"display:block"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-client</span>=<span class="string">"ca-pub-6129496365361356"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-slot</span>=<span class="string">"8323610673"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-format</span>=<span class="string">"auto"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-full-width-responsive</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">     (adsbygoogle = <span class="variable language_">window</span>.<span class="property">adsbygoogle</span> || []).<span class="title function_">push</span>({});</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">{% endmacro %}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h4 id="插入文章头部">插入文章头部</h4>
<p>在 \themes\next\layout\_custom\ 目录下，新建 google_adsense.swig，并将 AdSense 提供的广告代码放入其中，然后将</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% include '../_custom/google_adsense.swig' %}</span><br></pre></td></tr></tbody></table></figure>
<p>插入到 \themes\next\layout\_macro\post.swig  文件中。</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">        {% else %}</span><br><span class="line">          {% if post.type === 'picture' %}</span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"{{ url_for(post.path) }}"</span>&gt;</span>{{ post.content }}<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          {% else %}</span><br><span class="line">            {{ post.content }}</span><br><span class="line">          {% endif %}</span><br><span class="line">        {% endif %}</span><br><span class="line">      {% else %}</span><br><span class="line"><span class="comment">&lt;!-- Insert google ad blocks --&gt;</span></span><br><span class="line">        {% include '../_custom/google_adsense.swig' %}</span><br><span class="line"></span><br><span class="line">        {{ post.content }}</span><br><span class="line">      {% endif  %}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    {#####################}</span><br><span class="line">    {### END POST BODY ###}</span><br><span class="line">    {#####################}</span><br></pre></td></tr></tbody></table></figure>
<p><strong>我不建议在一个网页中布置多个广告，广告内容雷同，会严重影响用户阅读体验。在页面的侧边布置一个广告，难道不香吗？</strong></p>
<h1>注意事项</h1>
<p>在成功接入 AdSense 后，google 会根据几种方式和数据判断广告点击是否作弊，从而注销你的账号，所以不要心存侥幸心理，好好发原创文章，提高网站的质量才是王道。</p>
<ul>
<li>作弊广告点击者的 IP 地址与你 Adsense 账户登录 IP 地址相同</li>
<li>作弊广告点击的 CTR 数据太高</li>
<li>作弊广告点击者的 IP 地址来自同一个地理区域</li>
<li>根据 Cookies 判断作弊 Adsense 广告点击</li>
<li>作弊广告点击者页面停留时间太短</li>
<li>直接访问者的广告点击率过高</li>
<li>流量小但广告点击率高</li>
<li>在网页上用文字提示请求鼓动点击广告</li>
</ul>
<!--
copy from [hexo个人next主题博客接入谷歌广告](http://www.darylliu.cn/archives/6a1f6623.html)
-->
<h1>Last but not least</h1>
<p>现在通过 AdSense 能赚到的收入本身并不高，尤其是博客类的网站更是如此，但在有空余的地方放置一点广告还是能起到丰富博客的作用。</p>
<p>既然大家愿意花时间和精力去搭建个人博客，除了钱以外，肯定还有其他的目的，希望大家不忘初心，更不要舍本逐末，忘记了自己搭建博客的初衷，毕竟广告收入这个事情，有当然好，没有也不用气馁，尽力就好～</p>
<h1>References</h1>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.darylliu.cn/archives/6a1f6623.html">hexo 个人 next 主题博客接入谷歌广告</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5c95d230e51d45124e35cef6">hexo 博客 next 主题添加 google adsense (亲测可用)</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/stormdony/article/details/85608944">Hexo 接入 Google adsense 广告</a></li>
</ul>
<hr>
<p>坚持原创技术分享，您的支持将鼓励我继续创作！</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/USV/colregs-paper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/USV/colregs-paper/" class="post-title-link" itemprop="url">A COLREGs-based obstacle avoidance approach for unmanned surface vehicles</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-02 22:15:10" itemprop="dateCreated datePublished" datetime="2020-02-02T22:15:10+08:00">2020-02-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/USV/" itemprop="url" rel="index"><span itemprop="name">USV</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>973</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>4 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <!--2019-10-22 22:15:10-->
<p>[toc]</p>
<p>  Unmanned surface vehicles (USVs) are autonomous marine vessels that can execute multiple tasks in a variety of cluttered marine environments without human supervision. The future progress of USVs depends on the development of full autonomy, which would enable USVs to work in any unstructured or unpredictable environment without human intervention.<br>
  One of the main challenges in enhancing USV autonomy is the simultaneous detection and avoidance of obstacles in either open or confined waters. Local obstacle avoidance for USVs is used to avoid static and dynamic obstacles by adopting a timely avoidance manoeuvre. Local obstacle avoidance algorithms are of two types: path searching-based local path planning, which can generate appropriate trajectories or waypoints followed by the vehicle, and the behaviour-based reactive obstacle avoidance method, which can generate the guidance angle and guidance velocity realized by the navigation controller in real time.<br>
  A novel path searching-based algorithm called the local normal distribution-based trajectory (LNDT) is proposed in this paper to address the local obstacle avoidance problem of USVs in complicated encounter situations. The design and implementation of LNDT has been published in <a target="_blank" rel="noopener" href="https://www.sciencedirect.com/journal/ocean-engineering">Ocean Engineering</a> with <a target="_blank" rel="noopener" href="https://www.sciencedirect.com/science/article/pii/S0029801818317475?via%3Dihub">reference link</a>. Besides, there is <a target="_blank" rel="noopener" href="https://www.yanlongwang.net/download/papers/A_COLREGs-based_obstacle_avoidance_approach_for_unmanned_surface_vehicles.pdf">a copy</a> only for personal research purpose.<br>
  The following sections mainly discuss the implementation principle of the algorithm and provide some critical information to facilitate the following researchers. About the detailed information, you can refer my master thesis - <a target="_blank" rel="noopener" href="https://www.yanlongwang.net/download/papers/Research_on_the_Technology_of_Path_Planning_for_Unmanned_Surface_Vehicle.pdf">Research on the Technology of Path Planning for Unmanned Surface Vehicle</a>, while it is written in Chinese. The LNDS method is mainly extracted from my master thesis and polished in simulation.</p>
<h1>Abstract</h1>
<p>英文在中文之后 / English follows Chinese<br>
  本文讲述了一种新型的、遵守 COLREGs 规则的无人水面艇 (USV) 自动避障方法的初步研究结果。这个方法本质上是一种基于路径搜索的算法，称为局部正态分布轨迹法，该算法可以在存在静态和动态障碍物的情况下规划出可行的避障轨迹。算法可以根据正态分布的钟形曲线生成符合 COLREGs 的次优轨迹，并提取航路点以供导航控制器安全操纵 USV。此外，我们讨论了构成钟形曲线的三个关键参数，并提出了一种轨迹重新规划策略，以提高该方法的安全性和灵活性。我们在实验中模拟了常见的超车、交叉和正面碰撞情况来验证算法，仿真表明该方法考虑了多个因素，可以规划出能够安全、平滑地避开障碍物的路径。此外，该方法还和另一种遵守 COLREGs 规则的反应式避障方法做了比较。<br>
  This paper reports the preliminary research results of a novel automatic obstacle avoidance approach based on the COLREGs for unmanned surface vehicles (USVs). The approach presented is essentially a path searching-based algorithm called the local normal distribution-based trajectory, which plans viable avoidance trajectories in the presence of both static and dynamic obstacles. The proposed algorithm can generate a COLREGs-compliant suboptimal trajectory based on the bell-shaped curve of normal distribution and extract waypoints for the navigation controller to steer USVs safely. In addition, we discuss three key parameters and present a trajectory replanning strategy to improve the safety and flexibility of our approach. The common overtaking, crossing and head-on collision scenarios are each simulated in experiments. It is shown through simulations that the proposed approach considers multiple factors and can plan paths to avoid obstacles safely and smoothly. A comparison is also made with a reactive path planning algorithm which has been modified to follow the COLREGs.</p>
<h1>Design and Implementation</h1>
<p>  The overall scheme of obstacle avoidance is illustrated in following figure. The decision-making module in the dashed frame includes a two-layered distributed architecture of obstacle avoidance; we primarily study the COLREGs-based obstacle avoidance approach.</p>
<p><img data-src="https://www.yanlongwang.net/downloads/images/science/LNDT_Architecture.png" alt=""></p>
<p>  The LNDT algorithm includes six processes, as shown below. We first integrates COLREGs rules into the obstacle avoidance approach of USVs. When there is a collision risk, it would determine three key parameters of the trajectory by a fixed procedure, and the primitive trajectory would be rotated and translated to adapt the real collision scenario. The USV then follows the planned trajectories. We would  replan the trajectory once USVs can not follow the planned trajectory.</p>
<p><img data-src="https://www.yanlongwang.net/downloads/images/blog/LNDT_Architecture.png" alt=""></p>
<p>  Besides, we propose a scalable and flexible obstacle avoidance architecture. And we proposes six evaluation indicators to establish a scientific and impartial obstacle avoidance behaviour assessment (OABA) method in this paper.</p>
<h1>Others</h1>
<p>  The LNDT algorithm is mainly implemented in 2018, and it has not been tested in complex sea trial, so there must be some drawbacks to improve.<br>
  In order to put it into wide practice, I’m glad to discuss some topics with you via email and polish this method, even share part of the source code with you.</p>
<!--
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[LNDT] -- &gt;B(Integrate COLREGs Rules)</span><br><span class="line">B -- &gt; C(Check Collision Risk)</span><br><span class="line">C -- &gt; D(Determine Key Parameters)</span><br><span class="line">D -- &gt; E(Trajectory Rotation &amp; Translation)</span><br><span class="line">E -- &gt; F(USV Follows Trajectory)</span><br><span class="line">F -- &gt; G(Replan Trajectory)</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
-->
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/USV/Global-path-planning-based-on-electronic-chart/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/USV/Global-path-planning-based-on-electronic-chart/" class="post-title-link" itemprop="url">Research and Implementation of Global Path Planning for Unmanned Surface Vehicle Based on Electronic Chart</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-01 23:56:31" itemprop="dateCreated datePublished" datetime="2020-02-01T23:56:31+08:00">2020-02-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/USV/" itemprop="url" rel="index"><span itemprop="name">USV</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.6k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>6 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <!--2019-03-12 23:56:31-->
<h1>基于电子海图的水面无人艇全局路径规划</h1>
<p>该论文已经在 ICMIR2017 会议上发表，附上 springer 的文献地址 <a target="_blank" rel="noopener" href="https://link.springer.com/chapter/10.1007/978-3-319-65978-7_80#citeas">Research and Implementation of Global Path Planning for Unmanned Surface Vehicle Based on Electronic Chart</a>，以及 arXiv 上的 <a target="_blank" rel="noopener" href="http://arxiv.org/abs/1802.03221">文献地址</a>。本文接下来主要对论文的实现原理进行分析，在最后给出程序代码，方便后来者研究和参考。</p>
<h1>摘要</h1>
<p>英文在中文之后 / English follows Chinese</p>
<p>水面无人艇 (Unmanned Surface Vehicles, USVs) 是一种新型的水面智能载具，其中全局路径规划是 USV 研究的关键技术，它可以反映出 USV 的智能程度。为了解决 USV 的全局路径规划问题，本文基于电子海图提出航行代价寻优 (sailing cost optimization) 的改进 A * 算法。我们使用 S-57 电子海图实现八叉树网格的环境模型建立，并基于航行安全权重、引导量和路径曲线平滑处理，提出优化的 A * 算法来实现规划路径航行安全，减少规划时间，提高路径平滑度。仿真结果表明，环境建模方法和改进 A * 算法可以规划出安全合理的全局路径。</p>
<p>Unmanned Surface Vehicle (USV) is a new type of intelligent surface boat, and global path planning is the key technology of USV research, which can reflect the intelligent level of USV. In order to solve the problem of global path planning of USV, this paper proposes an improved A* algorithm for sailing cost optimization based on electronic chart. This paper uses the S-57 electronic chart to realize the establishment of the octree grid environment model, and proposes an improved A* algorithm based on sailing safety weight, pilot quantity and path curve smoothing to ensure the safety of the route, reduce the planning time, and improve path smoothness. The simulation results show that the environmental model construction method and the improved A* algorithm can generate safe and reasonable global path.</p>
<h1>论文实现原理</h1>
<p>水面无人艇的全局路径规划，是指在存在障碍物的复杂环境下，给定起始点和目标点，根据任务要求自主规划出一条能够安全避开环境中静态障碍物的最优路径。</p>
<p>本文提出基于电子海图的 USV 全局路径规划方案，分为电子海图解析、全局环境模型建立和路径搜索算法三部分。通过解析电子海图文件，提取其中的海域地理信息及碍航物等信息，将海图信息渲染成为自主航路规划系统能够识别的信息模式，建立由可航行网格和不可航行网格组成的环境模型。在此基础上，本文综合考虑航行安全性、航行距离、路径平滑度等因素，采用基于航行代价寻优的改进 A * 算法来搜索环境模型中的最优路径，实现水面无人艇的全局航路自主规划，提高水面无人艇的自主决策能力和智能化水平。</p>
<img data-src="http://www.waylon.one/downloads/images/blog/ICMIR_Struct.png" width="600" height="120">
<p>水面无人艇全局路径规划系统无法直接利用电子海图进行自主路径规划，所以需要研究矢量电子海图 S-57 数据结构，提取出全局路径规划需要的海洋环境信息，裁剪无关数据，将电子海图转换为全局航路规划系统能够直接使用的信息。其中，利用开源的 TinyXML 库保存到 xml 文件中，供路径规划系统的后续分析和处理。</p>
<p>在提取得到电子海图 xml 文件后，通过网格化的方法把感兴趣区域划分为若干块大小相等的矩形网格，然后利用 Shapely 开源地理库依次判断网格中是否存在从电子海图中解析的静态障碍物（如陆地、海岛、浅滩），从而将网格环境地图划分为可航区域和不可航区域。</p>
<p>在实现环境建模后，全局路径搜索算法优化的目标是在确保航行安全性的前提下，尽可能使规划的路径航行代价最小，最大程度地减小与最短路径、最小航行代价无关的计算量。其中，Hart 等使用启发式函数来评估从初始点到目标点的代价，在 Dijkstra 算法基础上，结合启发式函数形成新的路径搜索策略–A * 算法，通过减少搜索空间来提高搜索效率，所以更适合网格情形下的全局路径规划。本文对传统的 A * 算法进行改进，实现全局路径的初步搜索。</p>
<p>网格环境下，如果直接把 A * 算法搜索得到的节点顺序连接起来作为水面无人艇的全局规划路径，通常会出现阶梯或者锯齿状路径的情况，很明显规划的路径并不是两点间的期望路径。所以，本文提出去除多余航点的曲线平滑算法，在保证安全的前提下减少路径中不必要的航点，使多段折线化为直线，增加路径的光滑度，规划的路径会更加符合起止点之间的期望路径，符合水面无人艇的运动学特性。</p>
<h1>实现程序</h1>
<p>因为程序是 2017 年 4 月份实现的，仍然不够完善，可能存在 bug 或者性能优化点，欢迎交流和改善。程序最新代码请参考本人 github  <a target="_blank" rel="noopener" href="https://github.com/wylloong">wylloong</a>。</p>
<h2 id="电子海图解析">电子海图解析</h2>
<p>S-57 电子海图解析中，本文在之前文章中已经进行详细的分析和讲解，并给出源代码，可以参见 <a target="_blank" rel="noopener" href="https://github.com/wylloong/S57-Electronic-Chart-Reading-and-Storing">S57-Electronic-Chart-Reading-and-Storing</a> 和 <a href="http://www.waylon.one/USV/ENC-analysis-store/">基于 8211lib 库对 s57 电子海图的解析和存储</a>。</p>
<h2 id="建立环境模型">建立环境模型</h2>
<p>该部分代码可详见 github <a target="_blank" rel="noopener" href="https://github.com/wylloong/GlobalPathPlanningforUSV/blob/master/GlobalEnviStructWithSquare.py">GlobalEnviStructWithSquare</a>，如有需要请备份，可能后期会删除掉部分程序。</p>
<h3 id="改进A-算法和路径平滑处理">改进 A * 算法和路径平滑处理</h3>
<p>该部分代码可详见 github <a target="_blank" rel="noopener" href="https://github.com/wylloong/GlobalPathPlanningforUSV/blob/master/GlobalPathPlanWithSquare.py">GlobalPathPlanWithSquare</a>，如有需要请备份，可能后期会删除掉部分程序。</p>
<h2 id="程序示例">程序示例</h2>
<p>程序的全局路径规划示意图如下所示：</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/ICMIR2017.png" alt=""></p>
<p>Note: It’s been years since I last wrote electronic chart, all examples may not be syntactically valid but the idea should be correct.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/USV/IJVAS-USV-GlobalPathPlanning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/USV/IJVAS-USV-GlobalPathPlanning/" class="post-title-link" itemprop="url">Global Path Planning for Unmanned Surface Vehicle among Multiple Task Points</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-01 16:33:21" itemprop="dateCreated datePublished" datetime="2020-02-01T16:33:21+08:00">2020-02-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/USV/" itemprop="url" rel="index"><span itemprop="name">USV</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.6k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>6 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <!--2019-10-20 16:33:21-->
<p>[toc]</p>
<h1>背景</h1>
<p>  针对多任务点的全局路径规划，是指在存在静态障碍物的环境中，给定水面无人艇起始点、目标点以及多个任务点的情况下，设计从起始点出发，安全地遍历各个任务点，最终返回目标点的全局路径，要求行驶的航路代价总和最小。</p>
<p>多平台维护不易，最新文章更新于 <a href="http://www.waylon.one/USV/IJVAS-USV-GlobalPathPlanning/">个人网站</a>，欢迎访问和留言。</p>
<p>  本文主要解决水面无人艇在对多个任务点进行全局路径规划时的设计和实现算方法，相关研究和设计已在 <a target="_blank" rel="noopener" href="http://www.inderscience.com/jhome.php?jcode=ijvas">International Journal of Vehicle Autonomous Systems (IJVAS)</a> EI 期刊发表。附 InderScience Publiers - IJVAS 的官方文献下载链接 <a target="_blank" rel="noopener" href="http://www.inderscience.com/offer.php?id=93119">Design and Implementation of Global Path Planning System for Unmanned Surface Vehicle among Multiple Task Points</a>，以及 arXiv 的<a target="_blank" rel="noopener" href="http://arxiv.org/abs/1807.08106">下载链接</a>。官方文献下载链接需要科学上网才可以打开。<br>
  本文主要讨论论文的实现原理，并给出部分程序源代码，方便后来者研究和参考。</p>
<h1>摘要</h1>
<p>英文在中文之后 / English follows Chinese<br>
  全局路径规划是水面无人艇设计的关键技术之一。本文基于电子海图和六边形网格建立全局环境模型，并且证明六边形网格在有效性，安全性和快速性方面优于传统的正方形网格。此外，本文引入 Cube 坐标系来简化六边形坐标运算。进一步地，我们提出了一种改进的 A * 算法来实现两点之间的路径规划。在此基础上，我们构建了多个任务点的全局路径规划模型，并提出了一种改进的蚁群优化算法来准确实现多任务点的全局路径规划。仿真结果表明，全局路径规划系统可以安全、快速地规划出多个任务点的最优路径，在安全性，快速性和路径长度方面均优于传统方法。此外，全局规划路径可直接用于 USV 的实际场景。<br>
  Global path planning is the key technology in the design of unmanned surface vehicles. This paper establishes global environment modelling based on electronic charts and hexagonal grids which are proved to be better than square grids in validity, safety and rapidity. Besides, we introduce Cube coordinate system to simplify hexagonal algorithms. Furthermore, we propose an improved A* algorithm to realize the path planning between two points. Based on that, we build the global path planning modelling for multiple task points and present an improved ant colony optimization to realize it accurately. The simulation results show that the global path planning system can plan an optimal path to tour multiple task points safely and quickly, which is superior to traditional methods in safety, rapidity and path length. Besides, the planned path can directly apply to actual applications of USVs.</p>
<h1>论文实现原理</h1>
<p>  本文提出的多任务点全局路径规划算法主要分为电子海图解析、六边形网格化建模、两点间路径搜索、多任务点的路径规划四部分。</p>
<img data-src="http://www.waylon.one/downloads/images/blog/IJVAS_Struct.png" width="600" height="120">
<p>  其中，通过解析电子海图文件，提取其中的海域地理信息及碍航物等信息，利用六边形进行网格化，建立由可航行六边形网格和不可航行六边形网格组成的环境模型。相关资料可以参考 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/DHUtoBUAA/p/6506906.html">基于 8211lib 库对 s57 电子海图的解析和存储</a> 和  <a target="_blank" rel="noopener" href="https://www.cnblogs.com/DHUtoBUAA/p/7192315.html">正六边形网格化 (Hexagonal Grids) 原理与实现</a>。<br>
  在实现环境建模后，两点间路径搜索算法优化的目标是在确保航行安全性的前提下，尽可能使规划的路径航行代价最小，最大程度地减小与最短路径、最小航行代价无关的计算量。本文设计综合多因素的航行代价，利用 Hart 提出的 A * 算法实现两点间的初步搜索，然后利用去除多余航点的曲线平滑算法，在保证安全的前提下减少路径中不必要的航点，使多段折线化为直线，增加路径的光滑度，规划的路径会更加符合起止点之间的期望路径，符合水面无人艇的运动学特性。相关资料可以参考 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/DHUtoBUAA/p/8443815.html">Research and Implementation of Global Path Planning for Unmanned Surface Vehicle Based on Electronic Chart</a> 论文。<br>
  在多任务点设计中，本文分析了港口巡逻、水质采样、水文勘测等任务对于全局路径规划的具体要求，从中抽象出针对这些任务通用的路径规划需求：在存在障碍物的海洋环境中，在给定多个任务点坐标的情形下，要求水面无人艇从起始点出发，安全地巡行到各个任务点执行具体的任务，再返回到目标点，要求总体的航路代价和最小。如在水质采样中，航路任务要求水面无人艇从固定点出发，根据设定路线行驶到各个采样点，根据采样要求完成全自动采集水样后，返回到目标点进行下一步处理，该航路任务要求完全符合本文抽象出来的全局路径规划要求。<br>
  在水面无人艇复杂任务应用场景下，多任务点的路径规划可以抽象为网络最短路径问题，该网络本质上是一个有权值的有向图。多任务点的全局路径规划抽象模型–网络最短路径问题，可以近似为旅行商问题 (Traveling Salesman Problem, TSP)，是非常典型的 NP (Nondeterministic Polynomial) 难问题。在应用蚁群算法解决多任务点的全局路径规划问题时，路径规划问题可以转化为在一个由节点和边组成的网络权重图（网络最短路径模型）中搜索最优闭环路径，如下图所示。相关资料可以参考 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/DHUtoBUAA/p/8478671.html">基于蚁群算法的机械臂打孔路径规划</a>。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/ant_graph.png" alt=""></p>
<h1>实现程序</h1>
<p>  因为程序实现于 2017 年，在性能和流程中仍然不够完善，欢迎邮件进行交流和给出建议。程序最新代码请参考本人的 GitHub <a target="_blank" rel="noopener" href="https://github.com/wylloong">wylloong</a>。<br>
  程序运行结果如下，其中黑点为任务点，红色线段为最后规划的全局路径。</p>
<p><img data-src="http://www.waylon.one/downloads/images/science/USV_Global_Path_Planning_Multiple_points.png" alt="程序运行结果"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nobody</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">261k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">15:51</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6129496365361356"
     crossorigin="anonymous"></script>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"waylondotone/blog_comment","issue_term":"pathname","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
