<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="deskxpDjduMieHbS">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.waylon.one","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":5,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="sharing daily progress and life">
<meta property="og:type" content="website">
<meta property="og:title" content="One&#39;s Way">
<meta property="og:url" content="http://www.waylon.one/page/3/index.html">
<meta property="og:site_name" content="One&#39;s Way">
<meta property="og:description" content="sharing daily progress and life">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Autonomous Driving &amp; Robotic">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://www.waylon.one/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>One's Way</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">One's Way</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">sharing daily progress and life</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">96</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/waylondotone" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;waylondotone" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Robotics/Kalman-filter-basic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Robotics/Kalman-filter-basic/" class="post-title-link" itemprop="url">Kalman_filter_basic</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-29 07:18:57" itemprop="dateCreated datePublished" datetime="2021-03-29T07:18:57+08:00">2021-03-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Robotics/" itemprop="url" rel="index"><span itemprop="name">Robotics</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.3k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>5 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<ul>
<li>周末查看其它资料做了解</li>
</ul>
<p>卡尔曼滤波 (Kalman filter) 是在存在不确定下做信息融合 (combining
information) 的通用工具。</p>
<blockquote>
<p>It is such a general and powerful tool for combining information in
the presence of uncertainty.</p>
</blockquote>
<h1 id="what-is-it">What is it?</h1>
<p>You can use a Kalman filter in any place where you have
<strong>uncertain information</strong> about some dynamic system, and
you can make an <strong>educated guess</strong> about what the system is
going to do next.</p>
<h2 id="卡尔曼滤波的优点">卡尔曼滤波的优点</h2>
<p>卡尔曼滤波适用于连续变化 (continuously changing)
的系统，具有占用内存空间小（除了前一个状态量外，无需保留其他历史数据），处理速度快的特点，适合应用于实时问题和嵌入式系统。</p>
<blockquote>
<p>Kalman filters are ideal for systems which are continuously changing.
They have the advantage that they are light on memory (they don’t need
to keep any history other than the previous state), and they are very
fast, making them well suited for real time problems and embedded
systems.</p>
</blockquote>
<h1 id="what-can-we-do-with-a-kalman-filter">What can we do with a
Kalman filter?</h1>
<p>卡尔曼的一个应用举例：测量坦克的油量，汽车引擎的温度，用户在触摸板上的手指位置，甚至所有你可以跟踪
(track)
的物体。概括的讲，只要用 “跟踪” 这个词来形容的算法，即 tracking、Tracker 等这种词描述的算法，基本都要用 kalman 滤波处理下数据。</p>
<blockquote>
<p>It could be data about the amount of fluid in a tank, the temperature
of a car engine, the position of a user’s finger on a touchpad, or any
number of things you need to keep track of.</p>
</blockquote>
<h1 id="how-a-kalman-filter-sees-your-problem">How a Kalman filter sees
your problem</h1>
<p>The Kalman filter assumes that both variables are random and Gaussian
distributed. Each variable has a mean value 𝜇, which is the center of
the random distribution (and its most likely state), and a variance 𝜎2,
which is the uncertainty.</p>
<figure>
<img data-src="https://note.youdao.com/src/WEBRESOURCE46298a0ddeb2a342957c6f2da3a270c0" alt="截屏2021-03-23 下午8.36.39.png">
<figcaption aria-hidden="true">截屏 2021-03-23
下午 8.36.39.png</figcaption>
</figure>
<p>从参数之间的关联发掘更多信息：比如机器人的速度和位置，如果速度快，那么位置可能就比较远。</p>
<p>This kind of relationship is really important to keep track of,
because it gives us more information: <strong>One measurement tells us
something about what the others could be</strong>. And that’s the goal
of the Kalman filter, we want to squeeze as much information from our
uncertain measurements as we possibly can!</p>
<p>参数之间的相关性，可以用协方差矩阵 (covariance matrix)
来表示，即矩阵中的每个元素 ∑ij 表示第 i 个和第 j
个状态变量之间的相关度。注意，协方差矩阵是一个对称矩阵，这意味着可以任意交换
i 和 j。</p>
<blockquote>
<p>This correlation is captured by something called a covariance
matrix.</p>
</blockquote>
<h1 id="describing-the-problem-with-matrices">Describing the problem
with matrices</h1>
<p>We need some way to look at the current state (at time k-1) and
predict the next state at time k. We can represent this prediction step
with a <strong>prediction matrix</strong>, Fk.</p>
<p>请注意，预测矩阵要求严格反映运动的特征，要求预测准确，不能模糊。</p>
<p>For <strong>prediction matrix</strong>, it takes every point in our
original estimate and moves it to a new predicted location, which is
<strong>where the system would move if that original estimate was the
right one</strong>.</p>
<figure>
<img data-src="" alt="图片">
<figcaption aria-hidden="true">图片</figcaption>
</figure>
<p>不太理解这个公示是如何推导出来的，数学的理论知识不够踏实。</p>
<figure>
<img data-src="https://note.youdao.com/src/WEBRESOURCEc20ab959f47d05d994f3ad7065fd17aa" alt="screen shot 2021-03-24 at 20.14.01.png">
<figcaption aria-hidden="true">screen shot 2021-03-24 at
20.14.01.png</figcaption>
</figure>
<h1 id="external-influence">External influence</h1>
<p>外部系统的影响</p>
<blockquote>
<p>There might be some changes that aren’t related to the state itself —
the outside world could be affecting the system.</p>
</blockquote>
<ul>
<li>control matrix</li>
<li>control vector</li>
</ul>
<h1 id="external-uncertainty">External uncertainty</h1>
<p>Everything is fine if the state evolves based on its own properties.
Everything is still fine if the state evolves based on external forces,
so long as we know what those external forces are.</p>
<p>如何应对外界的不确定性，比如四旋翼控制中的风影响。</p>
<blockquote>
<p>We can model the uncertainty associated with the “world” (i.e. things
we aren’t keeping track of) by adding some new uncertainty after every
prediction step * Every state in our original estimate could have moved
to a range of states.</p>
</blockquote>
<p>图片讲解</p>
<p>In other words, the new best estimate is a prediction made from
previous best estimate, plus a correction for known external
influences.</p>
<p>And the new uncertainty is predicted from the old uncertainty, with
some additional uncertainty from the environment.</p>
<h1 id="refining-the-estimate-with-measurements">Refining the estimate
with measurements</h1>
<p>We might have several sensors which give us information about the
state of our system.</p>
<p>Each sensor tells us something indirect about the state— in other
words, the sensors operate on a state and produce a set of readings.</p>
<p>The units and scale of the reading might not be the same as the units
and scale of the state we’re keeping track of. You might be able to
guess where this is going: We’ll model the sensors with a matrix.</p>
<p>卡尔曼滤波的精妙处：</p>
<p>One thing that Kalman filters are great for is dealing with sensor
noise. In other words, our sensors are at least somewhat unreliable, and
every state in our original estimate might result in a range of sensor
readings.</p>
<p>From each reading we observe, we might guess that our system was in a
particular state. But because there is uncertainty, <strong>some states
are more likely than others</strong> to have have produced the reading
we saw.</p>
<p>We have two Gaussian blobs: One surrounding the mean of our
transformed prediction, and one surrounding the actual sensor reading we
got.</p>
<p>配图</p>
<p>We must try to reconcile our guess about the readings we’d see based
on the predicted state (pink) with a different guess based on our sensor
readings (green) that we actually observed.</p>
<p>If we have two probabilities and we want to know the chance that both
are true, we just multiply them together.</p>
<p>The mean of this distribution is the configuration for which
<strong>both estimates are most likely</strong>, and is therefore the
<strong>best guess</strong> of the true configuration given all the
information we have.</p>
<h1 id="combining-gaussians">Combining Gaussians</h1>
<figure>
<img data-src="" alt="Kalman Filter Information Flow">
<figcaption aria-hidden="true">Kalman Filter Information
Flow</figcaption>
</figure>
<h1 id="wrapping-up">Wrapping up</h1>
<p>卡尔曼滤波用于线性系统，扩展卡尔曼滤波适用于非线性系统。</p>
<blockquote>
<p>This will allow you to model any <strong>linear system</strong>
accurately. For nonlinear systems, we use the <strong>extended Kalman
filter</strong>, which works by simply linearizing the predictions and
measurements about their mean.</p>
</blockquote>
<h1 id="references">References</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/">How
a Kalman filter works, in pictures</a>
<ul>
<li> 使用 chrome 打开有些公式显示是错误的，可以使用 safari
打开，公示显示正常。</li>
</ul></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/7XJvxPRCFhdUP15mo1b89A">一文详解卡尔曼滤波器的原理与应用</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/monthly-skills/rule-engine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/monthly-skills/rule-engine/" class="post-title-link" itemprop="url">手把手搭建业务规则引擎 (Rule Engine)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-02-28 11:40:04" itemprop="dateCreated datePublished" datetime="2021-02-28T11:40:04+08:00">2021-02-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/monthly-skills/" itemprop="url" rel="index"><span itemprop="name">monthly skills</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>8.2k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>30 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<h1 id="需求描述">需求描述</h1>
<p>作为开发人员，随着业务逻辑和功能需求的不断增加，我们经常需要维护一系列
IF...THEN...ELSE 或者 select-case 的业务逻辑 (business
rules)。这部分业务规则的不断扩充，会使得代码越来越凌乱和难以维护，逐渐变成开发人员的噩梦。</p>
<!--
Application logic, particularly business rules, can be messy and time consuming to maintain in code. If all your application logic is hard-coded, it can eventually lead to massive if-then-else or select-case code segments that could grow into huge nightmares. Developers have more important problems to solve and things to do than to maintain a mountain of string compares, boolean tests, or Stored Procedures. There have been numerous attempts at rules engines (a.k.a. "inference engines"), but many of them require the writing of even more cryptic looking code that is hard, if not impossible, for non-developers to maintain. De-coupling business logic from an application certainly makes for more robust and maintainable code, and provides you the ability to let non-developer subject matter experts maintain the data and rules model, provided it is logical and easy to understand. Of course, you can always link parts of your application data to a database, but that still requires a lot of developer work to define the data model and queries needed for every unique "rule-driven" event in your application, not to mention the possibility of database performance bottlenecks in a networked or limited resource environment. A table-based rules engine can be a very powerful and flexible solution for your application logic and automation needs. In a web environment, the Logician JavaScript libraries can also offload a lot of server CPU onto the user's browser and eliminate lagging server callbacks.
-->
<!--根据 [Declarative If Statements with a Simplified Rules Engine](https://www.fluentcpp.com/2019/01/18/a-simplified-rules-engine-to-make-declarative-if-statements/) 提供的案例，我们来感受下-->
<p>举个简单的例子来感受下程序员在面对繁杂规则下的无奈。</p>
<p>小王家的奶牛场新进一批次奶牛，有白奶牛，黑奶牛和斑点奶牛。小王邀请你写一段程序模块，预测下各种品种的奶牛喜欢到哪块地里吃草。我们这里假设奶牛的行为受到阳光，风，草品的影响。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Location moves_to(cow, env) {</span><br><span class="line">  if(cow.color()=="white") {</span><br><span class="line">    if(env.sunny() &amp;&amp; !env.storm()) {</span><br><span class="line">      // 白色牛奶喜欢在天气晴朗且没有大风的情况下去牧场吃草。</span><br><span class="line">      return pasture;</span><br><span class="line">    } else if(env.storm()) {</span><br><span class="line">      // 白色牛奶喜欢在暴风下去谷仓吃草。</span><br><span class="line">      return barn;</span><br><span class="line">    }</span><br><span class="line">  } else if(cow.color()=="black") {</span><br><span class="line">    ...</span><br><span class="line">  } else {</span><br><span class="line">    ...</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>上面是一段示例代码，可以看出来在只有 3
个变量（牛奶品种，阳光，风）的情况下，我们就需要写几十行的代码来实现功能。可以想象一下，在影响变量比较多的时候，业务逻辑和应用程序如果混在一起开发的话，那么开发者需要维护上百条甚至更多的
IF-statements
才可以应付。对开发人员而言，一方面这些代码没有技术含量，开发人员积极性差，另一方面频繁变更的业务需求也会带来维护，调试和测试成本的指数级增加。比如，为了找出一个业务逻辑中的问题，开发人员往往不得不遍历混在代码各处的
IF-statements 语句，效率低下且十分痛苦。</p>
<p>数以千计的业务逻辑在现实中非常常见，从<a href="">广告推送</a>，<a target="_blank" rel="noopener" href="https://www.mtyun.com/library/maze-framework">跑腿外卖</a>到<a href="">火箭发射</a>等应用中，都有数不清的业务逻辑代码，我们可以把这部分需求归结为以下几方面。</p>
<ul>
<li>市场需求，业务变更是不可避免的，通常伴随着业务规则会逐渐扩充，在产品后期会变的异常复杂，同时管理层对开发效率不会妥协。</li>
<li>市场要求，业务规则经常发生变化，系统必须能够依据业务规则的变化快速、低成本的更新。</li>
<li>程序 = 算法 + 数据结构，有些复杂的商业规则很难推导出算法和抽象出数据模型，甚至有些业务规则常常在需求阶段可能还没有明确，在设计和编码后还在变化。</li>
</ul>
<p>那么，问题来了，<strong>我们如何在大规模软件开发中，很好地维护数以千计的业务逻辑
(IF-statements) 呢</strong>？</p>
<!--

在这个痛苦面前，一种常见的做法是 **应用程序和业务逻辑解耦**，把这些业务逻辑放在中心数据库或其他统一的地方，由非开发人员根据业务场景，维护系统中的数据和编辑业务规则；在程序开发中，支持动态地管理和修改这部分规则，从而提供软件系统的可维护性和可扩展性。开发人员负责提高代码质量，提供应用程序和业务规则间的接口；非开发人员根据业务场景，维护系统中的数据和编辑业务规则。目前，实现这样的功能的程序，已经被开发成为规则引擎。

> De-coupling business logic from an application certainly makes for more robust and maintainable code, and provides you the ability to let non-developer subject matter experts maintain the data and rules model, provided it is logical and easy to understand.

-->
<!--
企业级管理者可能会在系统生产过程中调整生产策略、物料采购策略等，因此对企业IT系统的开发有着如下的要求：

为提高效率，管理流程必须自动化，即使现代商业规则异常复杂。
市场要求业务规则经常变化，IT系统必须依据业务规则的变化快速、低成本的更新。
为了快速、低成本的更新，业务人员应能直接管理IT系统中的规则，不需要程序开发人员参与。
而项目开发人员则碰到了以下问题:

程序=算法+数据结构，有些复杂的商业规则很难推导出算法和抽象出数据模型

对程序员来说，系统已经维护、更新困难，更不可能让业务人员来管理。
因此迫切需要分离商业决策者的商业决策逻辑和应用开发者的技术决策。把这些商业决策放在中心数据库或其他统一的地方，让它们能在运行时（即商务时间）可以动态地管理和修改从而提供软件系统的柔性和适应性。

在很多企业的 IT 业务系统中，经常会有大量的业务规则配置，而且随着企业管理者的决策变化，这些业务规则也会随之发生更改。为了适应这样的需求，我们的 IT 业务系统应该能快速且低成本的更新。适应这样的需求，一般的作法是将业务规则的配置单独拿出来，使之与业务系统保持低耦合。目前，实现这样的功能的程序，已经被开发成为规则引擎。

规则引擎是一种推理引擎，它是根据已有的事实，从规则知识库中匹配规则，并处理存在冲突的规则，执行最后筛选通过的规则。因此，规则引擎是人工智能（AI）研究领域的一部分，具有一定的选择判断性、人工智能性和富含知识性。目前，比较流行的规则引擎有商业规则引擎 iLog 和开源规则引擎 drools。本文将对开源规则引擎 drools 做详细介绍，并通过分析一个在汽车保险行业中的实际应用案例，让读者对开源规则流引擎有一个更深刻的理解。

规则引擎正是应用于上述动态环境中的一种解决方法。
-->
<h1 id="问题建模">问题建模</h1>
<p>我们首先把这类 IF-statements
问题进行特征提取和建模，看看这类问题有什么特点呢？</p>
<ul>
<li>业务决策 (decision) 受多个影响因素 (factor) 的影响；</li>
<li>业务决策和影响因素的关系是已知的，也就是说在影响因素状态确定的情况下，业务决策是唯一的。</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">decision = rule(factor1, factor2, …, factorn)</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>业务决策是前向的
(foreward-chaining)，不可逆。决策是基于规则来推导出来的，中间可能存在多个临时特征 (feature)，但是不支持从决策来推导特征和影响因素的状态。</li>
<li>用户往往只关心最终的决策，而不太在意从影响因素到决策的具体推理过程。假如我们将业务决策逻辑从系统逻辑中抽离出来，而只保留最后的决策接口给用户，并不会影响系统的正常运行和用户体验。</li>
</ul>
<p>在调研中，<strong>规则引擎 (rule engine)</strong> 和
<strong>有限状态机 (finite state machine)</strong>
很快就能进入你的思路。这两种做法能够很好地解决上述问题，可以从一系列的影响因素或者特征中，经过已有的规则运算，得到最终的决策。同时，这两种做法支持<strong>业务决策逻辑从系统逻辑中抽离
(decoupling)
出来</strong>，使两种逻辑可以独立于彼此而变化，可以明显降低维护成本，同时支持业务逻辑的快速更新。</p>
<h2 id="规则引擎-vs-有限状态机">规则引擎 vs 有限状态机</h2>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Business_rules_engine">规则引擎</a>
和 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Finite-state_machine">有限状态机</a>
的详细概念，大家可以点击链接自行阅读和理解。</p>
<h3 id="规则引擎">规则引擎</h3>
<!--
规则引擎由推理引擎发展而来，是一种嵌入在应用程序中的组件，实现了将业务决策从应用程序代码中分离出来，并使用预定义的语义模块编写业务决策。接受数据输入，解释业务规则，并根据业务规则做出业务决策。
-->
<p>规则引擎是一种推理引擎，它是根据已有的事实 (变量)，从规则库中匹配规则，处理存在冲突的规则，执行最后筛选通过的规则。</p>
<p>简而言之，可以理解为是把原本杂乱不堪的 IF-statements 拆成 N
条带优先级的 "if 前提语句 then 实施语句" 的句式。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 业务逻辑</span><br><span class="line">if...else if...else if...else</span><br><span class="line"></span><br><span class="line"># 规则引擎</span><br><span class="line">if rule1 then action1</span><br><span class="line">if rule2 then action2</span><br><span class="line">...</span><br><span class="line">if ruleN then actionN</span><br></pre></td></tr></tbody></table></figure>
<p>规则引擎通常主要使用 foreward-chaining 的 Rete
引擎，按优先级匹配条件语句，实施规则语句。规则实施后会触发事实的变化，引擎又会重新进行条件匹配，直到不能再匹配为止，Rete
算法从理论上保证了服从的最高。</p>
<h3 id="有限状态机简述">有限状态机简述</h3>
<p>通常 FSM
包含几个要素：状态管理、状态监控、状态触发、状态触发后引发的动作。这些关系的意思可以这样理解:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">State(S) x Event(E) -&gt; Actions (A) -&gt; State(S’)</span><br></pre></td></tr></tbody></table></figure>
<p>如果我们当前处于状态 S，那么发生了 E 事件， 我们应执行操作
A，状态就会转换为 S’。</p>
<p>规则引擎和有限状态机主要在触发条件，控制权，使用约束上不一样。</p>
<h4 id="触发条件区别">触发条件区别</h4>
<!--通常^[1]，规则引擎和有限状态机的主要区别在于焦点 (focus)。-->
<p>在规则引擎中，上一个规则完成时会自动转移到下一个规则，而状态机则需要一个外部事件
(external event)
的触发，该事件将导致状态转移到下一个。简而言之，状态机是事件驱动型的，而规则引擎却不是。</p>
<blockquote>
<p>In general, the major difference between a workflow engine and a
state machine lies in focus. In a workflow engine, transition to the
next step occurs when a previous action is completed, whilst a state
machine needs an external event that will cause branching to the next
activity. In other words, state machine is event driven and workflow
engine is not.</p>
</blockquote>
<h4 id="控制权区别">控制权区别</h4>
<p>规则引擎是可以预测的
(predictable)。系统可以根据我们在初始时提供的状态和规则来驱动流程
(process)
向前，<strong>规则控制着这个流程的发展</strong>。状态机恰恰相反，它是外部事件驱动着完成。即使我们已经定义好状态
(states) 和状态之间的转移条件 (transitions)，决策进展 (decision making
process) 也是由外部事件来决定的。虽然状态机遵循的结构仍然像工作流
(sequential workflow)，但是<strong>控制权传递给了外部环境</strong>。</p>
<!--
A state-machine workflow is the reverse. It is driven by external events to its completion. We define the states and required transitions between those states. The workflow sits and waits for an external event to occur before transitioning to one of the defined states. The decision making process happens externally outside of the workflow – there is a structure to be followed still like a sequential workflow but control is passed to its external environment.

There are two main forms of workflows: sequential and state-machine. Sequential workflows are predictable. They utilize the rules and conditions we provide at the beginning to progress a process forward. The workflow is in control of the process.

-->
<h4 id="使用约束">使用约束</h4>
<p>如果系统不是很复杂，那么状态机是一个很好的解决方案。如果能够绘制所有可能的状态以及触发事件，则可以使用状态机。通常，状态机可以很好地用于<strong>网络协议</strong>或某些<strong>嵌入式系统</strong>。</p>
<blockquote>
<p>State machine is a good solution if your system is not very complex.
You may implement it if you are capable of drawing all the possible
states as well as the events that will cause transitions to them. In
general, state machines work well for network protocols or some of the
embedded systems.</p>
</blockquote>
<p>规则引擎是管理业务流程的好方法，它是任务分配，CRM 和其他复杂系统的正确解决方案。最终目标是改善业务流程和公司效率，这就是为什么它非常适合业务流程自动化的原因。</p>
<blockquote>
<p>Workflow engine implementation is a good way of managing business
processes. It is the right solution for task allocation, CRM and other
complex systems. All in all, its ultimate goal is to improve business
processes and company’s efficiency. That is why it perfectly suits for
business process automation.</p>
</blockquote>
<p>结合上面的分析对比，在影响因素较多，且不需要外界事件触发的情况下，使用规则引擎达到业务规则和应用的低耦合，是目前解决业务规则不断繁重的解决方案，本文<strong>后面也主要讨论规则引擎相关的问题</strong>。</p>
<h1 id="规则引擎解决方案调研">规则引擎解决方案调研</h1>
<p>在解决问题之前，最好先做充分的调研，避免重复造轮子 (Reinventing the
wheel)。</p>
<p>规则引擎的概念最早由文章 <a target="_blank" rel="noopener" href="https://downloads.hindawi.com/journals/sp/1992/727852.pdf">A C++
Class for Rule-Base Objects</a> 提出，描述了在冬季高速公路养护 (winter
highway maintenance)
中的实际应用。现在看起来可能比较简单，但是放到上个世纪 90
年代，还是有新意的做法。</p>
<h2 id="规则引擎的使用方法">规则引擎的使用方法</h2>
<p>规则引擎是一种嵌套在应用程序中的组件，它实现了将业务规则从应用程序代码中分离出来。规则引擎使用特定的语法编写业务规则，规则引擎可以接受数据输入、解释业务规则、并根据业务规则做出相应的决策。</p>
<p>通俗来说，规则引擎就是负责执行系统中规则的插件，亦可以作为一个远程系统供业务系统调用。</p>
<figure>
<img data-src="/downloads/images/rule_engine_struct.jpg" alt="规则引擎示意图">
<figcaption aria-hidden="true">规则引擎示意图</figcaption>
</figure>
<p>引入规则引擎后带来的好处：</p>
<ul>
<li>实现业务逻辑与业务规则的分离，实现业务规则的集中管理；</li>
<li>可以动态修改业务规则，从而快速响应需求变更；</li>
<li>使业务分析人员也可以参与编辑、维护系统的业务规则；</li>
<li>使用规则引擎提供的规则编辑工具，使复杂的业务规则实现变得的简单</li>
</ul>
<h3 id="编程实践">编程实践</h3>
<p>规则引擎可以在系统工作时，将外部的业务规则加载到系统中，并使得系统按照该业务规则进行工作。</p>
<h4 id="业务规则的制定">业务规则的制定</h4>
<p>一个业务规则包含一组条件和<strong>满足此条件下执行的操作</strong>，它们表示业务规则应用程序的一段业务逻辑。</p>
<p>业务规则通常应该由业务分析人员和策略管理者开发和修改，但有些复杂的业务规则也可以由技术人员使用面向对象的技术语言或脚本来定制。</p>
<p>业务规则的理论基础是:
设置一个或多个条件，当满足这些条件时会触发一个或多个操作。</p>
<h4 id="规则引擎的功能">规则引擎的功能</h4>
<p>由于规则引擎是软件组件，所以只有开发人员才能够通过程序接口的方式来使用和控制它。</p>
<p>规则引擎的程序接口至少包含以下几种 API：</p>
<ul>
<li>加载和卸载规则集的 API；</li>
<li>数据操作的 API；</li>
<li>引擎执行的 API。</li>
</ul>
<p>开发人员在程序中使用规则引擎基本遵循以下 5 个典型的步骤：</p>
<ul>
<li>创建规则引擎对象；</li>
<li>向引擎中加载规则集或更换规则集；</li>
<li>向引擎提交需要被规则集处理的数据对象集合；</li>
<li>命令引擎执行；</li>
<li>导出引擎执行结果，从引擎中撤出处理过的数据。</li>
</ul>
<p>使用了规则引擎之后，许多涉及业务逻辑的程序代码基本被这五个典型步骤所取代。一个开放的业务规则引擎应该可以” 嵌入” 在应用程序的任何位置，不同位置的规则引擎可以使用不同的规则集，用于处理不同的数据对象。</p>
<h2 id="现有的规则引擎">现有的规则引擎</h2>
<p>常见的开源规则引擎 -- <a target="_blank" rel="noopener" href="https://awesomeopensource.com/projects/rule-engine">The Top 23
Rule Engine Open Source Projects</a> ，如以下所示。</p>
<figure>
<img data-src="../downloads/images/open_source_rule_engine.JPG" alt="开源规则引擎排行榜">
<figcaption aria-hidden="true">开源规则引擎排行榜</figcaption>
</figure>
<p>此外，你也找到一些其他开源的规则推导开源软件，比如基于规则表的推理软件 <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>。</p>
<p>本文会挑选几款教程比较多，应用范围广的规则引擎做比较和讲解。</p>
<p>目前，常用的商用规则管理系统 (BRMS) 是 ILOG
JRules，普遍使用的开源规则引擎是 CLIPS 和 Drools。</p>
<h3 id="clips">CLIPS</h3>
<p>根据 <a target="_blank" rel="noopener" href="http://www.clipsrules.net/">官方网站</a> 介绍，CLIPS
(the C Language Integrated Production System) 于 1984
年由美国航空航天局约翰逊空间中心 (NASA’s Johnson Space Center)
推出，意在克服 LISP 移植性差、开发工具和硬件成本高、嵌入性低的缺点。</p>
<blockquote>
<p>Developed at NASA’s Johnson Space Center from 1985 to 1996, the C
Language Integrated Production System (CLIPS) is a rule-based
programming language useful for creating expert systems and other
programs where a heuristic solution is easier to implement and maintain
than an algorithmic solution. Written in C for portability, CLIPS can be
installed and used on a wide variety of platforms. Since 1996, CLIPS has
been available as public domain software.</p>
</blockquote>
<p>CLIPS 是一个基于 <strong>Rete 算法</strong> 的前向推理语言，用标准 C
语言编写。它具有高移植性、高扩展性、强大的知识表达能力和编程方式以及低成本等特点。</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://clipsrules.sourceforge.net/">CLIPS 源代码</a></li>
<li><a target="_blank" rel="noopener" href="http://www.clipsrules.net/Documentation.html">CLIPS 官方学习文档</a></li>
<li><a target="_blank" rel="noopener" href="https://fevin.art/post/clips-rule-engine-introduction/">中文简介</a>，讲述了规则引擎的工作机制。</li>
</ul>
<h4 id="在-cc-程序中嵌入-clips">在 C/C++ 程序中嵌入 CLIPS</h4>
<p>基本步骤：</p>
<ol type="1">
<li>定义规则模板，规则执行阶段控制逻辑；</li>
<li>加载规则库，创建 CLIPS 执行实例；</li>
<li>将变量转换成 CLIPS 事实 (facts)；</li>
<li>执行 CLIPS 规则；</li>
<li>获取 CLIPS 规则模板生成结果；</li>
</ol>
<h3 id="drools">Drools</h3>
<p>Drools 是用 Java 语言编写的开放源码规则引擎，使用 <strong>Rete
算法</strong> 对所编写的规则求值。</p>
<p>Drools 允许使用声明方式表达业务逻辑，可以使用非 XML
的本地语言编写规则，从而便于学习和理解。同时，通过使用其中的 DSL (Domain
Specific
Language)，可以实现<strong>用自然语言方式来描述业务规则</strong>，使得业务分析人员也可以看懂业务规则代码。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/kiegroup/drools">开源源代码</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.jboss.org/drools/release/7.49.0.Final/drools-docs/html_single/index.html#_fork_github">开发文档</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/51296996">中文简介</a>，讲述了规则引擎的工作机制。</li>
</ul>
<h3 id="ilog">ILOG</h3>
<p>Ilog Jrules 是由 IBM 开发的业务规则管理系统 (Business Rules
Management
System，BRMS)，它提供了对整个企业业务规则进行建模、编写、测试、部署和维护所必需的所有工具。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.ibm.com/support/knowledgecenter/SSZJPZ_11.7.0/com.ibm.swg.im.iis.conn.jrules.use.doc/topics/ilog_jrules_container.html">官网介绍</a></li>
</ul>
<p>因为 Ilog Jrules
不开源，同时偏向于界面维护，这里不做详细分析和比较。</p>
<h2 id="美团的实践案例">美团的实践案例</h2>
<p>根据 <a target="_blank" rel="noopener" href="https://www.mtyun.com/library/maze-framework">从 0 到 1：构建强大且易用的规则引擎</a>
的描述，美团点评也经历过开源 Drools 从入门到放弃的故事。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在实践中，我们发现 Drools 方案有以下几个优缺点：</span><br><span class="line"></span><br><span class="line"># 优点</span><br><span class="line">- 策略规则和执行逻辑解耦方便维护。</span><br><span class="line"># 缺点</span><br><span class="line">- 业务分析师无法独立完成规则配置：由于规则主体DSL是编程语言（支持Java, Groovy, Python），因此仍然需要开发工程师维护。</span><br><span class="line">- 规则规模变大以后也会变得不好维护，相对硬编码的优势便不复存在。</span><br><span class="line">- 规则的语法仅适合扁平的规则，对于嵌套条件语义（then里嵌套when...then子句）的规则只能将条件进行笛卡尔积组合以后进行配置，不利于维护。</span><br></pre></td></tr></tbody></table></figure>
<p>由于 Drools 的问题较多，美团点评最后放弃了
Drools，而开始基于需求模型设计一个规则引擎。</p>
<p>评价：在实际应用层面，重复造轮子不完全是一件坏事情，并非全无价值，例如用来回避软件许可问题、第三方模组或零件的技术限制。</p>
<blockquote>
<p>重造方的轮子是重新创造一个已有的方法（重造轮子），而且其结果比已有的还差（方的轮子）。重造方的轮子是一种反模式，发生在工程师不知道或轻视标准的作法，或是不了解问题，或是不知道标准作法已可以充分地克服问题。重造方的轮子可能是经验不足的工程师所产生，或是因为第二系统效应造成。</p>
</blockquote>
<hr>
<p>上面的规则引擎可能千般好，但是如果我基于推理效率等考虑，就是喜欢<strong>基于业务定制开源引擎</strong>，那么应该怎么设计和实现呢？</p>
<blockquote>
<p>业务定制规则引擎的优点是视图和引擎内部数据模型完全贴合业务模型，因此内部人员很容易上手；缺点是视图和引擎的设计完全基于业务模型，适用范围有限，很难低成本修改后推广到别的业务线。</p>
</blockquote>
<!--
绩效规则主体是数据处理，但我们认为数据处理同样属于规则的范畴，因此我们将其放在本文进行分析。-->
<h1 id="基于rete算法的前向推理规则引擎的设计和实现">基于 Rete 算法的 "前向推理" 规则引擎的设计和实现</h1>
<p>标题比较复杂，我们来拆分一些。首先，我们实现的规则引擎只解决满足前向推理
(forward chaining) 的问题；其次，Rete
算法是解决前向推理问题的通用解法，我们使用这个算法是可以得到理论保证的，路子不会走太偏。</p>
<h2 id="什么是-forward-chaining">什么是 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Forward_chaining">forward
chaining</a></h2>
<p>前向推理 (又叫正向推理，前向链接) 是使用推理引擎 (inference engine)
的主要方法之一，是在专家系统 (expert systems)，业务和生产规则系统
(business and production rule systems) 上广泛应用的策略。</p>
<blockquote>
<p>Forward chaining (or forward reasoning) is one of the two main
methods of reasoning when using an inference engine and can be described
logically as repeated application of modus ponens. Forward chaining is a
popular implementation strategy for expert systems, business and
production rule systems. The opposite of forward chaining is backward
chaining.</p>
</blockquote>
<p>前向推理从可用数据开始，使用推理规则来提取更多特征和数据，直到达到目的。推理引擎使用前向链接来搜索推理规则
(inference rules) 直到找到一个前提条件 (If clause)
为真；当找到这样的规则时，引擎可以得出结论或推断出结果 (Then
clause)，从而将新信息添加到其数据中
(可能是中间的临时特征)。推理引擎将迭代此过程，直到再无可用规则可被选用或者求得了所要求的解为止。</p>
<blockquote>
<p>Forward chaining starts with the available data and uses inference
rules to extract more data (from an end user, for example) until a goal
is reached. An inference engine using forward chaining searches the
inference rules until it finds one where the antecedent (If clause) is
known to be true. When such a rule is found, the engine can conclude, or
infer, the consequent (Then clause), resulting in the addition of new
information to its data. Inference engines will iterate through this
process until a goal is reached.</p>
</blockquote>
<h3 id="前向推理和后向推理的区别">前向推理和后向推理的区别</h3>
<p>和人类的思维相对应，规则引擎中也存在两种推理方式：正向推理
(Forward-Chaining) 和反向推理 (Backward-Chaining)。</p>
<p>正向推理也叫演绎法，由事实驱动，从一个初始的事实出发，不断地应用规则得出结论。首先在候选队列中选择一条规则作为启用规则进行推理，记录其结论作为下一步推理时的证据。如此重复这个过程，直到再无可用规则可被选用或者求得了所要求的解为止。</p>
<p>反向推理也叫归纳法，由目标驱动，首先提出某个假设，然后寻找支持该假设的证据，若所需的证据都能找到，说明原假设是正确的；若无论如何都找不到所需要的证据，则说明原假设不成立，此时需要另做新的假设。</p>
<h2 id="前向推理算法">前向推理算法</h2>
<p>前向推理应用规则从前提 (premises) 应用到结论
(conclusions)。目前，它使用暴力算法 (brute force
algorithm)，随机选择来源 (source) 和规则，应用规则以得出结论，重新插入结论作为新的来源
(source)，并迭代上述过程直到达到停止标准 <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>。</p>
<blockquote>
<p>The forward chainer applies rules from premises to conclusions. It
currently uses a rather brute force algorithms, select sources and rules
somewhat randomly, apply these to produce conclusions, re-insert them
are new sources and re-iterate till a stop criterion has been met.</p>
</blockquote>
<!--
# Forward Chainer Algorithm

The forward chainer is initialized with:

A set of sources, that may or not contain variables, from which to start the chaining process.

Optionally a focus set, to restrict rule application to a subset of the atomspace.
A rule-base, or rule-based system, defining a set of rules and parameters, amongst which are:
Fitness functions over sources and rules, to drive the inference control.
(Optional) Other parameters for termination and finer control. See URE Parameters for more details.

The high-level pseudocode of the forward chainer is as follows:

Initialize the potential-source set with the initial source atoms.
Randomly select the next source from the potential-source set (according to a source fitness function based distribution).
Amongst all valid rules, randomly select one (Thompson Sampling based on the truth value of the rule).
Unify the selected rule with the selected source, and apply it to generate conclusions.
Insert the conclusions to the potential-source set.
Check if one of the stopping criteria has been met. If so, exit and return the potential-source set, otherwise repeat from step 2.

from https://wiki.opencog.org/w/Unified_rule_engine#Inference_Tree
-->
<h3 id="rete-算法">Rete 算法</h3>
<p><a target="_blank" rel="noopener" href="https://developer.ibm.com/zh/technologies/artificial-intelligence/articles/os-drools/">开源规则流引擎实践</a>
深入剖析了基于 rete 算法的规则引擎；<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/3e9afe9e0617">RETE 算法简述 &amp;
实践</a> 以例子来讲述 rete
算法的实践。本节基于上述两篇博客文章，经整理和消化后介绍 Rete 算法 <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>。</p>
<p>Rete 算法最初是由 CMU 的 Charles L.Forgy 博士在 1974
年发表的论文中所阐述的算法，该算法提供了专家系统的一个高效实现。</p>
<p>Rete
匹配算法是一种进行大量模式集合和大量对象集合间比较的高效方法，通过网络筛选的方法找出所有匹配各个模式的对象和规则。核心思想是将分离的匹配项根据内容动态构造匹配树，以达到显著降低计算量的效果。自
Rete 算法提出以后，它就被用到一些大型的规则系统中，像 ILog、Jess、JBoss
Rules 等都是基于 RETE 算法的规则引擎。</p>
<blockquote>
<p>Rete has become the basis for many popular rule engines and expert
system shells, including Tibco Business Events, Newgen OmniRules, CLIPS,
Jess, Drools, IBM Operational Decision Management, OPSJ, Blaze Advisor,
BizTalk Rules Engine, Soar, Clara and Sparkling Logic SMARTS.</p>
</blockquote>
<p>Rete 算法可以被分为两个部分：规则编译和规则执行。当
Rete 算法进行事实的断言时，包含三个阶段：匹配、选择和执行，称做
match-select-act。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[1Rete Algorithm]--&gt;B(1 规则编译)</span><br><span class="line">A--&gt;C(2 规则执行)</span><br><span class="line">B--&gt;D(创建了规则集对应的 Rete 网络 , 它是一个事实可以在其中流动的图)</span><br><span class="line">C--&gt;E(1 匹配)</span><br><span class="line">C--&gt;F(2 选择)</span><br><span class="line">C--&gt;G(3 执行)</span><br></pre></td></tr></tbody></table></figure>
<h4 id="rete-算法相关概念">Rete 算法相关概念</h4>
<ul>
<li>Fact：已经存在的事实，它是指对象之间及对象属性之间的多元关系。</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">事实用一个三元组来表示：（标识符 ^ 属性 值）</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>Rule：规则，包含条件和行为两部分，条件部分又叫左手元（LHS），行为部分又叫右手元（RHS）。条件部分可以有多条条件，并且可以用
and 或 or 连接。其一般形式如下：</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(name-of-this-production</span><br><span class="line"> LHS /*one or more conditions*/</span><br><span class="line"> --&gt;</span><br><span class="line"> RHS /*one or more actions*/</span><br><span class="line"> )</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>Patten：模式，也就是规则的条件部分，是已知事实的泛化形式，是未实例化的多元关系。</li>
<li>RootNode：Rete 网络的根节点，所有对象通过 Root 节点进入网络。</li>
</ul>
<figure>
<img data-src="../downloads/images/rete_demo.png" alt="RETE 网络示例">
<figcaption aria-hidden="true">RETE 网络示例</figcaption>
</figure>
<h3 id="rete-规则编译">Rete 规则编译</h3>
<h3 id="rete-规则执行">Rete 规则执行</h3>
<h3 id="rete-算法优点">Rete 算法优点</h3>
<h2 id="程序开发实践">程序开发实践</h2>
<p>参考 <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>。</p>
<h3 id="规则模型">规则模型</h3>
<p>规则主要由三部分构成：</p>
<ul>
<li><p>FACT 对象：用户输入的事实对象，作为决策因子使用。</p></li>
<li><p>规则：LHS（Left Hand Side）部分即条件分支逻辑。RHS（Right Hand
Side）部分即执行逻辑。</p>
<ul>
<li>LHS 和 RHS 部分是由一个或多个模式 (pattern)
构成的。模式是规则内最小单位。模式的输入参数可以是另一个模式或 FACT
对象（比如逻辑与运算 [参数 1] &amp;&amp;
[参数 2] 中参数 1 可以是另一个表达式）。</li>
</ul></li>
</ul>
<!--
模式需要支持以下3种类别：

客户定义方法：FACT对象的实例方法、静态方法。
常规表达式：逻辑运算、算数运算、关系运算、对象属性处理等。
结构化查询。
-->
<ul>
<li>结果对象：规则处理完毕后的结果。需要支持自定义类型或者简单类型 POD。</li>
</ul>
<h3 id="系统模型">系统模型</h3>
<p>系统模型主要由 3 个模块构成。</p>
<ul>
<li>知识库：负责提供配置视图和模式因子。知识库之所以叫 “知识” 库一个很重要的特征是知识库可以低成本扩展知识。
<ul>
<li>模式：构成规则的最小单位，不可拆分，可以直接被规则引擎执行。</li>
</ul></li>
</ul>
<!--
- 视图：用于业务分析师等非技术背景的人员配置规则。作用两方面：
一方面降低操作门槛。一方面约束用户输入，保证输入合法性。
-->
<ul>
<li>资源管理器：负责管理规则。
<ul>
<li>依赖管理：负责将规则解析为模式树。为了最大限度地增强规则的表达能力，每一个模式设计都很 “原子”
(atom)，这样如果想配置一个完整语义的规则，则必须由多个子规则共同构成，因此规则之间会有树形依赖关系。</li>
</ul></li>
</ul>
<!--  
如$参数1 + $参数2 > $参数3这样的规则便是由多个模式“复合”而成，则他的依赖关系如下所示。
-->
<ul>
<li>规则引擎：负责执行规则。
<ul>
<li>模式执行器：负责直接执行模式。执行器可以根据业务的表达能力需求选择基于
Drools、Aviator 等第三方引擎，甚至可以基于 ANTLR 定制。</li>
</ul></li>
</ul>
<h3 id="运行实践">运行实践</h3>
<ul>
<li>预加载规则实例。在引擎初始化阶段将规则实例缓存在本地。</li>
<li>预编译规则实例。因为规则每次编译执行会导致性能问题，因此会在引擎初始化和规则有变更这两个时机将增量版本的规则预编译成可执行代码。</li>
</ul>
<p>系统代码调用规则引擎的基本步骤：</p>
<ol type="1">
<li>定义规则模板，规则执行阶段的控制逻辑；</li>
<li>加载规则库，创建规则引擎实例；</li>
<li>将变量转换成规则引擎的事实；</li>
<li>执行规则推理；</li>
<li>获取规则模板生成结果；</li>
</ol>
<h1 id="references">References</h1>
<ul>
<li>[1] <a target="_blank" rel="noopener" href="https://workflowengine.io/blog/workflow-engine-vs-state-machine/">WORKFLOW
ENGINE VS. STATE MACHINE</a></li>
<li>[2] <a target="_blank" rel="noopener" href="https://www.codeproject.com/Articles/194167/Logician-A-Table-based-Rules-Engine-Suite-In-C-NET">A
Table-based Rules Engine Suite using XML</a></li>
<li>[3] <a target="_blank" rel="noopener" href="https://wiki.opencog.org/w/Unified_rule_engine#Forward_Chainer">Forward
Chainer</a></li>
<li>[4] <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Rete_algorithm">Rete
Algorithm from Wikipedia</a></li>
<li>[5] <a target="_blank" rel="noopener" href="https://www.mtyun.com/library/maze-framework">https://www.mtyun.com/library/maze-framework</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Business_rules_engine">Business
rules engine from Wikipedia</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Inference_engine">Inference
engine from Wikipedia</a></li>
<li><a target="_blank" rel="noopener" href="http://holbrook.github.io/2012/03/20/rule_engine_1.html">规则，推理机和规则引擎</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/3e9afe9e0617">RETE 算法简述 &amp;
实践</a>
<ul>
<li>讲解的比较好 </li>
</ul></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bazald/ConcRete">rete 算法的 github
实现</a>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/wangty163/Rete">Rete github</a></li>
</ul></li>
</ul>
<!--
[Visual programming language](https://en.wikipedia.org/wiki/Visual_programming_language) 亨通提到的可视化编程做法，我不是很认同这种做法
-->
<hr>
<!--

from http://holbrook.github.io/2012/03/20/rule_engine_1.html

规则引擎可以将规则的定义从代码中分离出来，将推理过程封装到规则引擎内部进行处理，这带来几个好处：

规则外部化，即有利于规则知识的复用，也可避免改变规则时带来的代码变更问题
由规则引擎使用某种算法进行推理过程，不需要编写复杂晦涩的逻辑判断代码
开发人员的不需要过多关注逻辑判断，可以专注于逻辑处理

https://github.com/DanielThurau/Simple-RuleBase-Inference-Engine 

https://github.com/ivgiuliani/ant 和万老板的实现类似，有working memory

-->
<section class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1" role="doc-endnote"><p>2<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>3<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>4<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>5<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Autonomous-Driving/Baidu-Apollo-EM-Motion-Planner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Autonomous-Driving/Baidu-Apollo-EM-Motion-Planner/" class="post-title-link" itemprop="url">解读 Baidu Apollo EM Motion Planner</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-02-23 06:46:52" itemprop="dateCreated datePublished" datetime="2021-02-23T06:46:52+08:00">2021-02-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Autonomous-Driving/" itemprop="url" rel="index"><span itemprop="name">Autonomous Driving</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>7.5k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>27 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<p><strong>解读 Baidu Apollo EM Motion Planner</strong></p>
<p>论文由百度 Apollo 的 PNC 工程师撰写，于 2018 年发布在 arxiv 上 <a target="_blank" rel="noopener" href="http://arxiv.org/abs/1807.08048">文章链接</a>。</p>
<p>现在看来 (2021 年)，这篇论文属于 Apollo
系统<strong>规划与决策模块</strong>的白皮书，文章介绍的方法和思想，在现阶段
L4
级别自动驾驶开发中仍然具有广泛的适用性，对自动驾驶技术的普及和应用起到了积极推进作用。</p>
<p>我目前就职于某国内某自动驾驶创业公司，主要研究规划与决策领域的行为决策
(behavior/maneuver decision)，以下 ABC 代指目前所在公司的化名。</p>
<p>我在研读论文多次的基础上，基于目前的工作经验和设计实践，对文章的设计做一些个人的粗浅解读和评价，行家轻拍。欢迎大家在文章下留言赐教。</p>
<p>对于新手，建议在读论文前，先阅读 Case Study
这一章，了解文章在解决什么问题，以及大概是如何解决这个问题，这对文章的整体理解有帮助。</p>
<hr>
<h1 id="abstract">ABSTRACT</h1>
<p>Apollo 系统目标：工业级的 L4
自动驾驶系统，注重安全性、舒适度和可扩展性。</p>
<blockquote>
<p>The developed system aims to address the industrial level-4 motion
planning problem while considering safety, comfort and scalability.</p>
</blockquote>
<p>Apollo 开源代码地址：<a target="_blank" rel="noopener" href="https://github.com/ApolloAuto/apollo">Apollo open source
autonomous driving platform</a>。</p>
<p>注意：Apollo
是一个 “伪开源”，公布出来的代码逻辑简单，更像是一个自动驾驶系统的空架子，和官方实际路测的代码是不一样的。</p>
<h1 id="introduction">INTRODUCTION</h1>
<p>The system covers multilane and single-lane autonomous driving in a
hierarchical manner: - 第一级：变道选择。The <strong>top layer</strong>
of the system is a <strong>multilane strategy</strong> that handles
lane-change scenarios by <strong>comparing lane-level
trajectories</strong> computed in parallel.</p>
<!--
  * 类比于 ABC公司的 maneuver select/arbitrator 
-->
<ul>
<li>第二级：车道内的轨迹优化和速度优化。Inside the lane-level trajectory
generator, it iteratively solves path and speed optimization based on a
Frenet frame.
<ul>
<li>For path and speed optimization, a combination of dynamic
programming and spline-based quadratic programming is proposed to
construct a scalable and easy-to-tune framework to handle traffic rules,
obstacle decisions and smoothness simultaneously.</li>
</ul></li>
</ul>
<hr>
<p>补充知识点：什么是 Frenet frame？</p>
<p>Frenet
坐标系通常使用道路的中心线作为参考线，使用参考线的<strong>切线向量</strong>和<strong>法线向量</strong>建立坐标系。</p>
<p>如下图所示，这个 S-D 坐标系即为 Frenet
坐标系，它以车辆自身为原点，坐标轴相互垂直，分为： 纵向
S：沿着参考线的方向； 横向 D：参考线的法向。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Frenet_coordination.jpg"></p>
<p>相比于笛卡尔坐标系，Frenet
坐标系可明显地简化问题。因为车辆在行驶中，自车基于参考线 (道路中心线) 的位置，就可以使用纵向距离和横向距离来描述，同时纵向和横向的速度、加速度、加加速度等信息直接和道路相关；在车道保持和换道过程中都具有很强的实用性。</p>
<!--
From http://blog.sina.com.cn/s/blog_86186c970102yhrh.html
-->
<hr>
<!--
![系统架构设计](WEBRESOURCE53447e28972063eb3a12a0cf9e17d4e1)
-->
<p><img data-src="http://www.waylon.one/downloads/images/blog/onboard_module_of_Apollo.JPG"></p>
<blockquote>
<p>In the figure, the HD map module provides a high-definition map that
can be accessed by every on-line module. Perception and localization
modules provide the necessary dynamic environment information, which can
be further used to predict future environment status in the prediction
module. The motion planning module considers all information to generate
a safe and smooth trajectory to feed into the vehicle control
module.</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[safety]--&gt;B(traffic regulations)</span><br><span class="line">A--&gt;C(range coverage)</span><br><span class="line">A--&gt;D(cycle time efficiency)</span><br><span class="line">A--&gt;E(emergency safety)</span><br><span class="line">C--&gt;F(we aim to provide a trajectory with at least an eight second or two hundred meter motion planning trajectory)</span><br></pre></td></tr></tbody></table></figure>
<p><img data-src=""></p>
<p>在运动规划中，最重要的两个指标是安全 (safety) 和乘坐体验 (ride
experience)。</p>
<p>关于安全性，主要从交通规则 (traffic regulations)，场景覆盖范围 (range
coverage)，周期规划效率 (cycle time efficiency) 和紧急安全 (emergency
safety) 四个方面考虑。</p>
<blockquote>
<p>In motion planner, safety is always the top priority. We consider
autonomous driving safety in, but not limited to, the following aspects:
traffic regulations, range coverage, cycle time efficiency and emergency
safety.</p>
</blockquote>
<!--
在紧急模式下，自动驾驶系统可以在 100 ms 内就反应，而正常驾驶员需要至少 300ms 的反应时间。

> In the case of an emergency, the system could react within 100 ms, compared with a 300 ms reaction time for a normal human driver.
-->
<p>关于乘坐体验，主要从场景覆盖 (scenario coverage)，交通规则 (traffic
regulation) 和舒适度 (comfort，比如自车加速度和 Jerk) 三方面着手。</p>
<blockquote>
<p>In addition to safety, passengers’ ride experience is also important.
The measurement of ride experience includes, but is not limited to,
scenario coverage, traffic regulation and comfort.</p>
</blockquote>
<!--

# 学习语法表达
First, the search space is expanded across multiple lanes, which causes the algorithm to be **computationally expensive**.

it is not easy to apply traffic regulations under the same frame.

-->
<h2 id="multilane-strategy">Multilane Strategy</h2>
<p>运动规划的注意点之一：自车的决策应该尽量稳定，以方便其他交通参与者预测自车的意图。如果自车在正常行驶过程中，和其他车辆交互决策不稳定 (如障碍物误感) 带来的急刹车，容易造成后方车辆制动不及时而发生追尾。</p>
<!--
ABC 公司的设计中，曾发生自车急刹，被后方车辆追尾的情况。
-->
<blockquote>
<p>It is important to follow consistent on- road driving behavior to
inform other drivers of the intention of the autonomous driving
vehicle.</p>
</blockquote>
<p>变道策略需要能处理主动变道 ( routing
规划) 和被动变道 (道路前方被堵塞) 两种情况，通常变道成功率 (success rate)
会作为变道质量的一个重要衡量指标。</p>
<blockquote>
<p>Typically, a multilane strategy should cover both nonpassive and
passive lane-change scenarios. * In EM planner, a nonpassive lane-change
is a request triggered by the routing module for the purpose of reaching
the final destination. * A passive lane change is defined as an ego car
maneuver when the default lane is blocked by the dynamic
environment.</p>
</blockquote>
<p>文中提到的做法是对主动变道和被动变道进行并行计算 (parallel
framework)。 * 对所有的候选车道，以车道级别 (lane-level)
进行交通规则、车道内障碍物的分析，那么每个车道都会生成一个最可行的轨迹
(best-possible trajectory)。最后，一个 cross-lane trajectory decider
会基于安全性和代价函数两方面来选择车道。</p>
<blockquote>
<p>We propose a parallel framework to handle both passive and nonpassive
lane changes. For candidate lanes, all obstacles and environment
information are projected on lane-based Frenet frames. Then, the traffic
regulations are bound with the given lane-level strategy. Under this
framework, each candidate lane will generate a best-possible trajectory
based on the lane-level optimizer. Finally, a cross-lane trajectory
decider will determine which lane to choose based on both the cost
functional and safety rules.</p>
</blockquote>
<!--
类比于 ABC 公司的 lane sequence。
-->
<h1 id="path-speed-iterative-algorithm">Path-Speed Iterative
Algorithm</h1>
<p>大多数自动驾驶软件运动规划的做法是，沿着车道参考线 (reference
line，通常是从高精度地图中得到车道中心线) 把单车道问题转化为 Frenet
frames with time (SLT) 问题。其中，S 指 Frenet 坐标系下的纵向，L
指横向，T 指代时间。</p>
<blockquote>
<p>Many autonomous driving motion planning algorithms are developed in
Frenet frames with time (SLT) to reduce the planning dimension with the
help of a reference line.</p>
</blockquote>
<p>如何在 Frenet 中找到最优轨迹是一个 3D (S+L+T)
约束优化问题，文章中提到两种做法的路线之争。在我看来，现在工业界主流前沿的做法是第二种，第一种正在被逐渐淘汰。</p>
<blockquote>
<p>Finding the optimal trajectory in a Frenet frame is essentially a 3D
constrained optimization problem. There are typically two types of
approaches: direct 3D optimization methods and the path-speed decoupled
method. * [方法一：无脑优化采样] Direct methods attempt to find the
optimal trajectory within SLT using either trajectory sampling or
lattice search. + These approaches are limited by their search
complexity, which increases as both the <strong>spatial</strong> and
<strong>temporal</strong> search resolutions increase. To qualify the
time consumption requirement, one has to compromise with increasing the
search grid size or sampling resolution. Thus, the generated trajectory
is suboptimal.</p>
</blockquote>
<p><!--
    + ABC之前的做法是这样子的，但是后面逐渐被替换掉。
--></p>
<ul>
<li>[方法二：path-speed 解耦，先求 path，再解 speed] The path-speed
decoupled approach <strong>optimizes path and speed separately</strong>.
Path optimization typically considers static obstacles. Then, the speed
profile is created based on the generated path. <strong>It is possible
that the path-speed approach is not optimal with the appearance of
dynamic obstacles</strong>. However, since the path and speed are
decoupled, this approach achieves more flexibility in both path and
speed optimization.
<ul>
<li>一个负责问题，如果一旦可以分为几个小问题，或者之前已经解决的问题，那么问题整体难度就会降低下来。</li>
</ul></li>
</ul>
<h2 id="path-speed-decoupled-framework">Path-speed decoupled
framework</h2>
<ul>
<li>EM planner 分别迭代优化 path 和 speed。在 path
优化中，利用上一帧的速度 (speed profile from the last cycle)
来预估和低速对象障碍物的交互，然后基于生成的 path 来优化速度。
<ul>
<li>注意，实践中要减少对上一次规划轨迹的依赖。</li>
</ul></li>
</ul>
<blockquote>
<p>EM planner optimizes path and speed iteratively. The speed profile
from the last cycle is used to estimate interactions with
<strong>oncoming</strong> and <strong>low-speed dynamic
obstacles</strong> in the path optimizer. Then, the generated path is
sent to the speed optimizer to evaluate an optimal speed profile.</p>
</blockquote>
<p>这里补充一下，Path-speed decoupled 的方法对高速物体的 nudge
行为处理不友好；这里通过变道代替 nudge
来灵巧地避开这个缺陷问题，但是会引来频繁变道的风险。比如，一辆快速自行车和自车同行，自行车距离自车比较近，自车难道要变道来超过
(overtake) 这个自行车吗？</p>
<blockquote>
<p>For high-speed dynamic dynamic obstacles, EM planner prefers a
lane-change maneuver rather than nudging for safety reasons.</p>
</blockquote>
<h2 id="decisions-and-traffic-regulations">Decisions and Traffic
Regulations</h2>
<p>EM planner 先做出决策 (make
decisions)，再规划轨迹。决策可以输出清晰的自车意图，把非凸问题约束为凸问题，不仅减少寻找最优轨迹的搜索空间，而且允许使用凸优化问题的优化方法。</p>
<blockquote>
<p>In Apollo EM planner, we make decisions prior to providing a smooth
trajectory. The decision process is designed to make on-road intentions
clear and reduce the search space for finding the optimal
trajectory.</p>
</blockquote>
<p>决策的路线之争。</p>
<blockquote>
<p>Many decision-included planners attempt to generate vehicle states as
the ego car decision. These approaches can be further divided into
hand-tuning decisions and model-based decisions. *
[方法一：手写规则，扩展性差] The advantage of hand-tuning decision is
its tunability. However, scalability is its limitation. In some cases,
scenarios can go beyond the hand-tuning decision rule’s description. +
When considering dozens of obstacles, the decision behavior is difficult
to be accurately described by a finite set of ego car states.</p>
</blockquote>
<!--
这也是值得 reasoner 考虑的问题，如何避免负责的规则呢？比如机器学习反馈 risk 的程度。
-->
<ul>
<li>[方法二：基于模型的决策] The model-based decision approaches
generally discretize the ego car <strong>status</strong> into finite
driving statuses and use data-driven methods to tune the model.</li>
</ul>
<!--
# 多物体交互。按照 GJ 的说法，其他车可以利用自车的模型来预测轨迹。
The consideration of multi- agent interactions will benefit both prediction and decision-making processes.
-->
<p>Targeting level-4 autonomous driving, a decision module shall include
both <strong>scalability</strong> and
<strong>feasibility</strong>.<br>
* Scalability is the scenario expression ability (i.e., the autonomous
driving cases that can be explained). + 不要过拟合 (over-fit) 一个
issue，适用性差。 * For feasibility, we mean that the generated decision
shall include a feasible region in which the ego car can maneuver
<strong>within dynamic limitations</strong>. + Both hand-tuning and
model-based decisions do not generate a collision-free trajectory to
verify the feasibility. * 同意，decision
层并不会考虑是否能够生成轨迹，所以有些决策是无效的。</p>
<p>划重点：EM planner
的做法是先生成初略的轨迹来表示交互意图 (不受限于障碍物数量)；然后，生成一个有约束的凸走廊
(a convex feasible
space)，用<strong>凸优化</strong>的方法来求解优化轨迹。 * 目前，ABC
是先生成决策，然后决策作为约束，在 ST planner 中搜索粗略的轨迹，和 EM
的做法不一致。</p>
<blockquote>
<p>In EM planner’s decision step, we describe the behavior differently.
* First, <strong>the ego car moving intention is described by a rough
and feasible trajectory</strong>. Then, the interactions between
obstacles are measured with this trajectory. + This feasible
trajectory-based decision is scalable even when scenarios become more
complicated. * Second, the planner will also generate a <strong>convex
feasible space</strong> for <strong>smoothing spline parameters</strong>
based on the trajectory. + A quadratic-programming-based smoothing
spline solver could be used to generate smoother path and speed profiles
that follow the decision. This guarantees a feasible and smooth
solution.</p>
</blockquote>
<h1 id="em-planner-framework-with-multilane-strategy">EM PLANNER
FRAMEWORK WITH MULTILANE STRATEGY</h1>
<p>除了 lane-level motion planning 的具体实现方法不同，这章节数据流和
ABC 的实现非常类似，设计架构在工业界领先，可以重点参考。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/EM_framework.JPG"></p>
<ol type="1">
<li><p>在 Data Center 接受并同步数据。 &gt; all sources of information
are collected and synced at the <strong>data center
module</strong>.</p></li>
<li><p> 基于道路中心线，选择几条可行
lane，然后生成基于其中心线的障碍物投影信息 (SL 坐标描述)。</p></li>
</ol>
<blockquote>
<p>The reference line generator will produce some candidate lane-level
reference lines along with information about traffic regulations and
obstacles.</p>
</blockquote>
<ol start="3" type="1">
<li>lane-level optimizer module</li>
</ol>
<h1 id="em-planner-at-lane-level">EM PLANNER AT LANE LEVEL</h1>
<p>The iteration includes two E-steps and two M-steps <strong>in one
planning cycle</strong>. The trajectory information will iterate between
planning cycles.</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/EM_Iteration.JPG"></p>
<p>在两个 M-steps 中，通过 DP 和 QP 来生成 path 和 speed
profiles。请注意，在一个规划间隔内，planning
规划出一条可行的轨迹，需要迭代多次 EM planner，也就是运行多次 E-steps 和
M-steps.</p>
<blockquote>
<p>In two M-steps, path and speed profiles are generated by a
combination of dynamic programming and quadratic programming.</p>
</blockquote>
<hr>
<p>在第一步 E-step 中，静态和动态障碍物投影到车道的 Frenet
frame，准备进行 SL 的 path 规划。</p>
<blockquote>
<p>In the first E-step, obstacles are projected on <strong>the lane
Frenet frame</strong>. This projection includes both static obstacle
projection and dynamic obstacle projection. *
静态障碍物的投影：<strong>Static obstacles</strong> will be projected
directly based on a Cartesian-Frenet frame transformation. *
动态障碍物的投影 (负责)：Considering the previous cycle planning
trajectory, we can evaluate the estimated dynamic obstacle and ego car
positions <strong>at each time point</strong>. + The overlap of dynamic
obstacles and the ego car at each time point will be mapped in the
Frenet frame.</p>
</blockquote>
<!--    
在下一次规划中，使用了上一次的轨迹；这违背了自己对上次轨迹不能用到当前帧的信仰。下次可以和面试者讨论下。如果这一帧，自车的轨迹突变，怎么解决呢？这种依赖上一次的轨迹，可以解决吗？
-->
<p>出于安全考虑 (目前技术处理这类场景的安全性把握不大)，在 SL
投影中，只对低速 (low-speed traffic) 和对向 (oncoming)
动态障碍物使用；高速物体通过变道来解决。</p>
<blockquote>
<p>For safety considerations, the SL projection of dynamic obstacles
will only consider low-speed traffic and oncoming obstacles. For
high-speed traffic, EM planner’s parallel lane-change strategy will
cover the scenario.</p>
</blockquote>
<h3 id="如何把非凸问题转变为凸优化问题">如何把非凸问题转变为凸优化问题？</h3>
<ol type="1">
<li>DP 可以在障碍物投影后的非凸空间 (SL) 中找到一个初略 path
解，然后从这个初略解中得到针对障碍物的决策，比如 nudge，yield 还是
overtake。</li>
</ol>
<blockquote>
<p>Although we projected obstacles on SL and ST frames, the optimal path
and speed solution still lies in a non-convex space. Thus, we use
dynamic programming to first obtain a rough solution; meanwhile,
<strong>this solution can provide obstacle decisions such as nudge,
yield and overtake</strong>.</p>
</blockquote>
<!--
决策是在 path 的 DP 中决策的吗？
-->
<ol start="2" type="1">
<li>基于针对障碍物的决策，生成一个凸区域 (convex hull，凸包)，可供 QP
算法求解。</li>
</ol>
<blockquote>
<p>We use the rough decision to determine a convex hull for the
quadratic-programming-based spline optimizer.</p>
</blockquote>
<ol start="3" type="1">
<li>通过优化器在凸空间内求解。</li>
</ol>
<blockquote>
<p>The optimizer can find solutions within the convex hull.</p>
</blockquote>
<hr>
<p>待补充知识点：什么是非凸优化问题呢？</p>
<p>如何把一个非凸问题转变为可解问题呢？此处引用 Pony 的一篇技术分析文章
-- <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI5NTg2NDg3MA==&amp;mid=2247484857&amp;idx=1&amp;sn=e844f224f81a6a804e9daf0fd5f61f7e">应对复杂路况，自动驾驶如何规划它的下一步</a>
。</p>
<hr>
<h3 id="sl-and-st-mapping-e-step">SL and ST Mapping (E-step)</h3>
<!--
待补充知识点：ST 和 SL 投影是什么呢？
-->
<p>对于单车道而言，SL
投影是基于车道中心线；对于变道而言，中间涉及到至少两条单车道，两条车道的连接使用的是
G2 算法。</p>
<p>The SL projection is based on a G2 (continuous curvature derivative)
smooth reference line.</p>
<p>如何把动态障碍物转化到 SL 中？</p>
<p>参考上一次的自车规划轨迹 (last cycle
trajectory)，可以得到自车在指定时间上位于 S
方向上的位置，来预估和障碍物预测轨迹的相交处 (interactions)。 &gt; For
dynamic obstacles, we mapped the obstacles with the help of the last
cycle trajectory of the ego car. The last cycle’s moving trajectory is
projected on the Frenet frame to extract the station direction speed
profile. This will provide an estimate of the ego car’s station
coordinates <strong>given a specific time</strong>. The estimated ego
car station coordinates will help to evaluate the dynamic obstacle
interactions. + Once an ego car’s station coordinates have interacted
with an obstacle trajectory point with the same time, a shaded area on
the SL map will be marked as the estimated interaction with the dynamic
obstacle.</p>
<p>ST 投影帮助我们评估自车的速度轮廓 (speed profile)。因为在 ST
图中抠除障碍物占据的空间 (shaded
area)，剩余的空间其实是速度可行区间。</p>
<blockquote>
<p>ST projection helps us evaluate the ego car’s speed profile. The
remaining region is the speed profile feasible region.</p>
</blockquote>
<h3 id="m-step-dp-path">M-Step DP Path</h3>
<p>M-step path 的目标是找到优化的 path 轮廓，分为基于 DP 的决策和 QP
的路线规划，i.e. DP 得到决策，QP 进行轨迹规划。</p>
<blockquote>
<p>The M-step path optimizer optimizes the path profile in the Frenet
frame. * This is represented as finding an optimal function of lateral
coordinate w.r.t. station coordinate in nonconvex SL space (e.g.,
nudging from left and right might be two local optima). * The path
optimizer includes two steps: <strong>dynamic-programming-based path
decision</strong> and <strong>spline-based path planning</strong>.</p>
</blockquote>
<p>Path 动态规划提供了一个粗糙的 path 轮廓，包括可行的通道和障碍物的
nudge 决策。注意，生成的 path 轮廓是采样点连接起来的，不够精细。</p>
<!--
在path生成中决定是否 nudge
-->
<blockquote>
<p>The dynamic programming path step provides a rough path profile with
<strong>feasible tunnels</strong> and <strong>obstacle nudge
decisions</strong>.</p>
</blockquote>
<p><img data-src="http://www.waylon.one/downloads/images/blog/DP_structure_Fig_6.JPG"></p>
<p>The step includes a lattice sampler, cost function and dynamic
programming search. + Lattice Sampler: The <strong>lattice
sampler</strong> is based on a Frenet frame. Multiple rows of points are
first sampled ahead of the ego vehicle. Points between different rows
are smoothly connected by quintic polynomial edges. +
撒点的做法来搜索粗略路线，使用五次多项式来拟合平滑路线。 + Cost
Function: <strong>Each graph edge</strong> is evaluated by the summation
of cost functionals. We use information from the SL projection, traffic
regulations and vehicle dynamics to construct the functional. +
从障碍物，交通规则和车辆动力学三方面来计算每个连接边 (两个 lattice point
的连接线) 的代价。此处略过 cost 函数的设计。 + Dynamic Programming
Search: Edge costs are used to select a candidate path with the
<strong>lowest cost</strong> through a dynamic programming search. The
candidate path will also <strong>determine the obstacle
decisions</strong>.</p>
<h3 id="m-step-spline-qp-path">M-Step Spline QP Path</h3>
<p>Spline QP path 是上面 dynamic programming path 的进一步优化
(refinement)。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Spline_QP_Path.JPG"></p>
<p>在 dynamic programming path 中，基于选择路线的可行通道 (feasible
tunnel) 被确定下来就是一个凸优化问题，spline QP path
是在可行通道中产生一条平滑的路线。</p>
<blockquote>
<p>The spline QP path step is a refinement of the dynamic programming
path step. In a dynamic programming path, a feasible tunnel is generated
based on the selected path. Then, the spline-based QP step will generate
a smooth path within this feasible tunnel.</p>
</blockquote>
<p>在线性化的约束 (linearized constraint) 中，利用 QP spline solver
来求解优化目标函数 (objective function)，从而生成生成 spline QP
path。</p>
<blockquote>
<p>The spline QP path is generated by optimizing an objective function
with a linearized constraint through the QP spline solver.</p>
</blockquote>
<h4 id="目标函数组成">目标函数组成</h4>
<p>目标函数由平滑代价和引导线代价组成，其中引导线是上一步的 DP
path。</p>
<blockquote>
<p>The objective function of the QP path is a <strong>linear
combination</strong> of smoothness costs and guidance line cost. * The
guidance line in this step is the DP path. <strong>The guidance line
provides an estimate of the obstacle nudging distance</strong>.</p>
</blockquote>
<!--
![QP_path_objective_function](E3D91C46ED8648009D9B758630BC1510)
-->
<p><img data-src="http://www.waylon.one/downloads/images/blog/Path_QP_cost_function.JPG"></p>
<p>上述目标函数在 nudge 障碍物的距离和平滑性中做了平衡和取舍。</p>
<blockquote>
<p>The objective function describes the balance between nudging
obstacles and smoothness.</p>
</blockquote>
<h4 id="约束组成">约束组成</h4>
<p>约束由可行边界约束 (boundary constraints) 和自车动态性能约束 (dynamic
feasibility) 组成。</p>
<blockquote>
<p>The constraints in the QP path include boundary constraints and
dynamic feasibility. These constraints are applied on f(s), f’(s) and
f’’(s) at <strong>a sequence of station coordinates</strong> s0, s1,
..., sn.</p>
</blockquote>
<p>在 EM planner 中，使用自行车模型 (bicycle model)
来考虑自车的动力学特性；在规划阶段，把车辆模型简化为自行车模型，是一种比较通用的做法。</p>
<blockquote>
<p>In EM planner, the ego vehicle is considered under the bicycle
model.</p>
</blockquote>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/left_corner.jpg" alt="左上角约束推导图">
<figcaption aria-hidden="true">左上角约束推导图</figcaption>
</figure>
<p>上面的操作和近似转换是做什么呢？在横向 (lateral direction)
约束求解中，l = f (s)，因为 sin 不是线性的函数，所以使用 f (s)
的导数来替代 sin
函数。在允许一定误差的情况下，把一个非线性函数，转化为线性约束 (linear
constraints) 问题。</p>
<blockquote>
<p>To keep the boundary constraint convex and linear, we add two half
circles on the front and rear ends of the ego car.</p>
</blockquote>
<p>那么，现在已经把所有的约束化简为线性约束，问题就可以使用 quadratic
programming solver
来快速求解这个问题，效率更高。这就是<strong>数学的魅力啊</strong>！</p>
<blockquote>
<p>Since all constraints are linear with respect to spline parameters, a
quadratic programming solver can be used to solve the problem very fast.
* In addition to the boundary constraint, the generated path shall match
the ego car’s initial lateral position and derivatives. +
实现细节注意点：考虑车辆的初始状态。</p>
</blockquote>
<h2 id="m-step-dp-speed-optimizer">M-Step DP Speed Optimizer</h2>
<!--
(和 ABC 的 ST planner 比较通用)
-->
<p>在 ST 图中，使用 DP 算法生成一个速度轮廓 (speed profile)，即 v =
S (t)。</p>
<blockquote>
<p>The speed optimizer generates a speed profile in the ST graph, which
is represented as a station function with respect to time S(t).</p>
</blockquote>
<p>在 ST graph 中找最优 speed profile 是一个复杂的非凸问题。我们使用
dynamic programming 和 spline quadratic programming 在 ST
图中寻找一个平滑的速度轮廓 (非最优)。</p>
<p>同 Path planner，我们先利用 DP 算法搜索一个粗略的 speed
profile，把问题从非凸问题化简为凸问题；然后在有约束的情况下，沿着 speed
profile (guidance line)，使用 QP 算法来求解最优的速度解。</p>
<blockquote>
<p>We use dynamic programming combined with spline quadratic programming
to find a smooth speed profile on the ST graph.</p>
</blockquote>
<h3 id="dp-speed-框架">DP speed 框架</h3>
<p>The DP speed step includes a cost functional, ST graph grids and
dynamic programming search. The generated result includes a
<strong>piecewise</strong> linear speed profile, a feasible tunnel and
<strong>obstacle speed decisions</strong>.</p>
<p>待补充，obstacle speed decisions 是什么形式的决策呢？</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/DP_Speed_Optimizer.JPG"></p>
<p>首先，对整个 ST 图进行网格化处理，包括对障碍物进行网格化分割。 &gt;
obstacle information is first discretized into grids on the ST
graph.</p>
<p>类似于从网格中按时间递增顺序，搜索带约束的可行解，速度可以在网格上表示为
(s0, s1, ..., sn)，形状是锯齿形的。</p>
<blockquote>
<p>A piecewise linear speed profile function is represented as S = (s0,
s1, ..., sn) on the grids.</p>
</blockquote>
<p>Cost function 由三部分组成： - Velocity keeping cost: * This term
indicates that the vehicle shall follow the designated speed when there
are no obstacles or traffic light restrictions present. V^ref describes
the reference speed, which is determined by the road speed limits,
curvature and other traffic regulations. - Smoothness cost: * The
acceleration and jerk square integral describes the smoothness of the
speed profile. - Total obstacle cost: * The <strong>distances</strong>
of the ego car to all obstacles are evaluated to determine the total
obstacle costs.</p>
<p>DP 搜索时要注意车辆动力学限制；同时，可以根据运动学约束做剪枝
(pruning) 操作。</p>
<blockquote>
<p>The dynamic constraints include <strong>acceleration, jerk limits and
a monotonicity constraint</strong> since we require that the generated
trajectories do not perform backing maneuvers when driving on the road.
* Some necessary pruning based on vehicle dynamic constraints is also
applied to accelerate the process.</p>
</blockquote>
<hr>
<p>知识点，如何把导数问题简化为有限差分问题。</p>
<p>ai = ((si-si-1)/dt - (si-1 - si-2)/dt)/dt。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/finite_difference_method.JPG"></p>
<hr>
<h2 id="m-step-qp-speed-optimizer">M-Step QP Speed Optimizer</h2>
<p>因为锯齿形的线性速度轮廓不能满足运动学特性，所以使用 spline QP step
去填补这个空缺 (fill this gap)。</p>
<blockquote>
<p>Since the piecewise linear speed profile cannot satisfy dynamic
requirements, the spline QP step is needed to fill this gap.</p>
</blockquote>
<h3 id="spline-qp-speed-框架">Spline QP Speed 框架</h3>
<p>如下图所示，spline QP speed 是在满足路径单调性 (monotonicity
evaluated at designated points，不倒车), 交通规则 (traffic regulations,
可行通道) 和车辆运动学约束 (vehicle dynamic constraints)
的线性约束情况下，通过 cost
的方式获取最优的速度，同时考虑了速度平滑性和参考速度。</p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/Spline_QP_Speed_Optimizer.JPG" alt="Fig. 13">
<figcaption aria-hidden="true">Fig. 13</figcaption>
</figure>
<p>The spline QP speed step includes three parts: cost functional,
linearized constraint and spline QP solver.</p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/Speed_QP_cost.jpg" alt="cost function">
<figcaption aria-hidden="true">cost function</figcaption>
</figure>
<p>The objective function is a balance between following the guidance
line and smoothness. The spline optimization is within the linearized
constraint.</p>
<p>After wrapping up the cost objective and constraints, the spline
solver will generate a smooth feasible speed profile.</p>
<!--

注意，重要的求解步骤，就是这么一笔带过了。如何进行 QP 的求解，是自己感兴趣的内容。

-->
<h2 id="notes-on-solving-quadratic-programming-problems">Notes on
Solving Quadratic Programming Problems</h2>
<h3 id="优化任务量">优化任务量</h3>
<p>一次优化过程中大概有一百个采样点，那么约束就多于 600 个。</p>
<blockquote>
<p>For safety considerations, we evaluate the path and speed at
approximately one-hundred different locations or time points.</p>
</blockquote>
<p>path 和 speed 的优化问题，由一个五项式表达出来，但是约束条件有 30
个之多；然后，使用 QP solver 来求解。</p>
<blockquote>
<p>For both the path and speed optimizers, we find that piecewise
quintic polynomials are good enough. The spline generally contains 3 to
5 polynomials with approximately 30 parameters. Thus, <strong>the
quadratic programming problem has a relatively small objective function
but large number of constraints</strong>.</p>
</blockquote>
<p>In addition to accelerating the quadratic programming, <strong>we use
the result calculated in the last cycle as a hot start</strong>. *
注意，在 EM
文章中，优先使用上一次的规划轨迹，不仅可以提高求解效率，同时容易和上一次的决策保持一致。</p>
<p>因为使用上一次的规划轨迹来求解，QP 问题可以平均在 3ms 内求解。</p>
<blockquote>
<p>The QP problem can be solved within 3 ms on average, which satisfies
our time consumption requirement.</p>
</blockquote>
<p>此处补充一下，QP 求解是轨迹规划耗时的重点，平均 3ms
不代表求解性能一定好，更需要关注耗时最差的情况，或者中位数的情况。 *
举个例子，假设在 100 次求解中，如果 99 次求解耗时均是 2 ms，只有一次耗时
102
ms，那么最坏的这次求解，会导致自车反应延迟，足以影响自动驾驶安全，但是平均时间是
3ms。这就是统计学描述的精妙。</p>
<h2 id="notes-on-non-convex-optimization-with-dp-and-qp">Notes on
Non-convex Optimization With DP and QP</h2>
<p>DP 和 QP 各有局限，结合起来一起解决非凸优化问题。</p>
<blockquote>
<p>DP and QP alone both have their limitations in the non-convex domain.
A combination of DP and QP will take advantage of the two and reach an
ideal solution.</p>
</blockquote>
<ul>
<li>DP: As described earlier in this manuscript, the <strong>DP
algorithm depends on a sampling step to generate candidate
solutions</strong>. Because of the restriction of processing time,
<strong>the number of sampled candidates is limited by the sampling
grid</strong>. Optimization within a finite grid yields a <strong>rough
DP solution</strong>. In other words, DP does not necessarily, and in
almost all cases would not, <strong>deliver</strong> the optimal
solution.
<ul>
<li>For example, DP could select a path that nudges the obstacle from
the left but not nudge with the best distance.</li>
<li>DP 方法受限于采样精度 (求解性能约束)，不能找出最优的结果。</li>
</ul></li>
<li>QP: Conversely, QP generates a solution based on the <strong>convex
domain</strong>. It is not available without the help of the DP step.
<ul>
<li>For example, if an obstacle is in front of the master vehicle, QP
requires a decision, such as nudge from the left, nudge from the right,
follow, or overtake, to generate its constraint. <strong>A random or
rule-based decision will make QP susceptible to failure or fall into a
local minimal</strong>.</li>
<li>QP 主要是解决凸优化问题，需要 DP 把非凸问题简化为凸优化问题。</li>
<li>目前，ABC's 的 stopping
constraints，并不是输出一个决策，而是输出一个约束到 ST 中，在 ST
中进行决策的优化。从而，决策上的约束，可以把一个非凸问题化简为凸优化问题。</li>
</ul></li>
<li>DP + QP: A DP plus QP algorithm will minimize the limitations of
both: (1) The EM planner first uses DP to search within a grid to reach
a rough resolution. (2) <strong>The DP results are used to generate a
convex domain and guide QP</strong>. (3) QP is used to search for the
optimal solution in the convex region that most likely contains global
optima.
<ul>
<li>ABC 目前使用 reasoner 把一个非凸问题转化为凸优化问题，reasoner
的输出就是凸问题的约束。</li>
</ul></li>
</ul>
<p>各家公司的做法，千差万别，本质上都是在求解一个优化问题，把非凸的问题转化为凸问题，最后优化求解。</p>
<h1 id="case-study">CASE STUDY</h1>
<p>EM planner 是一个轻量级决策 (light-decision) 的规划器。</p>
<p>Although most state-of-the-art planning algorithms are based on
<strong>heavy decisions</strong>, <strong>EM planner is a
light-decision-based planner</strong>. It is true that a
heavy-decision-based algorithm, or heavily rule-based algorithm, is
easily understood and explained. The disadvantages are also clear: it
may be trapped in corner cases (while its frequency is closely related
to the complexity and magnitude of the number of rules) and not always
be optimal. * 和 EM planner 相比，目前 ABC 做法的缺陷，在行为决策部分
(reasoner)，规则的痕迹太重了。那么，能否引入比较智能的算法或者架构，来解决这类约束呢？这也是自己下一步的努力方向。
* 自动驾驶不能通过重规则 (heavy-decision-based algorithm)
来实现，最好的做法还是通过优化来实现。</p>
<!--
These cases were exposed during the intense daily test routines in Baidu’s heavy-decision planning modules and solved by the latest light-decision planning module.

我推测，百度曾经也有一套规则痕迹偏重的做法，但是可能后期被抛弃。
-->
<p>这个示例中，进行了两次迭代 (两轮 EM
迭代)。通常，环境越复杂，计算迭代时间越复杂，所以优化问题是一个没有时间收敛上限的问题。</p>
<blockquote>
<p>In general, the more complicated the environment is, the the more
steps that may be required.</p>
</blockquote>
<p>建议在读论文前，先阅读 Case Study
这一章，了解文章在解决什么问题，以及如何解决这个问题，对文章的实现有初步了解。</p>
<h1 id="computational-performance">COMPUTATIONAL PERFORMANCE</h1>
<p>这篇文章把三维 (station-lateral-speed) 的问题，化简为两个二维问题
(station-lateral problem and station-speed
problem)，那么大大简化了计算复杂度。也就是，问题复杂度降维了。</p>
<blockquote>
<p>Because the three-dimensional station-lateral-speed problem has been
split into two two-dimensional problems, i.e., <strong>station-lateral
problem and station-speed problem</strong>, the computational complexity
of EM planner has been significantly decreased, and thus, this planner
is very efficient. <strong>It takes less than 100 ms on
average</strong>.</p>
</blockquote>
<p>从问题复杂度 O (n (M+N))
来分析求解效率，可以应用到论文中，具有学术的感觉。但是，为什么是 M
(后续车道) + N (障碍物数量) 呢？</p>
<blockquote>
<p>Assuming that we have n obstacles with M candidate path profiles and
N candidate speed profiles, the computational complexity of this
algorithm is <strong>O(n(M+N))</strong>.</p>
</blockquote>
<h1 id="conclusion">CONCLUSION</h1>
<p>在自动驾驶中，安全性 (safety) 和通行能力 (passability) 是关键问题
(critical issue)。如果规则太过严格，那么通过率必然会下降。</p>
<blockquote>
<p>One critical issue in autonomous driving vehicles is the challenge of
safety vs. passability. A strict rule increases the safety of the
vehicle but lowers the passability, and vice versa.</p>
</blockquote>
<p>EM planner described in this manuscript is also designed to solve the
<strong>inconsistency</strong> of potential decisions and planning,
while it also improves the passability of autonomous driving vehicles. *
通过复用上一次的决策 (hot
start)，如果环境不发生大的变化，决策容易和上一次的决策保持一致。 *
决策不稳定，也是目前 ABC 遇到的常见问题之一。</p>
<p>EM planner 把一个 3D 问题化简为 2 个 2D
问题，化繁为简，降低了问题难度，提高了求解效率。</p>
<blockquote>
<p>EM planner significantly reduces computational complexity by
transforming a three-dimensional station-lateral-speed problem into two
twodimensional station-lateral/station-speed problems. It could
significantly reduce the processing time and therefore increase the
interaction ability of the whole system.</p>
</blockquote>
<hr>
<p>最后，APPENDIX 2 中的 CONSTRAINED SMOOTHING SPLINE AND QUADRATIC
PROGRAMMING 一节，应用到了复杂的再生核希尔伯特空间 ( Reproducing kernel
Hilbert
space，RKHS)，复杂的证明过程已经超出了我的理解范围，等应用时再详细研究下。</p>
<blockquote>
<p>The spline QP path and speed optimizer uses the same constrained
smoothing spline framework. In this section, we formalize the smoothing
spline problem within the quadratic programming framework and linearized
constraints. Optimization with a quadratic convex objective and
linearized constraints can be rapidly and stably solved.</p>
</blockquote>
<h1 id="references">References</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI5NTg2NDg3MA==&amp;mid=2247484857&amp;idx=1&amp;sn=e844f224f81a6a804e9daf0fd5f61f7e">应对复杂路况，自动驾驶如何规划它的下一步</a></li>
</ul>
<h1 id="表达学习">表达学习</h1>
<ul>
<li>Further safety design is beyond this manuscript’s scope.</li>
<li>Figure 15 is a hands-on example of how EM planner iterates
<strong>within and between planning cycles</strong> to achieve the
optimal trajectory.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/BTC/A-Peer-to-Peer-Electronic-Cash-System/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/BTC/A-Peer-to-Peer-Electronic-Cash-System/" class="post-title-link" itemprop="url">解读 A Peer-to-Peer Electronic Cash System</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-02-21 15:32:07" itemprop="dateCreated datePublished" datetime="2021-02-21T15:32:07+08:00">2021-02-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/BTC/" itemprop="url" rel="index"><span itemprop="name">BTC</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>5k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>18 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<!--
解读 Bitcoin: A Peer-to-Peer Electronic Cash System
-->
<p>在 2008 年，比特币创始人 中本聪 (Satoshi Nakamoto)
发表了这篇可以载入史册的论文 - 比特币：一种点对点的电子现金系统
(Bitcoin: A Peer-to-Peer Electronic Cash
System)，讲述了比特币是如何产生和工作的。</p>
<p>官网下载链接是 <a target="_blank" rel="noopener" href="https://bitcoin.org/en/bitcoin-paper">white
paper</a>，其中有多种语言的翻译版。建议有英文阅读能力的同学，优先选择英文原版阅读。</p>
<p>比特币涉及到计算机原理、密码学、概率学等复杂的知识。如果想彻底搞懂比特币原理，光看这一篇论文显然是不够的，还需要大量的衍生阅读。这篇文章的起点门槛比较高，但是这篇文章是学习比特币原理，最权威、第一手的资料，能让你对比特币的设计原理有大体的了解，体会
中本聪 设计比特币的初衷。</p>
<p>如果你想参与比特币等数字货币的交易，那么欢迎移步阅读我的另一篇教程文章
- <a target="_blank" rel="noopener" href="http://waylon.one/monthly-skills/buy-one-bitcoin/">购买自己的第一枚数字货币</a>。</p>
<h1 id="abstract">Abstract</h1>
<p>中本聪设计比特币的目的：通过构建完全点对点技术，实现一种电子货币，达到<strong>无需金融中介</strong>，<strong>无需双方信任</strong>的情况下，实现在线的电子化支付。</p>
<blockquote>
<p>A purely peer-to-peer version of electronic cash would allow online
payments to be sent directly from one party to another without going
through a financial institution.</p>
</blockquote>
<p>论文的主要成就：使用点对点的技术，在不依赖第三方交易平台 (financial
institution, a trusted third party)
的情况下，利用区块链技术，实现了去中心化的目的，解决了双重支付
(double-spending) 问题。</p>
<blockquote>
<p>Digital signatures provide part of the solution, but the main
benefits are lost if a trusted third party is still required to prevent
double-spending. We propose a solution to the double-spending problem
using a peer-to-peer network.</p>
</blockquote>
<p>中本聪通过数字签名 (digital signatures)，随机散列，哈希算法
(hash)，工作量证明 (proof-of-work, POW)，动态链式存储 (ongoing chain)
等技术，设计了一系列的机制，使比特币能够解决电子支付中的双花难题
(double-spending)，记录篡改等问题，并最终通过严密的数学论证，证明该系统安全有效，稳定可行。</p>
<h1 id="introduction">Introduction</h1>
<p>目前互联网贸易越来越依赖金融机构作为可信任的第三方，那么完全的不可撤销交易实际上是不存在的；那么对不可撤销服务进行支付将需要更大的成本，比如索取付款方更多的个人信息，我们迫切需要在不引入一个可信任方而能在通信通道上进行支付的机制。</p>
<p>本文提出一个基于密码学原理，而不是信任的电子支付系统，该系统允许任何有意愿的双方能直接交易而不需要一个可信任第三方。</p>
<blockquote>
<p>What is needed is an electronic payment system based on cryptographic
proof instead of trust, allowing any two willing parties to transact
directly with each other without the need for a trusted third party.</p>
</blockquote>
<p>本文提出的比特币系统，具有以下三个优点： -
基于密码学原理，而不是信任来建立支付系统。 * based on cryptogtaphic
proof instead of trust - 不需要引入第三方金融机构。 * without third
party financial institutions - 交易不可逆。 * no reverse
transactions</p>
<h1 id="transactions">Transactions</h1>
<!--
如何完成收付款，验证交易有效性，以及存储交易记录，是
-->
<p>我们定义一枚电子货币就是一条数字签名链。 &gt; We define an electronic
coin as a chain of digital signatures.</p>
<p>每个拥有者都通过将上一次交易和<strong>下一个拥有者的公钥</strong>的哈希值的<strong>数字签名</strong>添加到此货币末尾的方式将这枚货币转移给下一个拥有者。收款人可以通过验证数字签名来证实其为该链的所有者。</p>
<blockquote>
<p>Each owner transfers the coin to the next by digitally signing a hash
of the previous transaction and the public key of the next owner and
adding these to the end of the coin. A payee can verify the signatures
to verify the chain of ownership.</p>
</blockquote>
<p><img data-src="http://www.waylon.one/downloads/images/blog/BTC_WhitePaper_Signatures.PNG"></p>
<p>知识点：哈希（Hash）是将目标文本转换成具有<strong>相同长度</strong>的、<strong>不可逆</strong>的杂凑字符串（或叫做消息摘要），而加密（Encrypt）是将目标文本转换成具有<strong>不同长度</strong>的、<strong>可逆</strong>的密文。</p>
<p>到目前为止，有一个问题需要解决，那就是 "收款人不能证实拥有者之一没有对此货币进行双重支付"，也就是一份钱付给了两个人，这也是后面文章中要解决的主要问题。</p>
<blockquote>
<p>The problem of course is the payee can't verify that one of the
owners did not double-spend the coin.</p>
</blockquote>
<h1 id="timestamp-server">Timestamp Server</h1>
<p>时间戳服务器计算包含多个需要被打时间戳的数据项的区块的哈希值，并<strong>广泛地发布公开</strong>这个哈希值。</p>
<blockquote>
<p>A timestamp server works by taking a hash of a block of items to be
timestamped and widely publishing the hash.</p>
</blockquote>
<p>时间服务器，类似于一个交易编年史，把一次次交易按时间顺序记录下来，形成一个个区块链，并为公众所知晓。</p>
<h1 id="proof-of-work">Proof-Of-Work</h1>
<p>工作量证明要解决的问题：采取搜索一个数，使得被哈希时 (如使用
SHA-256)，得到的哈希值以数个 0 比特开始。</p>
<p>平均所需工作量将随所需 0
比特呈指数级增长，而验证却只需执行一次哈希。一般情况下，10 min
求解出一次答案，也就是挖矿的过程。</p>
<blockquote>
<p>The proof-of-work involves scanning for a value that when hashed,
such as with SHA-256, the hash begins with a number of zero bits. The
average work required is exponential in the number of zero bits required
and can be verified by executing a single hash.</p>
</blockquote>
<p>POW 约束：当前区块包含了上一区块的 hash
值，从而形成带时间戳、可验证的链式结构；一旦消耗了 CPU
算力使区块满足了工作量证明，那么除非重做这个工作否则就无法更改区块。由于后面的区块是链接在这个区块后面的，改变这个区块将需要重做所有后面的区块。</p>
<blockquote>
<p>Once the CPU effort has been expended to make it satisfy the
proof-of-work, the block cannot be changed without redoing the work. As
later blocks are chained after it, the work to change the block would
include redoing all the blocks after it.</p>
</blockquote>
<p>POW 特点：按 CPU 投票，解决了多数决定中的确定方式问题 (the problem of
determining representation in majority decision
making)。最长的链代表了多数决定，因为有最大的计算工作量证明的精力投入到这条链上。</p>
<blockquote>
<p>Proof-of-work is essentially one-CPU-one-vote. The majority decision
is represented by the longest chain, which has the greatest
proof-of-work effort invested in it.</p>
</blockquote>
<p>POW
算力限制：为了抵消<strong>硬件运算速度的增加</strong> (摩尔定律) 及平衡不同时期运行节点的利益，工作量证明的难度将由移动平均数法来确定每小时生成区块的平均数。如果区块生成得过快，那么生成的难度就会增加。</p>
<p>MC：BTC 是一个复杂系统，在设计之初，就详细考虑了方方面面。</p>
<blockquote>
<p>To compensate for increasing hardware speed and varying interest in
running nodes over time, the proof-of-work difficulty is determined by a
moving average targeting an average number of blocks per hour. If
they're generated too fast, the difficulty increases.</p>
</blockquote>
<h1 id="network">Network</h1>
<h2 id="分布式网络的运行步骤">分布式网络的运行步骤</h2>
<ol type="1">
<li>新交易向所有节点广播。</li>
</ol>
<!--
广播丢失了怎么办？
-->
<ol start="2" type="1">
<li>每个节点将新交易收集到一个区块。</li>
<li>每个节点为它的区块寻找工作量证明。</li>
<li>当一个节点找到了工作量证明，就向所有节点广播这个区块。</li>
<li>节点只有在区块内所有交易都是有效的且之前没有被支付的情况下接收这个区块。</li>
</ol>
<!--
验证工作量证明是否符合，没有被恶意篡改；验证没有付款方恶意的双重支付的问题。
-->
<ol start="6" type="1">
<li>节点通过使用这个区块的哈希值作为上一个哈希值，在链中创建下一个区块的方式表示对这个区块的接受。</li>
</ol>
<p>根据规定，节点总是认为最长的链为正确的并持续致力于延长它。</p>
<blockquote>
<p>Nodes always consider the longest chain to be the correct one and
will keep working on extending it.</p>
</blockquote>
<h2 id="网络的鲁棒性">网络的鲁棒性</h2>
<ol type="1">
<li>新交易的广播不必到达所有的节点。</li>
</ol>
<ul>
<li>只要到达一些节点，不久就会进入到一个区块。</li>
</ul>
<ol start="2" type="1">
<li>区块广播也是能容忍消息丢失的。</li>
</ol>
<ul>
<li>如果一个节点没有收到某个区块，它将在收到下一个区块时发现它丢失了一个区块然后去请求这个区块。</li>
</ul>
<blockquote>
<p>New transaction broadcasts do not necessarily need to reach all
nodes. As long as they reach many nodes, they will get into a block
before long. Block broadcasts are also tolerant of dropped messages. If
a node does not receive a block, it will request it when it receives the
next block and realizes it missed one.</p>
</blockquote>
<h1 id="incentive">Incentive</h1>
<h2 id="激励组成">激励组成</h2>
<p>我们约定，区块中的第一笔交易是特殊的交易，奖励区块创建者一枚属于 TA
的新货币
(挖矿收益)。这就增加了对支持网络的节点的激励，并提供了一种分发货币到流通领域的方法。
* BTC 消耗 CPU 计算时间和电力 (CPU time and electricity)
资源来稳定地增加新货币，替代了中心发币机构。</p>
<blockquote>
<p>By convention, the first transaction in a block is a special
transaction that starts a new coin owned by the creator of the block.
This adds an incentive for nodes to support the network, and provides a
way to initially distribute coins into circulation, since there is no
central authority to issue them.</p>
</blockquote>
<p>激励也可以由交易费充当。如果交易的输出值小于其输入值，差价就作为交易费被加到<strong>包含此交易的区块的激励</strong>中。一旦预定量的货币进入了流通领域，激励将变为只含有交易费，这样可以完全避免通货膨胀。</p>
<p>所以，区块奖励 = 区块新货币奖励 (若有，奖励逐渐减少) +
区块包含交易中的手续费奖励。</p>
<blockquote>
<p>The incentive can also be funded with transaction fees. If the output
value of a transaction is less than its input value, the difference is a
transaction fee that is added to the incentive value of the block
containing the transaction.</p>
</blockquote>
<p>激励会有助于鼓励节点保持诚实，遵守规则比破坏系统和他自己财产的有效性更有利。</p>
<blockquote>
<p>The incentive may help encourage nodes to stay honest. He ought to
find it more profitable to play by the rules, such rules that favour him
with more new coins than everyone else combined, than to undermine the
system and the validity of his own wealth.</p>
</blockquote>
<h1 id="reclaiming-disk-space">Reclaiming Disk Space</h1>
<p>一旦某个货币的最新交易已经被足够多的区块覆盖，这之前的支付交易就可以被丢弃以<strong>节省磁盘空间</strong>。
* 老的交易被哈希进默克尔树 (Merkle Tree)
(树枝内部的哈希不需要被保存)，只有根节点被纳入到区块的哈希值，那么老的区块可通过剪除树枝的方式被压缩，又不破坏区块的哈希值。</p>
<blockquote>
<p>Once the latest transaction in a coin is buried under enough blocks,
the spent transactions before it can be discarded to save disk
space.</p>
</blockquote>
<p>分布式存储可行性论证：每个不包含交易信息的区块头大约是 80
bytes。如果每 10 分钟生成一个区块，每年生成 80 bytes * 6 * 24 * 365 =
4.2 MB。</p>
<blockquote>
<p>A block header with no transactions would be about 80 bytes. If we
suppose blocks are generated every 10 minutes, 80 bytes * 6 * 24 * 365 =
4.2MB per year.</p>
</blockquote>
<h1 id="simplified-payment-verification">Simplified Payment
Verification</h1>
<p>不运行一个完整的网络节点也是可以进行支付验证的。用户只需拥有一个最长工作量证明链的区块头副本，他可以通过向其他网络节点查询以确认他拥有了最长的链，并获取链接该交易到给交易打时间戳区块的默克尔分支。</p>
<blockquote>
<p>It is possible to verify payments without running a full network
node. A user only needs to keep a copy of the block headers of the
longest proof-of-work chain, which he can get by querying network nodes
until he's convinced he has the longest chain, and obtain the Merkle
branch linking the transaction to the block it's timestamped in.</p>
</blockquote>
<p>虽然收款方自己不能核实这个交易
(零知识证明)，但如果交易已经链接到链中的某个位置，就说明一个网络节点已经接受了此交易，而其后迫加的区块进一步确认网络已经接受了它。</p>
<blockquote>
<p>He can't check the transaction for himself, but by linking it to a
place in the chain, he can see that a network node has accepted it, and
blocks added after it further confirm the network has accepted it.</p>
</blockquote>
<p>缺陷：同样地，只要诚实节点控制着网络，这种简化验证就是可靠的；如果网络被攻击者控制，简化验证
(SPV)
会变得比较脆弱。虽然网络节点可以验证他们自己的交易，但只要攻击者持续控制网络那么这种简化的方法就可能被攻击者的伪造交易欺骗。比如，SPV
钱包 (轻钱包) 存在一定的安全隐患。</p>
<blockquote>
<p>As such, the verification is reliable as long as honest nodes control
the network, but is more vulnerable if the network is overpowered by an
attacker.</p>
</blockquote>
<p>为了更加独立的安全性以及更快的支付确认，收款频繁的公司可能仍需运行他们自己的节点。</p>
<blockquote>
<p>Businesses that receive frequent payments will probably still want to
run their own nodes for more independent security and quicker
verification.</p>
</blockquote>
<h1 id="combining-and-splitting-value">Combining and Splitting
Value</h1>
<p>为允许交易额被分割和合并，交易将包含多个输入值和输出值。
通常是一个从之前交易而得的较大输入值或多个较小输入值的组合，以及最多两个输出值：一个作为支付，另一个作为找零，如果有的话，退还给支付发送方。</p>
<blockquote>
<p>To allow value to be split and combined, <strong>transactions contain
multiple inputs and outputs</strong>. Normally there will be either a
single input from a larger previous transaction or multiple inputs
combining smaller amounts, and <strong>at most two outputs</strong>: one
for the payment, and one returning the change, if any, back to the
sender.</p>
</blockquote>
<h1 id="privacy">Privacy</h1>
<h2 id="如何保护隐私">如何保护隐私？</h2>
<p><img data-src="http://www.waylon.one/downloads/images/blog/BTC_WhitePaper_Privacy.PNG"></p>
<p>如上图，不同于传统的银行模型 (通过限制参与方和可信任第三方对信息的访问来达到一定级别的隐私)，BTC
交易通过保持<strong>公钥匿名</strong> (public keys anonymous)
来保证用户信息的隐私。 *
公众能看到有人正在发送一定量货币给其他人，但是不能将交易关联到某个人，可以类比于证券交易。</p>
<!--
![BTC_WhitePaper_Privacy](AEF5223F2C6D43BE8BCDEE3DF6317CF1)
-->
<blockquote>
<p>The necessity to announce all transactions publicly precludes this
method, but privacy can still be maintained by breaking the flow of
information in another place: by keeping public keys anonymous. The
public can see that someone is sending an amount to someone else, but
without information linking the transaction to anyone.</p>
</blockquote>
<h2 id="又一层隐私保障">又一层隐私保障</h2>
<p>作为额外的防火墙，对每笔交易使用<strong>新密钥</strong> (new key
pair) 对可以防止他们被关联到一个共同的拥有者。</p>
<blockquote>
<p>As an additional firewall, a new key pair should be used for each
transaction to keep them from being linked to a common owner.</p>
</blockquote>
<p>新秘钥泄露隐私风险：由于多输入值交易存在，有些关联仍不可避免，因为<strong>多输入值交易必然暴露其多个输入是属于同一个拥有者的</strong>。风险就在于如果一个密钥的拥有者被暴露，关联性将暴露其他属于同一个拥有者的交易。所以，BTC
交易虽然是支持匿名的，但是不能杜绝通过关联性来获知用户<strong>交易信息</strong>。</p>
<blockquote>
<p>Some linking is still unavoidable with multi-input transactions,
which necessarily reveal that <strong>their inputs were owned by the
same owner</strong>. The risk is that if the owner of a key is revealed,
linking could reveal other transactions that belonged to the same
owner.</p>
</blockquote>
<h1 id="calculations">Calculations</h1>
<h2 id="攻击者的收益">攻击者的收益</h2>
<p>假设一个攻击者生成一条比诚实链更快的替代链，那么系统也不会变得可以任意修改。这种情况下，攻击者既不能凭空创建货币，也拿不走不属于他的钱，因为<strong>网络节点将不会接受无效的交易作为支付，而且诚实节点永远不会接受一个包含无效交易的区块</strong>。<strong>攻击者只可能改变他自己的某笔交易来拿回他不久前已经支出的钱</strong>。</p>
<!--
有没有一种可能，攻击者根本不是为了盈利，而是破坏系统，破坏数学的信任感。
-->
<blockquote>
<p>An attacker can only try to change one of his own transactions to
take back money he <strong>recently</strong> spent.</p>
</blockquote>
<p>攻击者从某一落后位置赶上诚实链的概率类似于赌徒破产理论 (a Gambler's
Ruin problem)，本节主要建立概率模型来估算攻击者赶上诚实链的概率。</p>
<blockquote>
<p>The probability of an attacker catching up from a given deficit is
analogous to a Gambler's Ruin problem.</p>
</blockquote>
<p>省略数学推导及证明...</p>
<p>概率证明的结论：攻击者的虚假链能赶上 z 个诚实区块的概率，随 z
的增长呈指数下降。</p>
<h1 id="conclusion">Conclusion</h1>
<p>我们已经提出了一种<strong>不依赖信任</strong>的电子交易系统。我们从通用的数字签名货币体系开始，这体系提供了<strong>强有力的所有权控制</strong>，但由于缺乏防止双重支付的方法而不完善。</p>
<p>为解决这个问题，我们提出<strong>一种使用工作量证明来记录公共交易历史的点对点网络</strong>，只要诚实节点控制了多数的
CPU 算力，对于对攻击者，交易历史将很快变得在计算上不可更改。</p>
<p>网络因其结构简洁性而健壮。节点只需很少的协调就能同时工作。它们不需要被认证，因为信息不会被发送到某个特殊的位置，<strong>只需被尽力传播</strong>。节点可以随时离开和重新加入网络，只需接受最长的工作量证明链作为它们离开时发生事件的证据。</p>
<p>节点使用 CPU
算力来投票，通过致力于延长有效区块来表达对其接受，通过拒绝在无效区块上工作来表达对其抵制。任何需要的规则和激励都可通过这个共识机制来加强。</p>
<blockquote>
<p>We have proposed a system for electronic transactions without relying
on trust. We started with the usual framework of coins made from digital
signatures, which provides strong control of ownership, but is
incomplete without a way to prevent double-spending. To solve this, we
proposed a peer-to-peer network using proof-of-work to record a public
history of transactions that quickly becomes computationally impractical
for an attacker to change if honest nodes control a majority of CPU
power. The network is robust in its unstructured simplicity. Nodes work
all at once with little coordination. They do not need to be identified,
since messages are not routed to any particular place and only need to
be delivered on a best effort basis. Nodes can leave and rejoin the
network at will, accepting the proof-of-work chain as proof of what
happened while they were gone. They vote with their CPU power,
expressing their acceptance of valid blocks by working on extending them
and rejecting invalid blocks by refusing to work on them. Any needed
rules and incentives can be enforced with this consensus mechanism.</p>
</blockquote>
<p>我的评价：BTC
系统是站在巨人的肩膀上实现，是一种去中心化，分布式的的经济学。首先，数字签名货币体系是已经通用的，但是有明显的双重支付缺陷没有被很好地解决。基于工作量证明的已有研究，作者提出
P2P 交易记账系统，根据 CPU 算力来模拟投票 和
筛选出诚实节点，并且把最长的工作量证明链作为交易账单；各个节点通过致力于延长有效区块来表达对其接受，通过拒绝在无效区块上工作来表达对其抵制；通过挖矿奖励的形式，鼓励了数字货币交易的普及，以及各节点的记账积极性。</p>
<p>论文构建的区块链模型，给科技界带来了一种思想变革，必将颠覆一些行业；BTC
只是区块链的一个应用，而不只是区块链的全部。</p>
<h1 id="references">References</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://explorer.btc.com/btc/home">BTC 浏览器</a></li>
<li><a target="_blank" rel="noopener" href="https://www.blockchain.com/explorer?utm_campaign=dcomnav_explorer">BTC
交易浏览器</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Hh411Z7id">读懂比特币白皮书，区块链开山之作，中本聪到底说了什么？</a>
<ul>
<li>非常好的视频讲解，带你快速了解白皮书。</li>
</ul></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Finance/nobody-s-2020-finance-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Finance/nobody-s-2020-finance-summary/" class="post-title-link" itemprop="url">小人物的 2020 理财总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-02-18 20:44:45" itemprop="dateCreated datePublished" datetime="2021-02-18T20:44:45+08:00">2021-02-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Finance/" itemprop="url" rel="index"><span itemprop="name">Finance</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>4.4k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>16 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/2020_2021.jpg" alt="辞鼠迎牛">
<figcaption aria-hidden="true">辞鼠迎牛</figcaption>
</figure>
<p>嘻嘻，终于有空在春节写点东西，总结和反思下自己在 2020
年的理财得失，以及自己在 2021 年的理财规划。</p>
<p>因为我不是专业的投资者，投资经验只有 5
年，观点可能经不起推敲，请大家谨慎阅读。</p>
<p>首先，先开诚布公地跟大家分享下自己的投资风格和投资目标。如果 我 和 你
的投资风格和目标相差甚多，那么你就可以不必浪费时间阅读下面的内容了，以免给你造成困扰。</p>
<p>首先，我是一个 995
的打工人，不是一个专业的投资者，也没有相关的金融背景。自己的理财经验和感悟，是最近几年在金融市场里摸爬滚打，用真金白银换来的，以及在阅读一些投资理财书籍中获得的。</p>
<!--
我自认为自己思考和归纳总结的能力还不错，所以在这篇文章中记录下来。
-->
<p>其次，我主要投资基金理财，不需要耗费大量时间看个股和盯盘，看好盈利趋势干就行了。自己是打工人，不可能长时间盯着屏幕炒股票，对市场消息有滞后性。同时，自己没有太多时间了解过多个股，不喜欢和散户凑热闹，炒热点，钟情于价值投资，希望陪伴
TA 慢慢成长。</p>
<!--
选来选取，还是基金适合自己，不需要耗费大量时间看个股和盯盘，看好盈利趋势干就行了。
-->
<p>最后，我的投资风格是偏理性的激进，不属于 “赢了会所嫩模，输了下地干活” 的激进风。目前，希望经过自己的精细打理，<strong>收益能够跑赢通货膨胀</strong>，让自己用时间换来的财富 (精神损失费) 不贬值。</p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/gamble.jpg" alt="赌博式投资">
<figcaption aria-hidden="true">赌博式投资</figcaption>
</figure>
<h1 id="基金">基金</h1>
<p>2020
年，自己的投资风格基本成型，“主题定投，波段赎回”；在市场大环境不错的情况下，收益可观。以支付宝为例，2020
年的盈利大概是
30%，超过了大多数股市投资者，但是自己盘子小，总体收益也只有一万多元。</p>
<p>基金定投就像整流器一样，可以抚平市场的短期波动，持有时间越长，基金均价越贴近于实际价值。理想情况下，基金投资者，只要选择好的方向和主题，开启长期的定投，最后在一个价位高时卖出基金即可盈利；那么，<strong>买什么和何时卖出，才是基金理财的关键</strong>，没有人能够简单告诉你答案，需要自己边实践，边感悟。</p>
<p>什么是 “主题定投，波段赎回” 策略呢？</p>
<p>基金类型和数量非常庞大，“主题定投” 的核心是
确定你长 / 短期看好的投资方向 (比如当前火热的消费，医药和科技)，然后选择该方向上表现好的基金开启定投。</p>
<!--
基金类型比较多，我定投宽基，是确保大盘子获得长期稳健增长；买了许多行业基金，争取一些行业增长的机会。现在我加大买入主动基金，是为了让那些牛人，替我做出更多更聪明的判断。
-->
<p>举个例子，2020
年中期，我认为银行股被严重低估，短期应该能看到银行股的上升潜力
(投资方向以及赢利点)。然后，我从众多银行类基金中选择好的基金 (考虑基金经理，基金类型，基金回撤，基金盈利等因素)，然后开启定投。现在看起来，我当时的分析和选择是正确的，短短半年就有了真金白银的回报。</p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/2020_bank_fund.JPEG" alt="某银行基金定投">
<figcaption aria-hidden="true">某银行基金定投</figcaption>
</figure>
<p>除了买什么，基金定投的另一点是 “什么时候卖出比较好”？“波段赎回”
策略就是等待多个高波段，逐步赎回，落袋为安。我通常的做法是，如果收益超过
15%~20%，自己会卖出去三分之一；如果收益超过
30%，自己会再卖出去三分之一。这样的操作，简单粗暴，优势是让自己的收益陆陆续续落袋为安，你不需要分析市场的走势，估计也很难预测准确；劣势是你前期的赎回，可能错过基金持续上涨带来的收益，把一只大基腿吃成了小鸡腿。</p>
<p>比如，下图的赎回操作，中间波段高点赎回去一部分，后面的基金上涨和我就无缘了。</p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/2020_medi_fund.JPEG" alt="某医药基金定投">
<figcaption aria-hidden="true">某医药基金定投</figcaption>
</figure>
<p>因为定投不择时，卖出不择时，今年自己在股市中做到了
“任尔东西南北风，咬定青山不放松”。在 2020 年疫情爆发，股市低点时 (A 股
2700+ 点) 依然坚持定投，在股市翻过 3000
点门槛时，也没有慌慌张张地清仓下车，而是卖出去一部分落袋为安，最后在年底
3600 点 的时候，依然持有和年初差不多的份额。</p>
<p>基金如果想赚钱，广撒网，大水漫灌是不太适合的。你只有有所侧重，才可以收获理想的收益，否则自己广撒网，很可能你只是自己一番骚操作，自己手动配置了一个
XX 指数，或者重仓了一个市场不看好的板块。</p>
<p><strong>基金类型比较多，我定投宽基，是确保大盘子获得长期稳健增长；买了许多行业基金，是为了争取一些行业增长的机会；我买入主动基金，是为了让那些牛人，替我做出更多更聪明的判断。</strong></p>
<p>2020 年前，自己喜欢在支 * 宝上，购买平台推荐的基金，往往是这只基金买 10
块，那只基金每周定投 10
块钱等等小额操作，基金投资特别零散。这些零散小额基金就像杂音一样，浪费了自己的精力，自己不清楚自己的投资分布是什么，布局重点是什么，赚钱收益怎么样。</p>
<p>自己在 2020
年花几天的时间，整理了自己的所有基金，按照基金优劣，清理掉部分小额基金和自己不看好的方向，最后剩下来一部分表现良好的基金，大约有
30 只左右，开启定投。经过上述清洗后，现在每月只需要花 3
个小时左右，回顾这些基金的涨势是否符合预期，是否需要做出调整，就可以清晰地理清楚自己的投资重点和收益情况。</p>
<!--
![我的基金投资表格]()
-->
<h1 id="比特币">比特币</h1>
<p>虽然前期有点像 48 年入国军，今年夏天在比特币涨起到 14k
美金后，自己小额买入了一部分比特币，自己的本意是收藏一些比特币。无论 BTC
涨势如何，已持有的 BTC
数量不会波动，自己打算购买并存入钱包，不参与市场交易。</p>
<p>我投资陌生的领域，喜欢<strong>小额买入，快步学习</strong>，花费一小部分的钱进场，然后用真金白银吸引自己去学习和了解这个领域。自己第一次花
100
元买入比特币，尝试了数字货币买入和卖出，转存和转出到钱包，这个流程下来因为手续费折掉了
40 多块钱，但是自己对数字货币的交易流程和特点基本摸清楚了，于是开始 k
级别的投资。</p>
<p>如果你想了解比特币是如何产生和运作的，可以参考我的 BTC 白皮书阅读笔记
-- <a target="_blank" rel="noopener" href="http://waylon.one/BTC/A-Peer-to-Peer-Electronic-Cash-System/">解读
A Peer-to-Peer Electronic Cash System</a>；
关于新手购买比特币的教程，以及自己学习到的知识点总结，可以参见我的文章
<a target="_blank" rel="noopener" href="http://waylon.one/monthly-skills/buy-one-bitcoin/">第一次购买比特币并转到钱包收藏</a>。</p>
<p>对于比特币，我虽然是抱着<strong>收藏</strong>的目的购买的，没有想到购买后没多长时间，BTC
就开始快速增长，从购买之处的 14k 美金，飙升到了 46k 美金，自己当时投资
1000 元人民币买入的 BTC，现在的价值也有 3000+
元，收藏的想法已经开始动摇了。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/2020_btc.PNG"></p>
<!--
“快速试错，小步快跑”
-->
<p>注意，我不是在鼓励大家购买数字货币，而是希望告诉大家，数字货币类似于黄金，也是分散理财风险的一种措施。最后，<strong>别碰杠杆，别碰期货</strong>。</p>
<p>现在，我每周拿出来 100 元人民币购买比特币，这 400
元 / 月对我生活影响不大。如果碰巧数字货币赚到了，我会非常开心并在适当时候卖出变现；如果数字货币暴跌，我会把购买的数字货币转到钱包里长期存储，我的生活基本可以不受影响地继续下去；即使交易平台倒闭，数字货币血本无归，我的生活也基本不受影响。</p>
<h1 id="保险">保险</h1>
<p>财产投资到不同平台和门类，一个目的是为了规避单一风险，那么保险也是一种以规避风险为主要目标的投资。消费型保险看起来，只有支出，没有盈利，但是这是生活的安全垫，缓冲了家庭变故带来的风险。</p>
<p>购买保险是一门大学问，没有网络或公众号上说的那么简单，有些人或者平台煽动你购买保险，很大目的是为了销售提成，你购买后便对你不理不睬，把所有的后续责任都推给你自己解决。你需要在购买前保持清醒的大脑和认识，不要购买时糊里糊涂一时爽，买后无人给你答疑，理赔时自己扛下一堆麻烦。<strong>普通人最好有专业的人员指导 (不是指保险销售人员)，或者充分了解后再购买，以免有不必要的麻烦。</strong></p>
<p>分享一篇自己的踩坑经历 <a target="_blank" rel="noopener" href="http://waylon.one/Insurrance/insurrance-issue/">记一次光大永明人寿保险的坑</a>。</p>
<p>注意，尽管保险坑比较多，我还是鼓励大家根据自己的收入和年龄，购买一定的保险，早买早安心。</p>
<p>分享一篇 <a target="_blank" rel="noopener" href="http://www.minxueyu.com/2019/06/12/%E5%AE%B6%E5%BA%AD%E9%85%8D%E7%BD%AE%E4%BF%9D%E9%99%A9%E7%AD%96%E7%95%A5/">家庭配置保险策略</a>，希望读者能够了解保险，不被忽悠，理性购买适合自己的保险。</p>
<h1 id="股票">股票</h1>
<p>我在 2020
年也同样购买了股票，但是和基金收益相比，两者收益完全是冰火两重天：基金是蒸蒸日上，股票是一泻千里。</p>
<p>和基金相比，股票投资的是个股，需要你不仅懂宏观，还要对个股深入了解；基金着重于看大局，大趋势，股票还要求你看微观 (单家公司)；微观操作中，自己理财知识和经验的复用度有限，你需要一家家公司了解，占用时间成本比较大，甚至会侵占你个人成长的时间，得不偿失。另外，我个人性格是<strong>比较喜欢看大局，看宏观，而不喜欢微观的操作</strong>。</p>
<p>正因为上述原因，我不打算把大量的时间和资金花费在股票投资上，我后期的投资会减少股票占比，加大基金的投资比重，选择长期表现好，回撤控制好，风格更均衡的基金长期定投。</p>
<p>可能是自己没有时间了解个股，或者前面一两年没有经验，根据自己的空头逻辑判断，自己购买了大量的垃圾股，多次高位接盘，比如因为中美贸易战，分析信息安全可能会火，接盘
“360”，一次次踏空。因为不清楚为什么涨，好多入手的股票，也是稍微涨一点就赶紧卖出，本来是一条大鱼，结果自己只啃到点肉末。</p>
<p>我现阶段不会完全放弃股票投资，打算选定几家好公司，开始投资。资本市场最不缺的就是机会，所以捂好自己的现金，选择好的公司再下手。</p>
<p>注意，以下不是投资推广，莫要模仿。</p>
<p>我打算在今年加大对以下股票的持仓。</p>
<h2 id="中国核能-601985">中国核能 (601985)</h2>
<p>为什么我打算今年重金买入呢？</p>
<p>在中国做投资，无论是买房也好，还是买股票、信托也好，或者是创业也好，在中国做任何事情的前提就是需要关注中国的政策方向和趋势。我们购买股票需要看国家风向以及预期，毕竟大家炒股炒的就是预期嘛！</p>
<!--
2015年，当时的“牛市”戛然而止，主要是流动性突然減少(俗称“水少了”)，市场没有钱，股市从5000多点一直跌到2000多。

时间到了2018年，中央出台资管新规，推行整个中国经济去杠杆，换句话来说，就是整体市场没有钱了，当年的股市也相当凄惨。

任何市场，充裕的资金是上涨的必要条件，如果没有这个前提，难以出现大型牛市。

我投资主要看两个方面：第个是现在市场里流动性是否充沛(即有没有钱)；第二个是国家监管机构的监管口径这件事情实际上决定了中国整个资本市场的走势，尤其事关股市到底是牛市还是熊市等问题。

从目前的资金面来看, 2020年，央行释放了大量流动性，甚至通胀压力已经凸显2021年央行适度回收货币，保证合理供应是主基调。

-->
<p>首先，在宏观上，中美贸易，国内主打内循环，这就意味着中国大宗商品，煤炭石油等进口受限；其次，中国在积极发展核电，核电是清洁能源，在未来碳排放交易规则下，核电的占比越高，碳规则下优势越大。最后，现在的高压传输技术组建成熟，可以实现西电东送，在西部地区建立核电站，缓解了核电危险。</p>
<p>目前，我没有对中国核电这家企业了解太多，但是我后期会认真分析这家公司。</p>
<p>在这里立一个 flag，在明年回顾时，看看自己的断言是否准确。</p>
<!--
# 黄金

自己对黄金的投资很少，现在是每天 10 元的定投，自己的目标是保值而不是盈利。
-->
<hr>
<p>上面内容和理财直接相关，下面分享下自己这一年的理财间接成长。</p>
<h1 id="好的习惯">好的习惯</h1>
<h3 id="每月整理自己的基金">每月整理自己的基金</h3>
<p>自己原来胡乱地买入基金，对手头持有的基金数量和收益情况不清楚。现在自己会每月定期比较和复盘持有基金，做到心中有数，优胜劣汰，逐步买入和卖出。</p>
<!--
- 每三个月一次的财务体检

每三个月，我会把自己的所有财富做一次整理，查漏补缺，做到心中有数。
-->
<h3 id="出售闲置下来的物品">出售闲置下来的物品</h3>
<p>因为自己经常会乱买东西，家中有很多不常用或者不好用的物品，今年开始在二手交易 (如闲 * 鱼) 平台上出售，大概折现了几百块钱。现在自己有点一发不可收拾，家中但凡有点闲置物品，就想卖出去换钱。</p>
<p>出售闲置物品是一个好习惯，一方面没有浪费资源，东西在别人那里活过来了；另一方面，赚回来一部分本金，节约了自己的时间。</p>
<p>分享我喜欢的二手交易平台：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/66798566">把二手书店搬到网上的多抓鱼</a>
<ul>
<li>当你想卖掉家里囤积的旧书，只需要打开「多抓鱼」，扫描 ISBN
码后，等待顺丰快递员上门收书即可，经过多抓鱼经过审核后，你就能得到卖书钱了。</li>
</ul></li>
</ul>
<hr>
<h3 id="租赁电子产品">租赁电子产品</h3>
<p>生活中，有些东西可能只是偶尔用一下，那么可以选择租赁而不是购买这些物品；一方面节约了维护成本，一方面剩下的钱可以用于投资。</p>
<p>试想一下，当你准备一场说走就走的旅行，原本需要在这个期间动辄上万去使用相机或者无人机记录精彩瞬间时，现在仅需动动手机花上几百块的租金就能用上好几天，这难道不就正是科技社会进步所带来的美好吗？</p>
<p>分享我体验过的租赁平台： * <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/48288982">探物租赁</a></p>
<hr>
<h3 id="阅读财报">阅读财报</h3>
<p>目前，我定投的基金数目不多，我每月会强迫自己关心买入的基金具体情况。通过阅读基金报告，看看基金经理的看法，以及下一步的投资倾向，是否和自己匹配，做到知己知彼。</p>
<!--
- 读书

很遗憾，自己今年本来打算读完《穷查理宝典》，但是因为事情多，再加上这本书实操性差，自己只是读到了一般就束之高阁，希望今年继续读完。-->

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Linux/linux-interminal-shortcut-cmd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Linux/linux-interminal-shortcut-cmd/" class="post-title-link" itemprop="url">Linux 终端</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-01-29 06:03:58" itemprop="dateCreated datePublished" datetime="2021-01-29T06:03:58+08:00">2021-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>648</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>2 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<h1 id="shell-和-终端-的概念区别"><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_38214171/article/details/90050340">shell
和 终端 的概念区别</a></h1>
<ul>
<li><ruby>终端<rt> termimal</rt></ruby>，作用是<strong>提供一个命令的输入输出环境</strong>，在
linux 下使用组合键 ctrl+alt+T 打开的就是终端。</li>
<li>shell 是一个<strong>命令行解释器</strong>，是 linux
内核的一个外壳，负责外界与 linux 内核的交互。shell
接收用户或者其他应用程序的命令，然后将这些命令转化成内核能理解的语言并传给内核，内核执行命令完成后将结果返回给用户或者应用程序。</li>
</ul>
<p>也就是说，当你打开一个 terminal 时，操作系统会将 terminal 和 shell
关联起来。terminal 从用户这里接收输入（键盘、鼠标等输入设备），扔给
shell，然后把 shell 返回的结果展示给用户（比如通过显示器）；shell 从
terminal
拿到用户输入的命令，解析后交给操作系统内核去执行，并把执行结果返回给
terminal。</p>
<p><img data-src="../downloads/images/shell_terminal.webp"></p>
<h1 id="终端命令行快捷键">终端命令行快捷键</h1>
<ul>
<li><strong>ctrl + a</strong> 回到命令行的行首</li>
<li><strong> ctrl + e</strong> 回到命令行的行尾</li>
<li><strong> ctrl + c</strong> 取消当前行输入的命令，并重新到下一行</li>
<li><strong> ctrl + r</strong>
出现命令历史记录搜索提示，输入字符后会自动匹配命令</li>
<li><strong> ctrl + b</strong>
向后退一个字符，相当于向<strong>左方向键</strong></li>
<li><strong> ctrl + f</strong>
向前进一个字符，相当于向<strong>右方向键</strong></li>
<li><strong> ctrl + p</strong>
向上翻以前的输入命令，相当于向<strong>上方向键</strong></li>
<li><strong> ctrl + n</strong>
向下翻以前的输入命令，相当于向<strong>下方向键</strong></li>
<li><strong> alt + b</strong> 向后跳一个字</li>
<li><strong> alt + f</strong> 向前进一个字</li>
<li><strong> ctrl + w</strong> 从光标位置向后删除一个字</li>
<li><strong> ctrl + y</strong> 粘贴最后一个删除的字</li>
<li><strong> ctrl + d</strong> 删除当前光标位置的一个字符</li>
<li><strong> ctrl + u</strong> 从光标当前位置删除所有字符至行首</li>
<li><strong> ctrl + k</strong>
从光标当前位置删除所有字符至行尾，相当于长按 ctrl + d</li>
</ul>
<h2 id="history----历史命令">history -- 历史命令</h2>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 在历史中搜索 start的命令</span><br><span class="line">history |grep start</span><br></pre></td></tr></tbody></table></figure>
<h2 id="mv-移动文件">mv 移动文件</h2>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># The `mv` command doesn't have an `-R` flag, it moves folders recursively</span><br><span class="line">sudo mv fromPath/ toPath/</span><br></pre></td></tr></tbody></table></figure>
<h3 id="参考资料">参考资料</h3>
<ul>
<li><strong><a target="_blank" rel="noopener" href="https://askubuntu.com/questions/210168/moving-folder-and-subfolder-to-another-path">Moving
folder and subfolder to another path</a></strong></li>
</ul>
<h2 id="tar-文件解压缩">tar 文件解压缩</h2>
<ul>
<li>The <code>tar</code> command allows you to create and extract tar
archives. The tar command auto-detects compression type and extracts the
archive.</li>
<li>Bzip2 is one of the most popular algorithms for compressing tar
files. By convention, the name of a tar archive compressed with
<strong>bzip2</strong> ends with either <strong>.tar.bz2</strong> or
<strong>.tbz2</strong>.</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xf archive.tar.bz2</span><br></pre></td></tr></tbody></table></figure>
<h3 id="参考资料-1">参考资料</h3>
<ul>
<li>https://linuxize.com/post/how-to-extract-unzip-tar-bz2-file/</li>
</ul>
<h1 id="reference">Reference</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lvchaoshun/p/9251834.html">linux
终端命令行的快捷键列表</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000016129862">命令行界面
(CLI)、终端 (Terminal)、Shell、TTY，傻傻分不清楚？</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/AV/waymo-safety-report-2020/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/AV/waymo-safety-report-2020/" class="post-title-link" itemprop="url">解读 Waymo Public Road Safety Performance Data</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-01-21 22:10:19" itemprop="dateCreated datePublished" datetime="2021-01-21T22:10:19+08:00">2021-01-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AV/" itemprop="url" rel="index"><span itemprop="name">AV</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>9k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>33 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<p>在 2018 年 3 月的亚利桑那州坦佩市，一辆 Uber
自动驾驶汽车撞死一名行人的事件至今让人们心有余悸，安全问题自那次事件之后饱受争议。</p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/Uber_hit_cyclist.png" alt="Uber 自动驾驶撞死行人事故">
<figcaption aria-hidden="true">Uber 自动驾驶撞死行人事故</figcaption>
</figure>
<p>2020 年 10 月 末，自动驾驶领域的领跑者 -- Waymo，在其 <a target="_blank" rel="noopener" href="https://waymo.com/safety">官网</a>
首次公开披露了其在凤凰城运营自动驾驶汽车的里程和碰撞数据，本文基于这份报告，提炼一些观点和数据。</p>
<p>报告传送门：<a target="_blank" rel="noopener" href="https://storage.googleapis.com/sdc-prod/v1/safety-report/Waymo-Public-Road-Safety-Performance-Data.pdf">Public
Road Safety Performance Data</a></p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/waymo_fleet.png" alt="Waymo 自动驾驶车队">
<figcaption aria-hidden="true">Waymo 自动驾驶车队</figcaption>
</figure>
<p>在这份总结了过去 21 个月（2019 年全年和 2020 年前 9
个月）凤凰城郊区自动驾驶汽车运营报告中，Waymo 承认其自动驾驶汽车卷入了
18 起碰撞事故，还有 29 次是 “差点出事故”（在模拟器中），并表示
“几乎所有” 这些碰撞事件都是人类司机或行人的过错，而且没有造成任何 “严重或危及生命的伤害。</p>
<p>报告将碰撞方式分为 “单车事件” 和 “多车辆事件”，其中单车事件包含： 1.
涉及道路偏离、与道路环境 / 基础设施或其他固定对象接触的事件； 2.
涉及机动车辆行驶的事件，碰到行人或骑自行车的人； 3.
车辆被行人或骑自行车的人撞到的事件。</p>
<p>前两种情况相加，能占到致命碰撞贡献率的 60%。</p>
<p>多车辆事件则包括：</p>
<ol type="1">
<li>倒车碰撞</li>
<li>侧擦碰撞</li>
<li>正面碰撞</li>
<li>或对方逆行、追尾碰撞</li>
<li>在十字路口或拐角处的碰撞等等。</li>
</ol>
<p>在论文中，Waymo case by case 地概述了其他人类驾驶员的 “违反道路规则”
是如何导致 “严重” 碰撞的。</p>
<h1 id="专业名词介绍">专业名词介绍</h1>
<ul>
<li>automated vehicles (AVs)</li>
<li>automated driving system (ADS)</li>
<li>operational design domain (ODD)</li>
</ul>
<!--
- conflict-avoidance or collision-avoidance
- the Waymo vehicle was stopped or traveling straight in a designated lane at or below the speed limit.
- above the posted speed limit
- a dedicated left turn lane
- traffic controls or traffic conditions
- relative contact speeds 相对碰撞速度
- a speed bump
- slip lanes
- failed to obey the applicable traffic control device
-->
<h1 id="abstract">Abstract</h1>
<ul>
<li><p>这份报告总结了 Waymo 在凤凰城 (Phoenix) 测试区域的 610
万英里的自动驾驶测试数据，包括有车上安全员监管 ( trained operator behind
the steering wheel) 的自动驾驶，和 65000 英里的没有安全驾驶员无人驾驶
(driverless operation)。 &gt; The data presented in this paper
represents more than 6.1 million miles of automated driving in the
Phoenix, Arizona metropolitan area, including operations with a trained
operator behind the steering wheel from calendar year 2019 and 65,000
miles of driverless operation without a human behind the steering wheel
from 2019 and the first nine months of 2020.</p></li>
<li><p> 报告中承认，这段测试期间 Waymo 自动驾驶汽车卷入了 18
起真实的碰撞事故和 29
次仿真事故 (被安全驾驶员及时接管，但是在模拟器中发生碰撞事故)，所幸<strong>均没有造成致命伤害</strong>。
&gt; There were 47 contact events that occurred over this time period,
consisting of 18 actual and 29 simulated contact events, none of which
would be expected to result in severe or life-threatening
injuries</p></li>
<li><p>Waymo
表示，绝大多数事故都和人类驾驶员的不守规则和其他错误相关；由其他司机不谨慎行为诱发的事故频率清楚地提醒人们，只要自动驾驶汽车与人类司机共享道路，避免碰撞就是一大挑战。
&gt; Nearly all the events involved one or more road rule violations or
other errors by a human driver or road user. &gt; The presence of
collisions that resulted from challenging situations induced by other
drivers serves as a reminder of the limits of AV collision avoidance as
long as AVs share roadways with human drivers.</p></li>
<li><p> 在 Waymo
看来，报告不只是向公众公开测试里程和事故，更是做了一个向公众分享自动驾驶行驶安全的一个例子。
&gt; The long-term contributions of this paper are not only the events
and mileages shared, but the example set by publicly sharing this type
of safety information.</p></li>
</ul>
<p>目前，很多自动驾驶的公司可能都在努力创造一个 “黑匣子”，仅在最受控制的环境下向公众展示其技术领先性、跑了多少里程、拿了多少牌照，很少像
Waymo 这样向外界详细披露自动驾驶汽车在现实生活中短板，开始直面问题。</p>
<h1 id="introduction">Introduction</h1>
<ul>
<li>报告的目的是公开更多数据，来尽力提高公众对自动驾驶车辆的信心和接受程度
(acceptance)。 &gt; The purpose of this paper is to make available
relevant data to promote awareness and discussions that ultimately
foster greater public confidence in AVs.</li>
</ul>
<h2 id="public-road-testing">Public Road Testing</h2>
<ul>
<li>在测试初期，为了保证 AVs
在公开道路测试时的安全和行为合理，会有经过培训的驾驶员坐在驾驶员的位置，随时准备接管车辆。
&gt; In order to perform initial public road testing of AVs in a safe
and responsible manner, trained vehicle operators are seated in the
driver’s seat and can take over the driving task at any time.</li>
</ul>
<h2 id="the-role-of-counterfactual-what-if-simulation">The Role of
Counterfactual (“What If”) Simulation</h2>
<p>Waymo
统计了经过培训的安全驾驶员控制车辆以避免碰撞的事件，然后工程师们会模拟如果驾驶员没有接管车辆自动驾驶系统的话会发生什么，从而产生一个反事实或
“假设”
出来的推断情景。他们利用这些事件来不断检验调整汽车的临场决策反应，然后利用这些数据改进其自动驾驶软件。</p>
<ul>
<li><p>反现实的仿真用来预测自车在接管后的一段时间内的表现，给我们提供如果安全员没有接管，那么自车会发生什么的视角。
&gt; Counterfactual disengagement simulation is used to represent the
predicted vehicle response for a brief period (seconds) after
disengagement, and the simulation outcome provides insight into what
could have happened had the trained operator not intervened. &gt; MC:
只能提供极短时间的仿真，否则容易和真实世界背离。另外，需要有精细的模型，可以预期如果没有接管发生，交通参与者的行为。</p></li>
<li><p>反事实的接管仿真可以独立使用 (individually) 也可以聚合使用 (in
aggregate)。 &gt; The outcomes of counterfactual disengagement
simulations are used both individually and in aggregate.</p>
<ul>
<li>独立仿真时间：场景库的虚拟仿真，可以作为评估软件开发的测试集。 &gt;
Individual counterfactual disengagement simulation: If the simulation
outcome reveals an opportunity to improve the behavior of the ADS, then
the simulation is used to develop and test changes to software
algorithms. The disengagement event is also added to a library of
scenarios, so that future software can be tested against the scenario.
&gt;
在细分领域，自动驾驶的策略会随着接管场景而发生调整和变化，容易造成回滚，而这些场景集合可以作为软件的回滚测试的一部分。</li>
<li>聚合使用：评估 AVs 的路测表现。 &gt; At an aggregate level, Waymo
uses results from counterfactual disengagement simulations to produce
metrics relevant to the AV’s on-road performance.</li>
</ul></li>
<li><p> 软件进化带来的仿真不可复现性问题 &gt; Waymo’s models will
continue to evolve, and even for these brief simulations, future models
may result in different simulated outcomes.</p></li>
</ul>
<!--
> 甩锅句子，仿真如何和描述不符，那是算法更新导致的。
-->
<h2 id="aims-and-contributions-of-this-paper">Aims and Contributions of
this Paper</h2>
<ul>
<li><p>报告包括在 610 万英里测试中的事故总计和事故描述
(包括真实的事故和实际接管但发生仿真事故)。这部分里程，相当于美国普通持证司机
500 多年的驾驶里程。 &gt; This paper includes safety data in the form of
event counts and event descriptions from over 6.1 million miles of
driving conducted in the Waymo Driver’s driverless ODD. This mileage
figure represents over 500 years of driving for the average U.S.
licensed driver.</p></li>
<li><p> 本文提供了两种信息：一种是在或无安全驾驶员情况下的真实碰撞（actual
contact
event）；一种是驾驶员接管，但是在后续的仿真中发生碰撞的，但是因为安全员接管实际没有发生碰撞。
&gt; For these miles, this paper provides information regarding</p>
<ol type="1">
<li>every actual contact event that vehicles were involved in during
driverless operation with and without trained operators, as well
as<br>
</li>
<li>events in which the vehicle’s trained operator disengaged and
subsequent counterfactual simulation resulted in any contact between the
AV and the other agent, had the disengagement not occurred</li>
</ol></li>
</ul>
<p>在 2019 年 1 月至 12 月期间，Waymo 在自动驾驶模式下行驶了 610
万英里。从 2019 年 1 月到 2020 年 9 月期间，Waymo 在无人驾驶模式下行驶了
6.5 万英里。该公司表示，综合来看这相当于 “美国普通持证司机 500
多年的驾驶时间”。</p>
<h1 id="methods">Methods</h1>
<h2 id="data-sources">Data sources</h2>
<ul>
<li>Waymo 自动驾驶软件的最高速度是 45 英里每小时，换算成公里数是
72.4km/h。除了大雨和沙尘暴天气，会在白天和夜间进行无人驾驶测试。 &gt;
The ODD includes roadways with speed limits up to and including 45 miles
per hour. Driverless operations occur at all times day and night, except
during inclement weather including heavy rain and dust storms.</li>
</ul>
<!--

45 miles/h =  72.4km/h

-->
<p>报告分享的数据来源于两方面： - 无人驾驶（Driverless
operation），即车上没有驾驶员，在整个过程中由自动驾驶系统 (automated
driving system) 控制车辆。 &gt; Driverless operation, in which the
automated driving system controls the vehicle for the entire trip
without a human driver behind the wheel or otherwise being available to
<strong>assume</strong> any part of the driving task.<br>
&gt; MC: 这种模式下，在 2019 年初到 2020 年九月底的测试里程是 6.5
万英里。</p>
<ul>
<li>由驾驶员的自动驾驶（Self-driving with trained
operators）：虽然由自动驾驶系统控制车辆，但是车上有安全驾驶员可以随时接管车辆。
&gt; Self-driving with trained operators , in which the automated
driving system controls the vehicle but there is a trained vehicle
operator in the driver’s seat who can disengage and take over the
driving task.<br>
&gt; MC: 这种模式下，2019 年全年的测试里程是 6.1
百万里程。提供一整年的测试数据，可以控制和规避潜在的季节影响
(controlling for potential seasonality
effects)。在评估自车表现时，不能忽略季节影响，比如秋天有落叶误感，方向盘急打要比冬季严重。</li>
</ul>
<h2 id="data-from-actual-collisions-and-minor-contacts">Data from Actual
Collisions and Minor Contacts</h2>
<ul>
<li>数据包括自动驾驶 (self-driving with trained operators mode)
或无人驾驶 (driverless mode) 模式下每一个真实碰撞 (actual collision)
和小事故 (minor contact event)，甚至包括行人撞上静止自车的事故。 &gt;
This definition encompasses not only every severity of collision, but
also events such as a pedestrian walking into the side of the stationary
AV.</li>
</ul>
<!--
- 难以相信，怎么还有行人撞上静止自车的情况呢？
-->
<h2 id="data-from-counterfactual-what-if-simulation">Data from
Counterfactual (“What If”) Simulation</h2>
<h3 id="simulation-of-the-av-motion-post-disengagement">Simulation of
the AV motion post-disengagement</h3>
<ul>
<li>接管后的仿真 (post-disengage simulation) 第一步，就是仿真自车的表现
(AV’s counterfactual post-disengage
motion)。这样的仿真比较简单，容易快速实现。 &gt; The first step in
post-disengage simulation is therefore to simulate the AV’s
counterfactual post-disengage motion. &gt; This is performed by
providing a simulation running Waymo self-driving software with the AV’s
pre-disengage position, attitude, velocity, and acceleration along with
the AV’s recorded sensor observations and simulating the response of the
software and resulting motion of the Waymo vehicle.</li>
</ul>
<!--

条件状bai语从句中的虚拟语du气，对过去zhi的虚拟，had提前dao，省掉if
- (If sb) had done sth, sb would have not done.
  * 如果某人做了bai...，某人就不会...，例句：
- If he had taken my advice, he wouldn't have failed. 

or

- Had he taken my advice, he wouldn't have failed.

-->
<ul>
<li><p> 检测是否和其他交通参与者有碰撞，重叠的位置 (overlapping
positions) 意味着有潜在的碰撞 (potential collision)。 &gt; Overlapping
positions indicate a potential collision. After the AV’s post-disengage
motion is simulated, a check is performed to determine if the simulated
positions of the AV overlap at any point with the recorded positions of
other agents.</p></li>
<li><p> 仿真第二步：在接管和仿真两种情况下，自车的行为存在不一致
(比如位置和速度不一样)，那么就会影响其他参与者的行为，所以做仿真时，参与者的行为可能和实际不符，需要为其他交通参与者重新建模
(modeling the behavior of other
agents)。这是比较困难的，需要有比较丰富的模型和交互设计。 &gt; This may
not be <strong>realistic</strong> in cases where the other agents would
likely have responded differently to the AV’s counterfactual simulated
motion than they did to the AV’s actual post-disengage motion. In such
cases, further simulation is required.</p></li>
<li><p> 总结一下，接管后的仿真，不仅需要使用恰当的软件，仿真自车的行为，也需要仿真其他交通参与者的行为，而这是比较困难的。</p></li>
</ul>
<h3 id="modeling-of-other-agents">Modeling of other agents</h3>
<ul>
<li><p>为其他交通参与者长时间建模是比较有挑战性的，但是在接管后的短时间内建立冲突避免
(conflict-avoidance) 或避障行为 (collision-avoidance) 是可行的做法。
&gt; While modeling agent behavior over long periods of time is
challenging, understanding plausible conflict-avoidance or
collision-avoidance behavior over the short time horizon following a
disengagement is a more feasible task.</p></li>
<li><p>Waymo 使用人类避障行为模型 (human collision avoidance behavior
models)
来反映短期内障碍物的表现；可以使用离散的多因素 (反应时间、刹车和打方向盘的力度) 来反映交通参与者可行的反应空间
(the space of plausible reactions)。 &gt; Waymo expresses short-term
agent responses using human collision avoidance behavior models. &gt;
These models aim to capture the responses of human drivers,
motorcyclists, cyclists, and pedestrians to collision avoidance
situations, such as braking by a lead vehicle or being cut-off by
another agent who fails to yield right-of-way. &gt; Because only the
agent’s short-term response needs to be modeled, the space of plausible
reactions to such stimuli can be defined using <strong>a discrete set of
factors</strong> such as response times to specific inputs and brake or
swerve ability.</p></li>
<li><p> 因为上述的多因素因环境因人而异 (比如反应时间)，Waymo 在开发和评估
AV 行为时，使用一个范围来表示可能的人类驾驶表现 (a broad spectrum of
potential human driving performance).
为了透明度和简单性，本文使用确定的模型 (deterministic model)
来对一个给定的输入产生给定的输出。 &gt; Waymo considers a broad spectrum
of potential human driving performance in developing and evaluating the
AV, but for transparency and simplicity, the results reported in this
paper are based on deterministic models that generate a single response
to a given input.<br>
&gt; Other methods can be used to capture a range of possible human
responses, such as probabilistic counterfactual outcomes, but they are
more complex.</p></li>
</ul>
<!--
- 他碰上我不应该；就算我的行为不合理，他有避碰的动机和趋势
-->
<ul>
<li><p>Waymo 独有的人类避碰模型是基于现在已有的道路使用者的行为模型
(road user behavior modelling frameworks)，并基于人类自然的避碰模型
(naturalistic human collision) 和差点碰撞的数据 (near-collision)
来校正。 &gt; Waymo’s proprietary human collsion avoidance behavior
models are based on existing road user behavior modelling frameworks and
calibrated using naturalistic human collision and near-collision
data.</p></li>
<li><p> 交通参与者的反应被其刹车和转向性能所限制。Waymo
针对不同类型的交通参与者以及不同的触发场景 (different
stimuli)，使用不同的模型。 &gt; The agent’s response is further
constrained by human braking and steering limitations. Waymo uses
different models for different types of agents, including <strong>heavy
trucks</strong>, pedestrians, and cyclists, and for different stimuli
such as a forward agent braking or an agent emerging from behind an
occlusion.<br>
&gt; MC:
如果单车智能比较高，贴近于人类驾驶员的表现，那么是否可以使用自动驾驶软件的算法模拟车辆的行为；也就是说其他车和自车的表现拟合度比较高，能否使用自车模型来仿真其他车的表现呢？</p></li>
</ul>
<!-- 

参考这些文献，可以用于自己的开发工作中
  
[7] Engström J, Bärgman J, Nilsson D, et al. Great expectations: a predictive processing account of automobile driving, Theoretical Issues in Ergonomics Science , 2018; 19:2, 156-194, DOI: 10.1080/1463922X.2017.1306148
[8] Markkula G, Engström J, Lodin J, Bärgman J, Victor T. A farewell to brake reaction times? Kinematics-dependent brake response in naturalistic rear-end emergencies. Accident Analysis & Prevention , 2016; 95, 209-226.
-->
<ul>
<li>人类避碰模型的使用场合和条件：当仿真接管后的 AV
轨迹和交通参与者的实际轨迹有重叠，那么就会在接管后的仿真中使用人类避障模型
(human collision avoidance behavior models)。 &gt; Human collision
avoidance behavior models are employed for disengagements in which there
is overlap between the simulated post-disengage trajectory of the AV and
the actual post-disengage trajectory of another agent.<br>
&gt; In these cases, instead of using the agent’s recorded
post-disengage trajectory, the post-disengage trajectory of the other
agent is determined by applying the relevant human collision avoidance
behavior model.</li>
</ul>
<h3 id="contact-analysis-of-simulated-collisions">Contact analysis of
simulated collisions</h3>
<ul>
<li>Waymo
仿真分析表明，接管很少会造成实际上的碰撞 (大部分是防御性接管)。事实上，超过
99% 的接管没有仿真的接触 (simulated contact) 发生。 &gt; Our simulation
analysis indicates that disengagements would rarely result in contact.
In fact, in more than 99.9% of disengagements, no simulated contact is
found to occur.<br>
&gt; MC: 因为 Waymo
的软件开发程度比较高，才可以有这样的把握；对于初创期的软件，没有充分的道路测试，切不可使用这样的结论。</li>
</ul>
<p>Waymo
根据伤害可能性、碰撞物体、撞击速度和撞击几何结构分析，以确定某些事故的严重性，。</p>
<ul>
<li>如何碰撞发生，那么如何确定碰撞的严重程度 (event severity) 呢？Waymo
根据碰撞障碍物的类型 (collision object)，相对速度 (impact velocity)
和碰撞位置 (impact geometry) 来确定可能的伤害程度 (likelihood of
injury)。Waymo 使用国家碰撞数据库 (national crash databases)
来为事故严重程度分级 (event severity
category)，事件的统计等级分为预计无伤害 (S0) 到可能的严重伤害 (S1、S2 和
S3)。 &gt; This determination categorizes collisions based on likelihood
of injury and is based on the collision object (e.g., other vehicles,
static objects, or vulnerable road users such as pedestrians or
cyclists), impact velocity, and impact geometry.<br>
&gt; Waymo’s methods for determining event severity category are
developed using national crash databases and are periodically refined to
reflect updated data.</li>
</ul>
<h1 id="results-collisions-and-minor-contacts">Results: Collisions and
Minor Contacts</h1>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/classification_of_waymo_collisions.PNG" alt="Collision Categories">
<figcaption aria-hidden="true">Collision Categories</figcaption>
</figure>
<p>上表中的碰撞类型<strong>列</strong>分类 (collision typology)
是根据美国国家机构的专业分类 (using the Manner of Collision categories
from National Highway Traffic Safety Administration (NHTSA) collision
databases such as the Fatality Analysis Reporting System);
碰撞程度<strong>行</strong>分类是基于国际标准 ISO 26262
来评估碰撞的严重程度，从没有伤害的 S0 (no injury expected)
到有关键伤害的 S3 (possible critical injuries
expected)，碰撞的伤害逐渐增大。 &gt; categorized in rows according to
their collision typology using the <strong>Manner of Collision</strong>
categories from National Highway Traffic Safety Administration (NHTSA)
collision databases such as the Fatality Analysis Reporting
System.<br>
&gt; columns categorized by estimated event severity using the ISO 26262
severity classes: S0, S1, S2, and S3, ranging from no injury expected
(S0) to possible critical injuries expected (S3). * MC:
虽然中美两国的交通法规和驾驶习惯不同，但是这样的交通事故分类是可以拿来参考的。</p>
<p>Waymo 报告中的碰撞事故中，没有 S2 或 S3 级别事故发生，最严重的事故是
S1 级别 (airbag-deployment-level)，有 3 次保护气囊弹出。 &gt; There were
no actual or predicted S2 or S3 events. One actual event involved
deployment of another vehicle’s frontal airbags and the Waymo vehicle’s
side airbags.</p>
<p>Waymo
通过和人类的事故相比较，来表明其自动驾驶软件在减少人员伤亡上的可能性。
&gt; Comparison between these human collision statistics and Waymo event
counts provides insight into the Waymo Driver’s opportunity for reducing
injuries and fatalities due to collisions.</p>
<ul>
<li>In total, the Waymo vehicle was involved in 20 events involving
contact with another object and experienced 27 disengagements that
resulted in contact in post-disengagement simulation, for a total of 47
events (actual and simulated).
<ul>
<li>我的困惑点：上述表格中统计的实际碰撞是 18 次，仿真碰撞是 29 次，这和
Waymo 的文字描述是不统一的 (实际碰撞 20 次，虚拟碰撞 27
次)；那么是有数据修正吗，还是我粗心搞错了呢？</li>
</ul></li>
</ul>
<p>报告以图片形式 (diagrams have been provided)，重点关注了 3
个和弱势交通群体的交互事故，以及 8 个有安全气囊弹出的严重事故。 &gt;
Specifically, diagrams have been provided for every actual or simulated
event in which a pedestrian or cyclist was involved (three events) and
every event with actual or simulated airbag deployment for any involved
vehicle (eight events).</p>
<h2 id="single-vehicle-events">Single Vehicle Events</h2>
<p>根据 Manner of Collision 的分类标准，交通事故可以分为单车事故 (single
vehicle events) 和多车事故 (multiple-vehicle events)。 &gt; The Manner
of Collision categories within the NHTSA crash database can be broadly
classified as either single vehicle events, which involve a single
motorized vehicle in transport, or multiple-vehicle events, which
involve the impact of at least two motorized vehicles in transport.</p>
<!--
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[single-vehicle Manner]-\\-&gt;B(events that involve road departure, contact with the roadway environment/infrastructure or other fixed objects, or single-vehicle rollover)</span><br><span class="line">A-\\-&gt;C(events involving the motorized vehicle striking a pedestrian or bicyclist)</span><br><span class="line">A-\\-&gt;D(events involving the motorized vehicle being struck by a pedestrian or bicyclist)</span><br></pre></td></tr></table></figure>
<p>--&gt;</p>
<!---->
<p>Waymo 自动驾驶车辆没有发生偏离车道 (road departure)
和撞上行人的单车事故 (struck a pedestrian or
cyclist)；而这类事故在人类驾驶数据中占比约为 60%。 &gt; The Waymo Driver
did not have any events (actual or simulated) in this data that involved
road departure, contact with the roadway environment/infrastructure or
other fixed objects, or rollover. There were also no collisions (actual
or simulated) in which the Waymo Driver struck a pedestrian or
cyclist.</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Waymo_safety_1.jpg"></p>
<p>Waymo 在减速或者静止时，被行人或滑板车从右侧撞上。 &gt; In each
instance, the Waymo Driver decelerated and stopped, and a pedestrian or
cyclist <strong>made contact with</strong> the right side of the
stationary Waymo vehicle while the pedestrian or cyclist was traveling
<strong>at low speeds</strong>. *
MC：我怀疑自车突然急刹，行人来不及反应而撞上去。</p>
<h2 id="multiple-vehicle-events-reversing-reversing">Multiple Vehicle
Events: Reversing Reversing</h2>
<p>倒车碰撞 (reversing collisions)
事故经常发生在停车场，很少出现在交警报告数据库中。 &gt; Reversing
collisions (e.g., rear-to-front, rear-to-side, rear-to-rear) are usually
associated with parking lot events or occur on local ( ≤ 25 mph)
roadways and do not frequently appear in databases of police-reported
crashes.</p>
<p>In both scenarios, the Waymo vehicle was <strong>stopped or traveling
forward</strong> at low speed and the other vehicle was reversing at a
speed of less than 3 mph at the moment of contact to the side of the
Waymo vehicle.</p>
<h2 id="multiple-vehicle-events-same-direction-sideswipe">Multiple
Vehicle Events: Same Direction Sideswipe</h2>
<p>同方向剐蹭 (sideswipe) 主要发生在变道 (lane changing) 和并道 (lane
merging) 行为时。 &gt; These events are typically experienced during
lane changing or merging maneuvers.<br>
&gt; The Waymo Driver was involved in <strong>ten simulated</strong>
same direction sideswipe collisions.</p>
<h3 id="other-vehicle-changing-lanes-waymo-vehicle-straight">Other
vehicle changing lanes, Waymo vehicle straight</h3>
<p>The other vehicle <strong>changed lanes into</strong> the area
occupied by the Waymo vehicle, which resulted in simulated or actual
<strong>sideswipe collisions</strong>.</p>
<h3 id="other-vehicle-straight-waymo-vehicle-changing-lanes">Other
vehicle straight, Waymo vehicle changing lanes</h3>
<p>In both of these simulations, the Waymo Driver made a <strong>lateral
movement</strong> in front of a vehicle traveling straight <strong>in an
adjacent lane</strong>.</p>
<h2 id="multiple-vehicle-events-head-on-or-opposite-direction-sideswipe">Multiple
Vehicle Events: Head-on or Opposite Direction Sideswipe</h2>
<p>对头碰撞极易发生严重的交通事故 (high severity)。 &gt; Head-on
collisions have the potential for high severity outcomes.</p>
<p>不能期待驾驶员是理性的，或者一定会有避碰动作：道路情况复杂，你永远不知道司机是什么状态，可能是车辆失控
(impaired) 或疲劳驾驶 (fatigued) 等异常情况。 &gt; <strong>The absence
of simulated collision avoidance movement by the other vehicle</strong>
reflects our assumption based on driving behavior and circumstances that
the other driver was significantly impaired or fatigued.</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Waymo_safety_2.jpg"></p>
<p>如何区别示意图中哪部分是真实，哪部分是仿真的：actual collisions are
represented in color, while simulated ones feature a black and white
background. Solid trajectory lines represent those observed in real
life, while dashed trajectories and shaded poses represent simulated
conditions. Diagrams are intended for visual reference only, and are not
drawn to scale.</p>
<h2 id="multiple-vehicle-events-rear-end">Multiple Vehicle Events: Rear
End</h2>
<p>追尾碰撞 (rear end collisions) 是最常见的人类驾驶员的碰撞行为。 &gt;
Rear End collisions are the most common collision type in human-driven
collisions.<br>
&gt; The Waymo Driver was involved in fourteen actual and two simulated
rear end collisions</p>
<!--
- 自车被后方超速车辆追尾
- 自己右转时，避让交通参与者，被后方车辆追尾
-->
<h3 id="rear-end-struck-event-group-waymo-vehicle-stopped-or-gradually-decelerating-for-traffic-controls-or-traffic-ahead-while-traveling-straight">Rear
end struck event group, Waymo vehicle stopped or gradually decelerating
for traffic controls or traffic ahead while traveling straight</h3>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Waymo_safety_3.jpg"></p>
<p>上面的事故，是唯一一个发生在没有安全驾驶员的无人驾驶模式下
(driverless mode)。 &gt; Sole collision in driverless mode, without a
trained operator in the driver’s seat.</p>
<h3 id="rear-end-struck-event-group-waymo-vehicle-moving-slower-while-traveling-straight">Rear
end struck event group, Waymo vehicle moving slower while traveling
straight</h3>
<p>In the other collision, the Waymo vehicle, traveling straight at the
speed limit, was struck by a vehicle traveling 23 (57-35) mph
<strong>over the posted speed limit</strong>.</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Waymo_safety_4.jpg"></p>
<h3 id="rear-end-struck-event-group-in-right-turning-maneuvers">Rear end
struck event group in right turning maneuvers</h3>
<p>These collisions occurred while the Waymo was stationary or near
stationary waiting for crossing traffic to clear after <strong>having
gradually slowed to account for this traffic</strong>.</p>
<h3 id="rear-end-struck-event-with-braking-of-lead-vehicle-during-left-turn">Rear
end struck event with braking of lead vehicle during left turn</h3>
<ul>
<li>自车在路口左转急刹停 (a deceleration to a near
stop)，后面车辆跟车距离不够来不及刹车。 &gt; The remaining rear end
struck collision involved a deceleration to a near stop by the Waymo
Driver while making a left turn in an intersection with a following
vehicle that was traveling at a speed and <strong>following distance
that did not allow for the following driver</strong> to successfully
respond to the Waymo Driver’s braking.</li>
</ul>
<h3 id="rear-end-striking-event">Rear end striking event</h3>
<p>背景车有挑衅行为 (antagonistic
motive)，在前方没有障碍物的情况下，故意插入 (cut in) 自车前方后急刹
(braked hard
immediately)，自车来不及急刹，从后方撞上。这是唯一一起在仿真中，自车追尾其他车的事故。
&gt; The single simulated event in this grouping involved a vehicle that
<strong>swerved into</strong> the lane in front of the Waymo and braked
hard immediately after cutting in despite lack of any obstruction ahead
(consistent with antagonistic motive).</p>
<h2 id="multiple-vehicle-events-angled">Multiple Vehicle Events:
Angled</h2>
<p>Angled collisions, those that are typically seen at intersections and
involve crossing or turning vehicles, account for approximately
<strong>one quarter</strong> of all human-driven collisions and a
similar fraction of the contribution to all human-driven fatalities.</p>
<h3 id="angled-event-group-with-the-other-vehicle-not-yielding-to-waymo-right-of-way">Angled
event group with the other vehicle not yielding to Waymo
right-of-way</h3>
<p>The collisions in this grouping (ten simulated, one actual) involve
<strong>the Waymo vehicle traveling straight in a designated
lane</strong> at or below the speed limit. In all scenarios, the
turning/crossing other vehicle either disregarded traffic controls or
otherwise <strong>did not properly yield right-of-way</strong>.</p>
<p>路权的定义： &gt; Right-of-way is determined based on <strong>the
positions of vehicles prior to contact</strong> with respect to the
<strong>intersection geometry</strong>, roadway markings, and the status
of traffic control devices. Right-of-way is useful as a means of
categorizing some events, but <strong>it can be insufficient to
determine collision responsibilities</strong> since it does not reflect
all road rule violations (e.g. speeding), nor does it provide
information regarding collision avoidability.</p>
<p>为了减少碰撞风险，Waymo 车辆即使在有路权时也会让行 (yielding)。 &gt;
In order to avoid collisions, the Waymo Driver recognizes that
<strong>yielding even when the Waymo vehicle is entitled to right-of-way
may be more appropriate to decrease the risk of collision</strong>, for
example when encountering an incautious other agent.</p>
<p>In both instances, when the simulated Waymo Driver became aware of
the other vehicle's intention to enter the travel lane, the simulated
Waymo Driver initiated braking in an attempt to avoid/mitigate impact. *
如果检查到其他车不让行，那么 Waymo 自车会开始刹车来避免碰撞。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Waymo_safety_5.jpg"></p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Waymo_safety_6.jpg"></p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Waymo_safety_7.jpg"></p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Waymo_safety_8.jpg"></p>
<p>上面这个碰撞不常见，需要认真思考下。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Waymo_safety_9.jpg"></p>
<p>左转车辆应该礼让直行车辆，如果不礼让，怎么办呢？ Waymo
目前的做法也只能是安全员接管。 &gt; The simulated collision in Figure 9
(Event H) depicts a vehicle making a left turn across the Waymo
vehicle’s travel path. The Waymo Driver’s simulated response to the
vehicle’s action was the initiation of braking just prior to entering
the intersection.</p>
<p>这是最严重的一类碰撞事故 (the most severe collision)。 &gt; It is the
most severe collision (simulated or actual) in the dataset and
approaches the boundary between S1 and S2 classification.</p>
<!--
- Based on the vehicle masses and simulated vehicle speeds and **geometry at impact**, this event is categorized as S1 with expected airbag deployment.

In sum, the collisions in this angled event grouping (ten simulated, one actual) were characterized by the other vehicle failing to yield right-of-way to the Waymo vehicle, and they involved the Waymo vehicle traveling straight with the right-of-way, with a speed at or below the speed limit.
-->
<h2 id="angled-event-group-with-waymo-vehicle-crossing-another-vehicles-path">Angled
event group with Waymo vehicle crossing another vehicle’s path</h2>
<p>The collisions in this grouping involve <strong>four</strong>
simulated collisions, where the Waymo Driver was making a right turn
from a rightmost lane that was either splitting to an additional lane,
or had been the result of two lanes merging to one.</p>
<p>Waymo
向右变道时和右侧车道的直行车辆发生碰撞，类似于国内的自车右转，与自行车道的交互。
&gt; In each event, a passenger vehicle attempted to pass the Waymo
vehicle on the right while the Waymo Driver was slowing to make the
right turn <strong>with the right turn signal activated</strong>.</p>
<h1 id="discussion">Discussion</h1>
<p>这份报告的目的是：供工业界，政策制定者和公众学习；促进关注和讨论，以及加快公众对自动驾驶的接受程度。
&gt; The goal of this transparency is to contribute to broad learning
with the industry, policymakers, and the public; promote awareness and
discussions; and foster greater public confidence in automated
vehicles.</p>
<p>Of the fifteen angled events, eleven events were characterized by the
other vehicle failing to properly yield right-of-way to the Waymo
vehicle traveling straight at or below the speed limit. &gt; MC:
针对自车有路权，其他车辆不让行的情况，Waymo
也依赖安全驾驶员及时接管。</p>
<h2 id="collision-avoidance-management-of-human-driver-related-contributing-factors">Collision
Avoidance: Management of Human-Driver-Related Contributing Factors</h2>
<ul>
<li><p>人类驾驶行为的不稳定性和不安全性，导致了绝大多数的碰撞。几乎所有的事故都是因为其他交通参与者违背交通规则或者交通表现有偏差。
&gt; Humans exhibit a large variation of driving behaviors including
<strong>deviations from traffic rules and safe driving
performance</strong> that can lead to collisions.<br>
&gt; Nearly all events summarized above involved one or more road rule
violations or other driving performance deviations by another
<strong>road user</strong>.</p></li>
<li><p>Waymo
在努力实现不因为自身原因造成碰撞的同时，也尽量减少因为人类走神
(inattention)，激进驾驶 (aggressive driving) 和超速 (speeding)
带来的可能碰撞。 &gt; In addition to Waymo's key focus on not causing
collisions, Waymo also works to mitigate possible collisions due to
human behaviors such as inattention, aggressive driving, and
speeding.</p></li>
<li><p>Although many of these situations would not be present in a
future with a high proportion of AVs, we envision sharing roads with
human drivers for the foreseeable future. <strong>The rare contact
events described in this paper are used to develop enhanced collision
avoidance to improve traffic safety</strong>, and we will continue to
focus on enhancing avoidance of human-induced collisions. &gt;
这些场景在道路上不常见，但是也无法避免，自动驾驶同行可以反思遇到的这些
corner cases.</p></li>
<li><p>Waymo 在努力减少事故发生的可能性
(likelihood)，而不仅仅是避免碰撞。自车的行为，要能够被其他交通参与者
(other road users) 可判断 (interpretable) 和可预测 (predictable)。 &gt;
Beyond collision avoidance, Waymo also continually investigates
improvements to the Waymo Driver’s behaviors to reduce the likelihood of
conflict with human-driven vehicles and other road users.<br>
&gt; This illustrates a key challenge faced by AVs operating in a
predominantly human traffic system and <strong>underscores the
importance of driving in a way that is interpretable and predictable by
other road users</strong>.</p></li>
<li><p> 相比于人类，Waymo
的自动驾驶能力是可以不断提升的，适用到整个车队上。 &gt; Unlike human
drivers, who primarily improve through <strong>individual
experience</strong>, the learnings from an event experienced by a single
AV can be used to permanently improve the safety performance of
<strong>an entire fleet of AVs</strong>.</p></li>
</ul>
<h2 id="aggregate-safety-performance">Aggregate Safety Performance</h2>
<p>Waymo 车辆在单车表现 (single-vehicle collision typology) 和 追尾问题
(rear-end collisions) 上的良好表现，已经优于人类。 &gt; The Waymo Driver
experienced zero actual or simulated events in the “road departure,
fixed object, rollover” single-vehicle collision typology, reflecting
the system's ability to navigate the ODD in a highly reliable
manner.<br>
&gt; In addition, while rear-end collisions are one of the most common
collision modes for human drivers, the Waymo Driver only recorded
<strong>a single front-to-rear striking collision</strong> (simulated)
and this event involved an agent cutting in and immediately braking
without allowing for adequate separation distance (consistent with
antagonistic motive).</p>
<h3 id="lower-severity-collision-risk">Lower-severity collision
risk</h3>
<p>无论是人类驾驶员，还是自动驾驶车辆，轻微事故 (lower-severity events)
发生的频率要高于严重事故 (higher-severity) 的发生频率。 &gt; In both
human-driven and automated vehicles, lower-severity events (S0 and S1)
occur at significantly higher frequency than higher-severity (S2 and S3)
events. As a result, fewer miles are needed to draw statistical
conclusions about S0 and S1 rates.<br>
&gt; When comparing driving data, the mileage needed to reveal
<strong>statistically significant differences also depends on the
magnitude of the differences in the actual rates</strong> being
compared.</p>
<p>For a given metric, the larger the difference in performance, the
fewer miles that are required to establish <strong>statistical
confidence</strong> in a hypothesis of non-inferiority or
superiority.</p>
<p>如何统计和判责 &gt; low-severity data, when evaluated in the context
of each event’s collision geometry, may be informative of high-severity
risk.</p>
<p>现有的道路公开测试，可以为 S0 or S1 提供统计上的支持 (sufficient
statistical signal)。 &gt; The 6.1 million miles in self-driving with
trained operators mode underlying the data in Section 3 <strong>provide
sufficient statistical signal to detect moderate-to-large differences in
S0 and S1 event frequencies</strong>, and Waymo makes use of these event
rates for tracking longer-term improvements to the Waymo Driver.</p>
<h3 id="higher-severity-collision-risk">Higher-severity collision
risk</h3>
<p>现有的道路公开测试，无法为 S2 or S3 提供强有力的统计支持。 &gt; 6.1
million miles does not provide statistical power to draw meaningful
conclusions about the frequencies of events of severity S2 or S3.<br>
&gt; MC：目前的测试里程，可以为 Lower-severity
提供支持，但是不能为偶发的 Higher-severity 提供支持，里面有统计噪声
(statistical noise)。<br>
&gt; At this mileage scale, the statistical noise is extremely large and
zero or low event counts only provide <strong>performance
bounds</strong>, which necessitates the consideration of other metrics
to fully assess the safety of the Waymo Driver.</p>
<ol type="1">
<li><p>通过仿真和封闭场测试来评估高风险的表现. &gt; Waymo uses other
methods to evaluate the higher-severity performance, including both
simulation-based and closed-course scenario-based collision-avoidance
testing.</p></li>
<li><p> 从低风险事故中发掘高风险事故的信息。 &gt; Low-severity data, when
evaluated in the context of each event’s collision geometry, may be
informative of high-severity risk.</p></li>
</ol>
<h3 id="comparison-benchmarks">Comparison benchmarks</h3>
<p>Human driver collision rates have been widely discussed as providing
a benchmark for AVs.</p>
<p>警方统计的交通事故可能会忽略一部分低风险事件 (non-police-reportable
contact)，所以 police-reported 不足以代表人类的真实事故发生频率。 &gt;
By including low-speed events involving non-police-reportable contact
(e.g. a less than 2 mph vehicle-to-vehicle contact or a pedestrian
walking into the side of a stationary vehicle), <strong>the scope of
events is considerably greater than the scope of police-reported or
insurance-reported collisions commonly used to generate performance
baselines</strong>. <strong>As such, comparing the data presented in
this paper to police-reported collision numbers is not an apt
comparison</strong>.</p>
<p>Obtaining reliable event counts that include such minor events
typically requires <strong>analysis of naturalistic driving
data</strong>.</p>
<h2 id="limitations-and-future-work">Limitations and Future Work</h2>
<p>Limitations related to the statistical power of the mileages reported
have been discussed in the above section on aggregate collision
frequencies. &gt; 即，目前的测试里程，可以为 Lower-severity
提供支持，但是不能为偶发的 Higher-severity 提供支持，里面有统计噪声
(statistical noise)。</p>
<h3 id="limitations-of-counterfactual-simulations">Limitations of
counterfactual simulations</h3>
<ul>
<li><p>反事实仿真只是预测，但不是绝对的准确。 &gt; Due to the nature of
human agent behavior, disengagement simulations are not definitive:
counterfactual simulations predict what could have occurred, but cannot
definitively predict exactly what would have occurred.<br>
&gt; As a result, had the driver not disengaged, some of the reported
simulated collisions may not have actually occurred (e.g. other agents
may have behaved differently). Conversely, other events that, in
simulation did not result in contact, may have actually resulted in
collisions (e.g. if the other agent had been distracted at the critical
moment).</p></li>
<li><p>Waymo therefore takes <strong>a cautious approach</strong> to
interpreting both the outcomes of individual collisions and aggregate
performance metrics, and <strong>considers them in the context of other
indicators of AV performance</strong>.</p></li>
</ul>
<h3 id="secondary-collision-in-simulated-events">Secondary collision in
simulated events</h3>
<p><strong>The severities ascribed to the simulated collisions are based
on the single impact depicted in the simulation</strong>. Owing to
complexities in accurately modeling post-impact vehicle dynamics (which
may or may not involve subsequent steering and braking maneuvers from
the other vehicle), the outcome of any secondary collisions that might
occur subsequent to the simulated event are not explicitly modeled.</p>
<p>Waymo
的第一次碰撞，可以包含绝大多数的严重事故，二级事故不是很重要；二次碰撞需求显得不是那么紧迫。
&gt; In Waymo’s ODD, the vast majority of primary vehicle-to-vehicle
collisions (99% for all collisions, 95% for fatal collisions)
<strong>included in police-reported crash databases involve either a
single vehicle-to-vehicle collision event or a subsequent collision
event of equal or lesser severity</strong>.</p>
<h3 id="interpreting-disengage-performance">Interpreting disengage
performance</h3>
<p>Waymo 安全驾驶员的避障表现，不代表人类驾驶员的避障表现。 &gt; Care
should be taken in drawing conclusions based on the collision-avoidance
performance of Waymo’s trained operators during disengagements, which
for the reasons described below, is not predictive of the
collision-avoidance performance of the overall population of human
drivers.</p>
<p>Waymo 驾驶员和普通人类驾驶员的区别在哪里呢？</p>
<ol type="1">
<li>受过专业培训： Waymo vehicle operators are selected from a subset of
the driving population with good driving records and receive instruction
specific to Waymo AVs, <strong>defensive driving</strong> training, and
education regarding fatigue.</li>
<li> 避免被打扰：When operating a vehicle, strict rules are in place
regarding handheld devices including cell phones and operators are
continually monitored for signs of drowsiness.</li>
<li> 注意力更集中：Unlike drivers in human-driven vehicles, while the AV
is in self-driving mode, Waymo’s trained operators do not execute
navigation, path planning, or control tasks, but instead are focused on
monitoring the environment and the Waymo Driver’s response to it.</li>
</ol>
<p>Trained vehicle operators are therefore able to focus their full
attention on being ready to disengage and execute collision avoidance,
and <strong>their performance at this task is expected to be superior to
that of a human in a traditional driving role</strong>.</p>
<h3 id="future-work">Future work</h3>
<p>We expect and invite other safety researchers to review the events
and mileages presented here and make their own findings regarding the
safety performance of Waymo’s operations demonstrated in this data.</p>
<!--
总体感觉羞羞答答，不给全部的数据，告诉你做也不合理，该自己充分的解释余地。
-->
<h1 id="conclusion">Conclusion</h1>
<p>Taken together, these 47 lower severity (S0 and S1) events (18 actual
and 29 simulated, one during driverless operation) show
<strong>significant contribution from other agents</strong>, namely
human-related deviations from traffic rules and safe driving
performance.</p>
<p>The frequency of challenging events that were induced by incautious
behaviors of other drivers serves as a clear reminder of <strong>the
challenges in collision avoidance so long as AVs share roadways with
human drivers</strong>.</p>
<p>由其他司机不谨慎行为诱发的事故频率清楚地提醒人们，只要自动驾驶汽车与人类司机共享道路，避免碰撞就是一大挑战。只要和人类共享道路
(share roads)，完全安全的自动驾驶是不可行的，需要降低过高的期望
(inflated expectations)。 &gt; Statistics regarding the high percentage
of human collisions that are attributed to human error may lead to
inflated expectations of the potential immediate safety benefits of AVs.
AVs will share roads with human drivers for the foreseeable future, and
significant numbers of collisions due to human driver errors that are
simply <strong>unavoidable</strong> should be expected during this
period.</p>
<ul>
<li><p>和人类现有数据比较，碰撞分布发生变化；可以认清楚自动驾驶的优点
(机器稳定以及不知疲倦) 以及劣势，优点可以及早加以利用，但是如何规避缺点却是一个难点。
&gt; Due to the typology of those collisions initiated by other actors
as well as the Waymo Driver’s proficiency in avoiding certain collision
modes, the data presented shows <strong>a significant shift</strong> in
the relative distributions of collision types as compared to national
crash statistics for human drivers.</p></li>
<li><p> 这是业界首次发布百万英里自动驾驶中的碰撞事故。评估自动驾驶汽车安全性没有标准的方法，Waymo
作为行业领头羊的担当，希望通过公布这些数据，推动政策制定者、研究人员甚至其他公司承担制定通用框架的任务。
&gt; This is the first time that information on every actual and
simulated collision or contact has been shared for millions of miles of
automated driving.<br>
&gt; The most significant long-term contributions of this paper will
likely not be the actual data shared, but the example set by publicly
sharing this type of safety performance data and the dialogs that this
paper fosters.</p></li>
</ul>
<h1 id="references">References</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/PI0W_bJJ_Jwc2YncOJgexA">新智驾
Waymo 路测报告</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/fxHBBZG51b7yS4dBfcY39g">Waymo “自曝家丑”，首发最详细自动驾驶报告</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Reading/expression-on-simple-life/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Reading/expression-on-simple-life/" class="post-title-link" itemprop="url">不持有的生活 读后感</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-12-27 19:01:51" itemprop="dateCreated datePublished" datetime="2020-12-27T19:01:51+08:00">2020-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Reading/" itemprop="url" rel="index"><span itemprop="name">Reading</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>3.8k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>14 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/blog/simple_life.jpg" alt="不持有的生活">
<figcaption aria-hidden="true">不持有的生活</figcaption>
</figure>
<p>最近打算搬家，想借此机会重新整理自己的持有物品，转手或扔点多余的物品，拿时间换空间，在北京拥挤的房间里腾出更多的空间。</p>
<h1 id="为什么选择这本书">为什么选择这本书</h1>
<p>我在《断舍离》、《怦然心动的人生整理魔法》和这本书之间犹豫和纠结过。我大概了解这三本书的侧重点后，认为自己有断舍离的意识，现阶段自己更需要一种实践性的建议。那么，这一本实践性强的《不持有的生活》就是自己最佳的选择。这本书文字内容不多，漫画丰富，读起来不是很费力。</p>
<p>这本书是日本自由职业者 金子由纪子 在 2006
年出版的。在十年的单身生活中，她发现了 “用简单物品过上悠闲生活” 的快乐。</p>
<p>读完这本书后，自己认识到这本书成稿于 PC
时代，那时候互联网不发达，作者给出的建议在手机时代不一定实用。比如转手二手物品时，作者推荐通过跳蚤市场和二手市场来面对面交易，而现在在网络上有一些二手交易平台，足不出户就可以以优惠的价格转手自己多余的东西；在对报纸处理中，还提到剪报这种跨时代的做法。同时，作者描写的是日本的社会，和中国存在文化和生活差异，比如日本人际交往中的纪念品和土特产繁多，垃圾处理有严格的规定，甚至有专门的垃圾处理费用，这部分经验在中国却不怎么实用。最后一点，作者以女性的视角来描写收纳，侧重点在厨房、衣服和书，读者群体以女性居多，对男性同胞就不够通用。</p>
<p>虽然这本书有一点落伍和不符合国情，但是给出的生活态度和思想是不会落伍的，读起来仍然受益匪浅，特做此分享。</p>
<h1 id="什么是不持有的生活">什么是不持有的生活</h1>
<p>物质匮乏的年代，人们常觉得拥有的东西越多，生活越富足。不过，在商品泛滥的今天，拥有的东西过多，反而给人一种生活贫瘠的感觉。物品数量过多，随之而来的麻烦也越来越多。</p>
<!--
如果不好好打扫，在这样一个脏乱的环境中生活，不仅会让人感到心烦，还会令人陷入严重的白我责备与自我厌恶中。
-->
<p>“不持有的生活” 中应该 “不持有” 的物品，可以分为以下 4 种： 1.
超出自己管理能力的物品，不持有。 2. 不钟爱的物品，不持有。 3.
无法回收利用或转送给他人的物品，不持有。 4.
不适合自己、与自己的生活方式不相符的物品，不持有。</p>
<!--
2005年，肯尼亚环境和自然资源部副部长旺加里·马塔供在联合女地位委员会的演讲中，对日语中的“不持有”进行了介绍。他说：“不持有’可以用四个R来表小，即缩减浪费( reduce)、回收再利用( recycle)、重复利用(reuse)、维修再利用(repair)。
-->
<!--
首先，不持有是一种很舒服的生活方式。
-->
<p>我们应该认识到，“不持有的生活” 并不是简朴省钱的生活方式，相反你可能需要付出更多的时间和金钱来维持，享受生活。比如，为了能够减少不必要的物品，你可能不得不学会物品替代的做法，就一定要付出时间或金钱上的代价来补偿物品原有的功能。</p>
<p>时间就是物品。我们通常都是把时问 “出售” 给企业或个人，用以此获得的报酬来谋生。我们周围的某些东西，实质上都是 “我们的时间” 的另一种表现形式。被物品包围却无法很好地利用物品的人，不能将自己历尽艰辛付出的时间收回来，就是浪费了这些时间。</p>
<p>“不持有的生活” 侧重于物品的质量和适合度，能够减少物品的数量，也能减轻自己的劳动量。在实践这种 “不持有的生活” 时，以衣服整理为例，四季所穿的衣服数量不会很多，能够整齐地叠放在塑料整理箱中，或是挂在衣橱里，根本不需要那种放衣服的多屉柜；地板和家具上如果没有太多东西的话，只要用吸尘器和抹布，短短一刻钟就能将家中所有的地方清洁好，整个房间都会给人一种唤然一新的感觉。</p>
<p>究竟 “不持有” 的真正目的是什么呢？所谓 “不持有 "，就是要把我们从周围纷繁复杂的事物中解放出来，确立人生的优先顺序。如果我们被很多东西所包围的话，就无法分清到底其中哪些才是对我们有用处的。若是既想做这件事情，又想做那件事情，赶上什么算什么的话，就不知通哪些事情是我们真正想做的，而哪些是我们应该做的。</p>
<p><strong>人生有限的，我们的能力当然也是有限的，不必非得什么东西都拥有</strong>。</p>
<p>简单即高效，让生活简单点，生活就更有效率，更容易拥有大把的时间享受生活。</p>
<h1 id="如何不持有地生活">如何不持有地生活</h1>
<p>想要将 “不持有的生活” 愉快地坚持下去，就必须遵守下面的 “最低限度收拾法”。
1. 不要把东西放在地板上<br>
为了使房间看起来整洁，这一点至关重要。地板空闲的面积越大，整个房间给人的感觉也就越大，在使用吸尘器或抹布时也会简单得多，打扫起来也会变得轻而易举了。
2. 饭桌上不要摆东西<br>
饭桌看起来是一个平面，因此在家中的 “地位” 仅次于地板，是面积第二大的地方。不过，在很多人的家里，饭桌上一半的地方都被各种杂物占据了。试想一下，如果不在饭桌上摆放东西，那么整个房间给人的豁亮感就会倍增。
3. 放置物品时，要集中放置<br>
将所有的东西都收起来，表面什么也没有的房间是最理想的效果，但在现实中却很难实现。只要你按照 “集中放置” 的原则来处理，房间里即使有些随意放置的东西，也不会显得那么凌乱。</p>
<hr>
<p>在实践 “不持有的生活” 的过程中，减肥这件事和它存在着共同之处。如果出来的物品数量等于进来的物品数量，物品总数不会增加；出来的物品数量大于进来的物品数量，物品总数便会逐渐减少。同减肥一样，运动式扔东西，把房间打扫的一尘不染，房间的状况难免会反弹。那么怎么办呢？</p>
<p>作者抛出 “利用习惯，在不知不觉中让房间整齐、干净” 的观点。想要掌握 “不持有的生活”，从本质上说是 “自身的改变 = 生活方式的改变”。有如下七个生活习惯，帮助我们实现 “不持有的生活”。
1. 不要<br>
免费得到的东西，很少被人珍惜，因此往往囤积不用。不拿免费塑料袋，以自备购物袋来代替；不拿免费发送又用不到的赠品。
2. 不买<br>
冲动购物感觉痛快，但买完东西感到后悔的状况也不少，因此只要是 “没买也无所谓” 的东西，就坚持不买，让物品登堂入室的门槛变高，这样家中就只会出现真正喜欢、真正必要的东西。
3. 不存<br>
不囤积保鲜膜和卫生纸这类消耗品，也许大减价时买了一堆，像占了便宜，却容易造成使用上的浪费。一旦停止囤积，使用时就会更谨慎，并且想出各种生活小妙招来代替，自然能降低消耗品的使用率，换来神清气爽的好生活。
4. 扔掉<br>
养成丢弃的习惯，杂志或小册子超过一定数量，就丢掉；确实执行丢弃前的准备工作，例如用美观的袋子，作为垃圾分类的容器，让丢弃这件事，变得轻松愉快。
<strong>不符合现在生活的东西都是不需要的东西</strong>。懂得珍惜东西是一件值得称赞的行为。但是，每个家庭在不同时期都会需要与之相适应的东西。如果你每天都觉得生活得不快乐、不方便的话，就干脆把那收不合适的东两处理掉，并尽量添置些与生活方式和风格相适应的东西吧！再比如，如果你看到某个女人，现在还穿着带有厚垫启的衣服、及膝盖处的短裙这种泡沫经济时代的套装，会不会感到大跌眼镜呢？衣服的款式可以传递社会的信息。如果你穿的与当今的时代相去甚远．从很多方而来讲．都会得不偿失。
5. 代替<br>
我们在购买新东西前，能否考虑一下活用现有物品的方法。i.e.
我们不要禁锢思想，认定一件东西只能有一种用法，而应该试着想想看能不能有第二种、第三种使用方法，比如一件长披肩成为 “激活” 衣物的小道具。活用现有物品，不是为了弥补贫困，而是为了创造丰足。
6. 租赁<br>
不常用的东西 (相机或礼服)，可以借用或租用，和其他人一起使用更多物品，每个家庭或许就会减少囤积少用物品的情况，避免压迫居住空间，减少无谓的浪费。
7. 没有也无所谓<br>
购物前，务必自问：这个真的是必要的吗？也许能得到 “没有也无所谓” 的答案，那么就不购买。同样是花钱，就买些能使生活变得充实的东西吧！在将手中的钱变成物品时，你要格外小心、反复思量。东西是无法再变回钱的 (大多数情况是这样)，也无法用来换取生活经验。</p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Simple_life_1.jpg"></p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Simple_life_2.jpg"></p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Simple_life_3.jpg"></p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Simple_life_4.jpg"></p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Simple_life_5.jpg"></p>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Simple_life_6.jpg"></p>
<hr>
<p>在<strong>衣物收纳</strong>中，我们首先要列出生活中必须穿的衣物的件数和种类。按照 “工作”、“游玩”、“日常生活”、“正式场合” 的不同场合分类，也可以根据季节、气温等因素进行 “有寒意的春秋季节”、“不需外衣的春秋季节”、“盛夏”、“寒冬” 来分类。</p>
<p>接着，让我们来看一下自己所拥有的衣服，能否同时满足特殊场合和季节的要求．有些衣物是否过多吧！今后买衣服时，要针对不足点进行 “强化”，时刻提醒自己不能因一时冲动而购买已经过剩的衣物类型。这样便能改善日前这种无用衣物很多，而可穿衣物短缺的情况。另外，偶尔需要穿宴会服装时，我们可以从专业机构租赁。</p>
<p>关于对<strong>书籍的整理</strong>．我们可以不按照内容对资料进行分类，而是按照使用频率来分类
-
凸显收拾法：把最近经常着的书和经常用的软件，摆放在最容易找到的地方。使用这种方法进行分类整理后，你就可以一下子找到使用频率高的东西了。</p>
<p>另外，我们可以积极利用图书馆。那些推理小说、畅销书、烹饪书等书籍．通常看一遍就被上入扔到一边了。如果喜欢纸质书，最好是从图书馆借，不用再为后续的收纳整理发愁了。</p>
<hr>
<h1 id="实用好建议">实用好建议</h1>
<ul>
<li>如果你打算在跳蚤市场上卖掉不需要的东西，最好选择那些与季一节相吻合或略早于时令的东西。例如，在
5 月的黄金周时，出售夏季的单衣，肯定会卖个不错的价钱。</li>
<li>如果 “东西” 也可以看做是 “时间” 的代名词，或许 “继续保留” 便意味着执著于过去，而过量地 “准备” 则是种对未来的担忧，这也许是一种逃避现实生活的举动，而唯有 “不持有的生活” 是珍惜现在的生活。</li>
<li>如果要丢掉一些东西，可以给那些不太重要或体积很大的东西拍下照片，比如纸箱子，做好拍照记录，然后处理掉就可以了。</li>
<li>东西是具有互补性的，替代性比较强，活用现有物品。例如一年可能只用到一次的漏斗，就用现有的塑料板卷成漏斗状来代替，如此就能避免多持有一个东西。
<ul>
<li>如果没有家用碎纸机，那么纸张泡在水里会自动溶解为纤维。</li>
</ul></li>
<li>把纸质资料收集到一起，如果一年都不会翻动，那么可以放心丢掉，不会有重要的东西遗漏。</li>
<li>衣服按种类找到到底缺失什么，平衡生活，而不是看到喜欢的就买下来。</li>
<li>不常用的东西，可以租赁，虽然价格会比较贵，但是这是精简生活的代价，自己不用后续维护，整体经济负担小。</li>
<li>对于报纸和宣传单，我们可以折叠制作一个简易纸盒，可以用做暂时的收纳盒或垃圾盒。</li>
</ul>
<p><img data-src="http://www.waylon.one/downloads/images/blog/Simple_life_7.jpg"></p>
<ul>
<li>电热水壶使用起来很不经济和方便。每一次喝水，都要重新加热一次，拥有那种保温性较好的水壶也可以满足你的需要。
<ul>
<li>已践行，保温壶让家里随时有热水喝，避免喝千滚水。</li>
</ul></li>
<li>哪怕就写一行字，也要开始写日记，而往往一开始，就可以写很长的字。</li>
<li>尽量不要购买干电池，而是使用充电电池。</li>
<li>制作购物清单，多思考几次，反复询问自己是否真正需要呢？</li>
<li>提高常用物品的质量。
<ul>
<li>自己在没有购买 airpod
耳机之前，总是会尝鲜不同的蓝牙耳机，但是购买足够好的 airpod
后，自己再没有胡乱购买过任何一款耳机，甚至看到不看。</li>
</ul></li>
</ul>
<!--

书籍目录

# 想尝试不持有的生活吗？


# 持续享受清爽生活的秘诀

# 形成这7个习惯， 东西自如就减少

# 整理实践篇 

# 不持有的生活让人感到愉快
-->
<h1 id="references">References</h1>
<ul>
<li><a href="http://www.waylon.one/downloads/files/不持有的生活.pdf">不持有的生活高清 pdf 下载
10.6 M</a></li>
<li> 怦然心动的人生整理魔法 - 视频</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Trip/Datong-trip-2020/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Trip/Datong-trip-2020/" class="post-title-link" itemprop="url">2020 大同游记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-12-13 06:51:59" itemprop="dateCreated datePublished" datetime="2020-12-13T06:51:59+08:00">2020-12-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Trip/" itemprop="url" rel="index"><span itemprop="name">Trip</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>7 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我的老家虽然位于晋冀豫三省交汇处，但是自己从未踏足过山西，对山西的记忆也仅停留在煤炭，晋中，太原等抽象的符号。</p>
<p>2020 年 12
月，我和苗苗一起去山西大同参加朋友的婚礼，顺道在大同多做停留，来粗略地游览大同风光。</p>
<p>因为隐私的问题，这里跳过朋友的婚礼事情细节，只讲两天的旅行经历。</p>
<h1 id="山西大同">山西大同</h1>
<p>大同市，位于中国华北地区，山西的北部，是晋冀蒙三省区交界处。</p>
<p>大同曾是北魏首都，辽、金陪都，境内古迹众多，著名的文物古迹包括云冈石窟、华严寺、善化寺、恒山悬空寺、九龙壁等。</p>
<!--
大同，也是明星市长-耿彦波的成名地。
-->
<p>大同，位于北京和张家口的外延方向，可能受北京冬季奥运会的带动，大同到北京的铁路交通非常便利，高铁不到两小时，甚至有北京到大同的直达高铁，旅行特别方便。</p>
<h1 id="第一天">第一天</h1>
<p>12 月 12 日，下午我们来到大同市内比较有名的 华严寺 和 仿古城墙
参观。</p>
<h2 id="华严寺">华严寺</h2>
<p>华严寺，是中国现存年代较早、保存较完整的一座辽金寺庙建筑群。因为战争原因，寺庙几度摧毁又几度重建，往往复复，香火绵延不断。</p>
<p>景区门票 40
元，性价比一般。建议浏览古建筑时，最好可以请导游讲解，听一听建筑背后的故事，对古建筑的理解更深刻，否则自己仅仅是看热闹而已。</p>
<p>自己对寺庙的了解不深，只是逛过几个古建筑，但是华严寺是比较有特点的，给自己留下的印象还是深刻的。</p>
<ul>
<li>倾斜的佛像：在大雄宝殿内，一部分雕像是倾斜的。专家给的<a target="_blank" rel="noopener" href="https://v.qq.com/x/page/f0859f6nalk.html">解释</a>是倾听人间疾苦。我自己推测，因为室内是一排佛像，如果完全排列整齐，难免后面的佛像就被前排的佛像遮挡起来，不容易看到；后面的佛像倾斜起来，更容易进门就看到。</li>
</ul>
<figure>
<img data-src="http://img.buddhism.china.com.cn/ueditor/php/upload/image/20171030/1509344587813472.jpg" alt="前倾15度">
<figcaption aria-hidden="true">前倾 15 度</figcaption>
</figure>
<ul>
<li>壁画：华严寺中，基本每一间佛堂都有精美的笔画，高大威武，讲述佛教中的一个个典故。有些壁画上佛像额头和鼻梁被涂上浅白色，和黄色的皮肤对比，有点像现在的打高光，难道古人那时候就懂？</li>
<li>合掌露齿菩萨：在庄严的佛堂上，一个合掌露齿的菩萨，与封建教条格格不入。</li>
</ul>
<p><img data-src="http://img.buddhism.china.com.cn/ueditor/php/upload/image/20171030/1509344739204255.jpg"></p>
<ul>
<li>木塔：这是一座完全由木头搭建的宝塔，现在游客可以上到顶楼，从高处观看大同的景色。</li>
</ul>
<p><img data-src="http://www.waylon.one/downloads/images/travel/wooden_tower.jpg" alt="大同木塔"> <img data-src="http://www.waylon.one/downloads/images/travel/stand_in_DaTong.jpg" alt="站在木塔顶楼远眺"></p>
<p>另外一个感想，在古代寺庙都是由僧人组织修建和维护，可以想象那时候的僧人可能多才多艺，要会设计，懂力学，善于工程规划。</p>
<h2 id="仿古城墙">仿古城墙</h2>
<p>仿古城墙，是指环绕大同老城区一周的城墙，是最近几年修建的。据司机师傅讲，大同原来是没有城墙的。</p>
<p>虽然是仿古城墙，但是城墙设计还是很用心，有瓮城、城楼等；在冬天春节临近时，城楼上会有冰雕和灯光秀，好不热闹。</p>
<p>游客请注意：仿古城墙只在东南西北四个大门设有入口，可以登上城墙，城墙上的走道非常宽厚，甚至可以租赁自行车在上面骑行。</p>
<p>我们大概在晚上 5
点多的时候才华严寺出来，登上古城墙。那时候天刚黑下来，城墙上华灯初现，空中非常赶巧地飘着小雪。在灯光的映衬下，空中飘雪，西北风呼呼刮个不停，有一种边关戍卫的错觉。</p>
<figure>
<img data-src="http://www.waylon.one/downloads/images/travel/fake_wall.jpg" alt="城墙上华灯初现">
<figcaption aria-hidden="true">城墙上华灯初现</figcaption>
</figure>
<h1 id="第二天">第二天</h1>
<h2 id="云冈石窟">云冈石窟</h2>
<p>如果对石窟文化不了解，建议预先观看一个纪录片 -- <a target="_blank" rel="noopener" href="https://www.iqiyi.com/v_19rvkk4y6o.html">世界遗产在中国</a>，里面讲述了云冈石窟的特点和背后的历史故事。</p>
<p>另外，在景区参观时，进门后有一个放映厅，大概用十五分钟的时间带你粗略地浏览云岗石窟的历史和看点。</p>
<p>我因为没有去其他石窟参观过，所以不做横向对比，但是我想说一下我理解的中国三大石窟的发展脉络。
1.
首先，敦煌 (旧属凉州) 临近西域，最先接受佛教文化，开始在山上开凿佛像，逐渐形成了今天的敦煌莫高窟；
2.
然后，来自凉州的昙曜高僧，熟悉西域佛影窟的体制，见过敦煌鸣沙山石窟的实物，在此基础上创新并向北魏的统治阶级支持下，在大同武州山开凿了雄伟壮观的昙曜五窟，揭开了云冈石窟开凿的序幕；
3.
最后，北魏孝文帝迁都到洛阳，云冈石窟逐渐没落，但带过去的佛像石雕艺术，却因为受到北魏和唐朝统治阶级的支持，在洛阳地区开始兴盛，逐渐形成现在的龙门石窟。</p>
<p>听导游讲，每一个石窟的外围原来是有木质结构，并且有门窗，但是时间久了，年久失修，逐渐损毁，已经不复当年的做工精细。</p>
<p>景区门票是一人 100 元，乘坐景区观光车返完是 15
元，但是景区并不大，不是非常需要乘坐观光车。</p>
<p>郑重声明：因为石窟内室不允许拍照，所以石窟内部只有文字描述，没有附上图片；其他照片都是在室外拍摄。</p>
<ul>
<li>除了昙曜五窟外，云冈石窟中的其他窟，基本都已经损毁和风化比较严重，看一眼少一眼。</li>
</ul>
<figure>
<img data-src="http://www.waylon.one/downloads/images/travel/weathering_grotto.jpg" alt="风化的雕像">
<figcaption aria-hidden="true">风化的雕像</figcaption>
</figure>
<ul>
<li>雕刻之薄：石窟之间是分离的，但相邻两窟最薄的地方仅有几厘米，你很难想象古人是如何精准测得厚度，然后在薄薄的石面上施工的。</li>
<li>大佛的因祸得福：这个佛像本来是，但是因为塌陷暴露在外面，但是上面的山体防止雨水下漏侵蚀，所以上半部分的岩体完好地保存下来，看起来栩栩如生。</li>
</ul>
<figure>
<img data-src="http://www.waylon.one/downloads/images/travel/20th_grotto.jpg" alt="第二十窟">
<figcaption aria-hidden="true">第二十窟</figcaption>
</figure>
<ul>
<li>石窟内的佛像，大的有十几米高，小的只有几厘米高，甚至有雅典风格的千佛立柱 (风化很严重)。</li>
</ul>
<h1 id="旅行建议">旅行建议</h1>
<ul>
<li>大同地处河北省北部，处于关外风口，冬天特别冷，经常零下十几度，所以冬季旅行需要穿上厚衣服。</li>
<li>2020 年下半年，山西省周一至周五工作日向全国游客免首道门票的 A
级旅游景区，也就是工作日预约就能免门票参观；周六和周日则需要全价门票参观，对外地人周末旅行不是很友好，建议工作日旅行。</li>
<li>大同曾经是煤炭资源性城市，环境污染严重，但是经过这些年的治理，蓝天已不再是奢求，大同的天空还是非常美的。</li>
<li>古建筑是一门深奥的学位，如果想探究一二，最好预先做一些学习，然后参观时尽量听导游讲解，不白来，不光看热闹。</li>
</ul>
<h1 id="参考阅读">参考阅读</h1>
<ul>
<li><a target="_blank" rel="noopener" href="http://fh.china.com.cn/ch2017/zx/2017-10-30/2054.html">山西佛教艺术考察记</a>
<ul>
<li>介绍华严寺的游记</li>
</ul></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Weekly-Blogs/how-to-use-Mendeley/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
      <meta itemprop="description" content="sharing daily progress and life">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | One's Way">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Weekly-Blogs/how-to-use-Mendeley/" class="post-title-link" itemprop="url">如何高效使用 Mendeley 文献管理神器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-11-06 19:24:32" itemprop="dateCreated datePublished" datetime="2020-11-06T19:24:32+08:00">2020-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-19 20:12:32" itemprop="dateModified" datetime="2023-05-19T20:12:32+08:00">2023-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Weekly-Blogs/" itemprop="url" rel="index"><span itemprop="name">Weekly Blogs</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>1.2k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>4 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[toc]</p>
<p>目前，在学术圈里主流的文献管理软件有 Mendely, Endnote, Refworks 和
Zotero。在笔者看来，每一款软件，都有自己的亮点，没有绝对的优劣之分，根据个性化差异选择适合自己的工具，提高自己的文献整理和阅读效率才是最重要的。适合自己的，才是最好的。</p>
<p>关于文献工具的功能差异，可以查看 <a target="_blank" rel="noopener" href="https://www.softhead-citavi.com/blog/2314#">常用的几款文献管理软件
Citavi 、Mendely、Endnote、Refworks、Zotero、Papers
功能大比拼</a>，其中比较了的多款文献管理软件的功能差异。</p>
<p>因为笔者日常是阅读文献为主，所以关注文献的跨平台和同步功能，对文献引用功能不是很看重，所以最后选择了
Mendeley。Mendeley 是 ELSEVIER
旗下的产品。笔者在日常学习和工作中，逐步形成了以 Mendeley
为主建立电子文献索引，并以云端同步 PDF 文献为主要储存手段，通过
Everything，Google Scholar 和 Onenote
笔记等多种搜索手段，快速找到自己所要的信息。</p>
<p>首先，建议大家注册一个账号，那么你可以在多个设备 (包括但不限于
Windows, Mac, Linux, IOS 和 Android )
随意标记和整理，软件能够及时在多个设备间同步，这也是我目前见到的最好用的跨平台
PDF 标注工具。</p>
<p>在大多数情况下，我们需要的其实是<strong>大批量多轮次</strong>地阅读文献，因为在一个项目的不同阶段，哪怕是同一篇文献，所关注的点也是不一样的。</p>
<h1 id="轻整理">轻整理</h1>
<ol type="1">
<li><p>文件检索：在一个项目刚开始的时候，文件夹中没有文献，就需要先建立一份本地的文献原始积累，我习惯在
Web of Science 和 Google Scholar 上根据关键词去找所需要的文献。 &gt; Web
of Science
是全球最大、覆盖学科最多的综合性学术信息资源，收录了自然科学、工程技术、生物医学等各个研究领域最具影响力的超过 8700 多种核心学术期刊。利用
Web of Science
丰富而强大的检索功能 -- 普通检索、被引文献检索、化学结构检索，您可以方便快速地找到有价值的科研信息，既可以越查越旧，也可以越查越新，全面了解有关某一学科、某一课题的研究信息。</p></li>
<li><p>文件整理：Mendeley
会自动提取文献信息，按照文献的发表年份，期刊，和文章题目将文献重命名，并将该文献自动整理到指定文件夹中，完成文献的原始积累。
&gt; 我设置 Mendeley
自动根据文献的三个强信息：发表年，发表期刊，和文章题目自动重命名，并结合
everything，在本地实现文献的第一重搜索。</p></li>
<li><p>同步：Mendeley 自带同步改能，如果文献量不是很大，那么可以使用
Mendeley
自带的云空间来同步自己的文献。这样做的好处就是，<strong>把所有的文献和笔记信息全部集中化了，不会造成信息碎片</strong>。
&gt; 如果同步空间不够，那么可以在 Mendeley 上保留自己的批注，利用 dropbox
等云盘同步 Mendeley
的文件夹中所有文献；之后看文献时，只需要从这个文件夹中打开文献即可。</p></li>
<li><p>信息处理：做笔记也可以只在 PDF
上做，这样就不用另外开一个软件写笔记，并可以对自己感兴趣的信息直接标注，<strong>实现信息最大程度集中化</strong>。</p></li>
</ol>
<h1 id="重搜索">重搜索</h1>
<h1 id="如何指定文档不被mendeley数据库收录">如何指定文档不被 Mendeley 数据库收录</h1>
<p>当你的文档加入你的 Mendeley 库后，文档的细节也同时被聚合到了 Mendeley
数据库，那么你就可以方便地在多平台间同步你的文档库。</p>
<p>如何你不愿意你的文档被登记造册 (catalog)，比如你的未完成的草稿；或者你认为文档对其他人没有什么帮助，比如你的课堂笔记，那么你可以在【文档详情】框中勾选
“Unpublished work”，那么你的文档详情 (Document Details) 就不会被 Mendeley
数据库收录，同时你仍然可以在你的多个设备间同步。</p>
<blockquote>
<p>We have a checkbox in the Document Details panel that allows you to
keep that entry from being aggregated. It will still be synchronized
across your multiple devices, but it will not have the Document Details
aggregated to our research catalog.</p>
</blockquote>
<blockquote>
<p>In summary, if you’re adding a document and you don’t want the
document details to be anonymously aggregated and made available for
search in our research catalog, then go ahead and click on the
“Unpublished work” checkbox in the Document Details panel on the
right.</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.mendeley.com/2012/04/16/how-to-series-how-to-keep-references-and-documents-unpublished-out-of-catalog-part-7-of-12/">How
to keep references and documents unpublished (out of catalog)</a></li>
</ul>
<h1 id="reference">Reference</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/iCKjido9jtEVZS-JwhvTIA">轻整理，重搜索</a></li>
<li><a target="_blank" rel="noopener" href="https://www.softhead-citavi.com/blog/2314#">常用的几款文献管理软件功能大比拼</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nobody</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">259k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">15:42</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6129496365361356"
     crossorigin="anonymous"></script>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"waylondotone/blog_comment","issue_term":"pathname","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
