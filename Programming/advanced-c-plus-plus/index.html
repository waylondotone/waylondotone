<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />




<!-- waylon's adsense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6129496365361356"
     crossorigin="anonymous"></script>













  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="C Plus Plus,Programming," />










<meta name="description" content="[toc]   Programming grammar const int * vs const int * const vs int const *  int const* is equivalent to const int* 指向常量int的指针 &gt; This means that the variable being declared is a pointer, pointing t">
<meta property="og:type" content="article">
<meta property="og:title" content="高阶 C++">
<meta property="og:url" content="http://www.waylon.one/Programming/advanced-c-plus-plus/index.html">
<meta property="og:site_name" content="One&#39;s Way">
<meta property="og:description" content="[toc]   Programming grammar const int * vs const int * const vs int const *  int const* is equivalent to const int* 指向常量int的指针 &gt; This means that the variable being declared is a pointer, pointing t">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-12-13T23:32:01.000Z">
<meta property="article:modified_time" content="2023-05-19T12:12:32.161Z">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="C Plus Plus">
<meta property="article:tag" content="Programming">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.waylon.one/Programming/advanced-c-plus-plus/"/>





  <title>高阶 C++ | One's Way</title>
  








<meta name="generator" content="Hexo 6.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">One's Way</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Dare to create</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/Programming/advanced-c-plus-plus/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">高阶 C++</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-14T07:32:01+08:00">
                2019-12-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">Programming</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  18k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  1:05
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>[toc]</p>
<!--https://blog.csdn.net/jcjc918/article/details/50876613 gflag-->
<!--
Discussion Items:
- make_shardpte 有一次拷贝，并且和原来的地址不一致

-->
<h1 id="programming-grammar">Programming grammar</h1>
<h2 id="const-int-vs-const-int-const-vs-int-const">const int * vs const
int * const vs int const *</h2>
<ul>
<li><p>int const* is equivalent to const int* 指向常量int的指针 &gt;
This means that the variable being declared is a pointer, pointing to a
constant integer. Effectively, this implies that the pointer is pointing
to <strong>a value that should not be changed</strong>. Const qualifier
doesn’t affect the pointer in this scenario so the pointer is allowed to
point to some other address.</p></li>
<li><p>int *const 指向int的常量指针 &gt; This means that the variable
being declared is a constant pointer pointing to an integer.
Effectively, this implies that <strong>the pointer shouldn’t point to
some other address</strong>. Const qualifier doesn’t affect the value of
integer in this scenario so the value being stored in the address is
allowed to change.</p></li>
<li><p>const int* const is equivalent to int const* const
指向常量int的常量指针 &gt; This means that the variable being declared
is a constant pointer pointing to a constant integer. Effectively, this
implies that a constant pointer is pointing to a constant value. Hence,
<strong>neither the pointer should point to a new address nor the value
being pointed to should be changed</strong>.</p></li>
<li><p>Memory Map <img
src="https://media.geeksforgeeks.org/wp-content/uploads/spiral-2.jpg" /></p></li>
</ul>
<blockquote>
<p>One way to remember the syntax (according to Bjarne Stroustrup) is
the spiral rule - The rule says, start from the name of the variable and
move clockwise to the next pointer or type. Repeat until expression
ends.</p>
</blockquote>
<blockquote>
<p>Using this rule, even complex declarations can be decoded like, int
** const is a const pointer to pointer to an int.</p>
</blockquote>
<blockquote>
<p>以 * 为界， 在 * 前后的 const 可以和同侧的 data type
调换位置，不影响变量表达的含义。</p>
</blockquote>
<!--
The first const keyword can go either side of data type, hence const int* const is equivalent to int const* const.
-->
<ul>
<li>Reference to <a
target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/difference-between-const-int-const-int-const-and-int-const/">Difference
between const int*, const int * const, and int const *</a></li>
</ul>
<h2 id="stdnumeric_limitsmin-vs-lowest">std::numeric_limits::min() vs
lowest()</h2>
<p>根据 <a
target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/types/numeric_limits">ppreference</a>
定义：</p>
<ul>
<li><a
target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/types/numeric_limits/lowest">lowest</a>:
Returns the lowest finite value representable by the numeric type T,
that is, a finite value x such that there is no other finite value y
where y &lt; x.</li>
<li><a
target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/types/numeric_limits/min">min</a>：For
floating-point types with denormalization, min returns the minimum
positive normalized value.</li>
</ul>
<p>也就是说，</p>
<ol type="1">
<li>如果 T 属于 int 型，則 min 和 lowest
会返回一样的值，皆为该类型的最小值（负数或0）。</li>
<li>如果 T 属于浮点型，min 返回 "最小正数"，lowest 返回最小值。</li>
</ol>
<ul>
<li>Reference to <a
target="_blank" rel="noopener" href="https://blog.csdn.net/keineahnung2345/article/details/104181062">C++
std::numeric_limits::max()，min()及lowest()</a></li>
</ul>
<h2 id="stdmove-对象移动">std::move 对象移动</h2>
<blockquote>
<p>在重新分配内存的过程中，从旧内存将元素拷贝到新内存是不必要的，最好的方式是移动元素；此外，IO类和unique_ptr类可以移动但不能拷贝。</p>
</blockquote>
<ul>
<li>标准库容器、string和shared_ptr类既支持移动也支持拷贝。IO类和unique_ptr类可以移动但不能拷贝。</li>
</ul>
<blockquote>
<p>变量是左值，我们不能将一个右值引用直接绑定到一个变量上，即使这个变量是右值引用类型也不行。</p>
</blockquote>
<p>针对上述问题，我们可以使用move的新标准库函数显式地将一个左值转换为对应的右值引用类型，来获得绑定到左值上的右值引用。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> &amp;&amp;rr1 = <span class="number">42</span>;  <span class="comment">// 正确：字面常量是右值</span></span><br><span class="line"><span class="type">int</span> &amp;&amp;rr2 = rr1;  <span class="comment">// 错误：表达式rr1是左值。</span></span><br><span class="line"><span class="type">int</span> &amp;&amp;rr3 = std::<span class="built_in">move</span>(rr1);  <span class="comment">// 正确。</span></span><br><span class="line"></span><br><span class="line">调用move意味着承诺：除了rr1赋值或者销毁它外，我们将不再使用它。我们不能对移后源对象的值做任何假设。</span><br></pre></td></tr></table></figure>
<blockquote>
<p>我们可以销毁一个移后源对象，也可以赋予它新值，但不能使用一个移后源对象的值。</p>
</blockquote>
<ul>
<li>与多数标准库名字的使用不同，对move我们不提供using声明，我们直接调用
<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/utility/move">std::move</a>
而不是move。</li>
</ul>
<h3 id="什么时候使用-stdmove">什么时候使用 std::move</h3>
<blockquote>
<p>When the criteria for elision of a copy operation are met or would be
met save for the fact that the source object is a function parameter,
and the object to be copied is designated by an lvalue, overload
resolution to select the constructor for the copy is ﬁrst performed as
if the object were designated by an rvalue.</p>
</blockquote>
<p>To answer the question in the title, use std::move on a return value
when you want it to be moved and it would not get moved anyway. That is:
- you want it to be moved, and - it is an lvalue, and - it is not
eligible for copy elision, and - it is not the name of a by-value
function parameter.</p>
<p>Reference to <a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/14856344/when-should-stdmove-be-used-on-a-function-return-value">When
should std::move be used on a function return value?
[duplicate]</a>.</p>
<h2 id="at-vs-operator-in-vector">at vs operator[] in vector</h2>
<!--
国静在代码中的comments，让我意识到两者的区别。-->
<p><a target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/vector/vector/at/">at</a>
returns a reference to the element at position n in the vector, which
automatically checks whether n is within the bounds of valid elements in
the vector, throwing an out_of_range exception if it is not.</p>
<p><a
target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/vector/vector/operator%5B%5D/">operator[]</a>
returns a reference to the element at position n in the vector
container. Portable programs should never call this function with an
argument n that is out of range, since this causes undefined
behavior.</p>
<p><strong>operator[]</strong> has the same behavior as
<strong>at</strong>, except that vector::at is bound-checked and signals
if the requested position is out of range by throwing an out_of_range
exception.</p>
<blockquote>
<p>在程序中推荐使用at函数，而不是[]操作符，更安全。</p>
</blockquote>
<h2 id="explicit-抑制构造函数定义的隐式转换">explicit
抑制构造函数定义的隐式转换</h2>
<p>关键字explicit只对一个实参的构造函数有效。只能在类内声明构造函数时使用explicit关键字，在类外部定义时不应重复。
当我们用explicit关键字声明构造函数时，它将只能以直接初始化的形式使用。而且，编译器将不会在自动转换过程中使用该构造函数。</p>
<blockquote>
<p>需要多个实参的构造函数不能用于隐式转换，所以无需将这些构造函数指定为explicit的。实测，即使指定为explicit，程序编译不报错。</p>
</blockquote>
<h2 id="stdupper_bound-vs-stdlower_bound">std::upper_bound vs
std::lower_bound()</h2>
<p><a
target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/algorithm/upper_bound">upper_bound</a></p>
<h2 id="stdvector-和-stdstring-的相互转换">std:vector 和 std:string
的相互转换</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/string/string/assign/">string::assign</a>
<ul>
<li>Assigns a new value to the string, replacing its current
contents.</li>
</ul></li>
<li><a
target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/vector/vector/assign/">vector::assign</a>
<ul>
<li>Assigns new contents to the vector, replacing its current contents,
and modifying its size accordingly.</li>
</ul></li>
<li>vector<char> to string <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// First method</span><br><span class="line">std::vector&lt;char&gt; data = &#123;&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;&#125;;</span><br><span class="line">std::string res;</span><br><span class="line">res.insert(res.begin(), data.begin(), data.end());</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Second method</span><br><span class="line">std::vector&lt;char&gt; data = &#123;&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;&#125;;</span><br><span class="line">std::string str;</span><br><span class="line">str.clear();</span><br><span class="line">str.assign(data.begin(),data.end());</span><br></pre></td></tr></table></figure>
<ul>
<li>string to vector<char></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string str = &quot;what a nice day!&quot;;</span><br><span class="line">std::vector &lt;char&gt; chars;</span><br><span class="line">chars.resize(str.size());</span><br><span class="line">chars.assign(str.begin(),str.end())</span><br></pre></td></tr></table></figure>
<ul>
<li><a target="_blank" rel="noopener" href="https://repl.it/@wylloong/charstostring">Verify
Online</a></li>
</ul>
<h2 id="函数模板function-template返回值">函数模板(function
template)返回值</h2>
<p>https://blog.csdn.net/u012515223/article/details/17003679</p>
<h2 id="boostoptional">boost::optional()</h2>
<ul>
<li>读取访问器 (read access) .get() 返回非常量引用 (non-const
reference)，所以你可以向其中写入。</li>
</ul>
<blockquote>
<p>It is sometimes helpful to think of optional as a value-and-pointer
mixed together. There is a possibly null pointer to an owned buffer of
memory that may, or may not hold a copy of the type.</p>
</blockquote>
<p>你可以使用 * 或者 -&gt; 来替代 get() 函数，以下三种写法是等价的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*optional</span><br><span class="line">optional-&gt;</span><br><span class="line">optional.get()</span><br></pre></td></tr></table></figure>
<!--
![How to use boost::optional](https://stackoverflow.com/questions/22227839/how-to-use-boostoptional)
-->
<h1 id="grammar-discriminate">Grammar Discriminate</h1>
<h2 id="构造函数初始化-赋值和初始化">构造函数初始化 (赋值和初始化)</h2>
<p>我们一般习惯于<strong>构造函数初始化列表</strong>和<strong>函数体内</strong>对类的成员变量初始化，两者的区别难道仅仅是表达方式和初始化位置不同吗？</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 辨析两种初始化参数的方式 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Just show me the code!</span></span><br><span class="line"><span class="comment">// 构造函数初始化列表 (constructor initialize list)</span></span><br><span class="line">ClassA::ClassA(<span class="type">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; name_in):name_(name_in) &#123;</span><br><span class="line">    <span class="comment">// 只调用了默认构造函数，不会再调用拷贝构造函数。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值初始化</span></span><br><span class="line">ClassA::ClassA(<span class="type">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; name_in) &#123;</span><br><span class="line">    <span class="comment">// 对象的成员变量的初始化动作发生在进入构造函数体之前。</span></span><br><span class="line">    <span class="comment">// name_不是初始化而是赋值。首先调用了这个类的默认构造函数，然后将name_in赋值到name_，即在调用拷贝构造函数。</span></span><br><span class="line">    name_ = name_in; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>C++规定，当某个数据成员被构造函数初始化列表忽略时，它将以与合成默认构造函数相同的方式隐式初始化。即没有出现在构造函数初始化列表中的成员将通过相应的类内初始化（如果存在的话）初始化，或者执行默认初始化。</p>
<p>综上所述，相比函数体内初始化，使用成员初始化列表，程序的效率更高。</p>
<!--
[C++中的初始化列表](https://blog.csdn.net/wangshubo1989/article/details/48937325)
-->
<h2 id="动态绑定">动态绑定</h2>
<ul>
<li>当我们使用基类的引用或指针调用一个虚成员函数时，会执行动态绑定。所以，所有的虚函数都必须有定义。</li>
<li>动态绑定只有当我们通过指针或引用调用虚函数时才会发生。因为当某个虚函数通过指针或引用调用时，编译器产生的代码直到运行时才能确定应该调用哪个版本的函数。</li>
</ul>
<h2 id="默认构造函数">默认构造函数</h2>
<ul>
<li>一旦我们定义了一些其他的构造函数，那么除非我们再定义一个默认的构造函数，否则类将没有默认构造函数。</li>
<li>= default :
声明默认构造函数，等同于之前使用的合成默认构造函数。</li>
</ul>
<h2 id="vector">Vector</h2>
<ul>
<li>当vector对象（或数组）销毁时，存储在其中的对象也会被销毁，也就是依次销毁vector中的每一个元素。</li>
<li>很多使用动态内存的类应该使用 vector 对象或者 string
对象管理必要的存储空间；使用 vector 或者 string
的类能避免分配和释放内存带来的复杂性。</li>
</ul>
<h2 id="inline">inline</h2>
<ul>
<li>引入原因:
为了解决一些频繁调用的小函数大量消耗栈空间（栈内存）的问题，特别的引入了
<strong>inline</strong>
修饰符，表示为内联函数。栈空间就是指放置程序的局部数据（也就是函数内数据）的内存空间。</li>
<li>inline
只适合涵数体内代码简单的涵数使用，不能包含复杂的结构控制语句，并且不能内联函数本身不能是直接递归函数（即，自己内部还调用自己的函数）.</li>
<li>inline
函数仅仅是一个对编译器的建议，所以最后能否真正内联，由编译器决定.一个好的编译器将会根据函数的定义体，自动地取消不值得的内联</li>
<li>定义在类中的成员函数默认都是内联的，如果在类定义时就在类内给出函数定义，那当然最好。如果在类中未给出成员函数定义，而又想内联该函数的话，那在类外要加上
inline，否则就认为不是内联的。</li>
<li>内联是以代码膨胀（复制）为代价，仅仅省去了函数调用的开销，从而提高函数的执行效率。
<ul>
<li>如果执行函数体内代码的时间，相比于函数调用的开销较大，那么效率的收获会很少。另一方面，每一处内联函数的调用都要复制代码，将使程序的总代码量增大，消耗更多的内存空间。</li>
</ul></li>
<li>inline不应该出现在函数的声明中,原因如下:
<ul>
<li>高质量C++/C
程序设计风格的一个基本原则：声明与定义不可混为一谈，用户没有必要、也不应该知道函数是否需要内联。</li>
<li>一个好的编译器将会根据函数的定义体，自动地取消不值得的内联（这进一步说明了
inline 不应该出现在函数的声明中）。</li>
</ul></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 头文件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Foo</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 定义文件</span></span><br><span class="line"><span class="comment">// 关键字 inline 必须与函数定义体放在一起才能使函数成为内联，仅将 inline 放在函数声明前面不起任何作用。</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">A::Foo</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<!--

[C++ 中的 inline 用法](https://www.runoob.com/w3cnote/cpp-inline-usage.html)
-->
<h2 id="copy-constructor-拷贝构造函数">Copy Constructor
拷贝构造函数</h2>
<p>一个特殊的构造函数，一般只有一个参数，这个参数一般是用 const
修饰的，对自己类的一个引用 (reference)。</p>
<h3 id="浅拷贝和深拷贝">浅拷贝和深拷贝</h3>
<p>浅拷贝：两个变量进行浅拷贝时，它们指向同一个地址，它们的值相同。这样会有问题，当其中的一个析构了那个地址，另外一个也没有了，有时候会发生错误，但浅拷贝比较廉价。</p>
<p>深拷贝：两个变量进行深拷贝时，第二变量会重新申请一块区域来存放跟第一个变量指向地址的值。两个东西完全是独立的，只是值相同。消耗比较大，因为要重新申请空间。</p>
<h1 id="code-style">Code Style</h1>
<h2 id="class">class</h2>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Setter</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Accessors</span></span><br></pre></td></tr></table></figure>
<h2 id="friends">Friends</h2>
<!--
[](https://google.github.io/styleguide/cppguide.html#Friends)

什么是friends 用途是什么

# 生肉

## lamda class template
c++ lambda表达式作为类模板参数

## 模板定义和实现不分开
https://www.cnblogs.com/jingshikongming/p/9037881.html
-->
<h2 id="initialization-and">Initialization: =, (), and</h2>
<ul>
<li>For uniform initialization syntax，大括号初始化 (Brace
Initialization) 的潜在问题：
<ul>
<li>“uniform” is a stretch: there are cases where ambiguity still
exists.</li>
<li>This syntax is not exactly intuitive: no other common language uses
something like it.
<ul>
<li>For uniform initialization syntax, we don’t believe in general that
the benefits outweigh the drawbacks.</li>
</ul></li>
</ul></li>
</ul>
<h3 id="best-practices-for-initialization">Best Practices for
Initialization</h3>
<ul>
<li>Use assignment syntax when initializing directly with the intended
literal value (for example: int, float, or std::string values), with
smart pointers such as std::shared_ptr, std::unique_ptr, with containers
(std::vector, std::map, etc), when performing struct initialization, or
doing copy construction.</li>
<li>Use the traditional constructor syntax (with parentheses) when the
initialization is performing some active logic, rather than simply
composing values together.</li>
<li>Use {} initialization without the = only if the above options don’t
compile.</li>
<li>Never mix {}s and auto.
<ul>
<li>For the language lawyers: prefer copy-initialization over
direct-initialization when available, and use parentheses over curly
braces when resorting to direct-initialization.</li>
</ul></li>
</ul>
<!--
- [三种初始化方式](https://abseil.io/tips/88)
-->

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/C-Plus-Plus/" rel="tag"># C Plus Plus</a>
          
            <a href="/tags/Programming/" rel="tag"># Programming</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/Linux/advanced-vim-operations/" rel="next" title="Vim 高级操作">
                <i class="fa fa-chevron-left"></i> Vim 高级操作
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/Reading/expression-on-feed-on-poor/" rel="prev" title="《饱食穷民》读后感">
                《饱食穷民》读后感 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">94</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">38</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/wylloong" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yanlong.wangchn@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#programming-grammar"><span class="nav-number">1.</span> <span class="nav-text">Programming grammar</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#const-int-vs-const-int-const-vs-int-const"><span class="nav-number">1.1.</span> <span class="nav-text">const int * vs const
int * const vs int const *</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#stdnumeric_limitsmin-vs-lowest"><span class="nav-number">1.2.</span> <span class="nav-text">std::numeric_limits::min() vs
lowest()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#stdmove-%E5%AF%B9%E8%B1%A1%E7%A7%BB%E5%8A%A8"><span class="nav-number">1.3.</span> <span class="nav-text">std::move 对象移动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8-stdmove"><span class="nav-number">1.3.1.</span> <span class="nav-text">什么时候使用 std::move</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#at-vs-operator-in-vector"><span class="nav-number">1.4.</span> <span class="nav-text">at vs operator[] in vector</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#explicit-%E6%8A%91%E5%88%B6%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%E7%9A%84%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="nav-number">1.5.</span> <span class="nav-text">explicit
抑制构造函数定义的隐式转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#stdupper_bound-vs-stdlower_bound"><span class="nav-number">1.6.</span> <span class="nav-text">std::upper_bound vs
std::lower_bound()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#stdvector-%E5%92%8C-stdstring-%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2"><span class="nav-number">1.7.</span> <span class="nav-text">std:vector 和 std:string
的相互转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BFfunction-template%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">1.8.</span> <span class="nav-text">函数模板(function
template)返回值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#boostoptional"><span class="nav-number">1.9.</span> <span class="nav-text">boost::optional()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#grammar-discriminate"><span class="nav-number">2.</span> <span class="nav-text">Grammar Discriminate</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%88%9D%E5%A7%8B%E5%8C%96-%E8%B5%8B%E5%80%BC%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">2.1.</span> <span class="nav-text">构造函数初始化 (赋值和初始化)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A"><span class="nav-number">2.2.</span> <span class="nav-text">动态绑定</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-number">2.3.</span> <span class="nav-text">默认构造函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vector"><span class="nav-number">2.4.</span> <span class="nav-text">Vector</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#inline"><span class="nav-number">2.5.</span> <span class="nav-text">inline</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#copy-constructor-%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-number">2.6.</span> <span class="nav-text">Copy Constructor
拷贝构造函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="nav-number">2.6.1.</span> <span class="nav-text">浅拷贝和深拷贝</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#code-style"><span class="nav-number">3.</span> <span class="nav-text">Code Style</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#class"><span class="nav-number">3.1.</span> <span class="nav-text">class</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#friends"><span class="nav-number">3.2.</span> <span class="nav-text">Friends</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initialization-and"><span class="nav-number">3.3.</span> <span class="nav-text">Initialization: &#x3D;, (), and</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#best-practices-for-initialization"><span class="nav-number">3.3.1.</span> <span class="nav-text">Best Practices for
Initialization</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nobody</span>

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
