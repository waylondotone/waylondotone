<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />




<!-- waylon's adsense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6129496365361356"
     crossorigin="anonymous"></script>













  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Weekly Blogs,Robotics,paper," />










<meta name="description" content="[toc] Autonomous Helicopter Flight via Reinforcement Learning Paper download link 多平台维护不易，内容实时更新于 个人网站，请移步阅读最新内容。  Abstract 直升机飞行被普遍认为是一个具有挑战性的控制问题。作者在本文中描述了强化学习在自动直升机飞行控制器设计上的成功应用：本文首先拟合了一个随机、非线性的直升机">
<meta property="og:type" content="article">
<meta property="og:title" content="Autonomous Helicopter Flight via RL 笔记">
<meta property="og:url" content="http://www.waylon.one/paper/autonomous-helicopter-flight-via-RL/index.html">
<meta property="og:site_name" content="One&#39;s Way">
<meta property="og:description" content="[toc] Autonomous Helicopter Flight via Reinforcement Learning Paper download link 多平台维护不易，内容实时更新于 个人网站，请移步阅读最新内容。  Abstract 直升机飞行被普遍认为是一个具有挑战性的控制问题。作者在本文中描述了强化学习在自动直升机飞行控制器设计上的成功应用：本文首先拟合了一个随机、非线性的直升机">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.waylon.one/downloads/images/blog/cyclic_pitch.jpg">
<meta property="og:image" content="http://www.waylon.one/downloads/images/blog/collective_pitch.jpg">
<meta property="og:image" content="http://www.waylon.one/downloads/images/blog/yaw_motion.jpg">
<meta property="og:image" content="http://www.waylon.one/downloads/images/blog/PEGASUS.jpg">
<meta property="og:image" content="http://www.waylon.one/downloads/images/blog/PEGASUS_calculate.jpg">
<meta property="og:image" content="http://www.waylon.one/downloads/images/blog/good_estimate_of_U.jpg">
<meta property="og:image" content="https://thumbs.dreamstime.com/b/colorful-dancer-pirouette-fifth-position-vector-illustration-79727401.jpg">
<meta property="article:published_time" content="2020-04-25T12:44:53.000Z">
<meta property="article:modified_time" content="2023-05-19T12:12:32.165Z">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Weekly Blogs">
<meta property="article:tag" content="Robotics">
<meta property="article:tag" content="paper">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.waylon.one/downloads/images/blog/cyclic_pitch.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.waylon.one/paper/autonomous-helicopter-flight-via-RL/"/>





  <title>Autonomous Helicopter Flight via RL 笔记 | One's Way</title>
  








<meta name="generator" content="Hexo 6.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">One's Way</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Dare to create</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.waylon.one/paper/autonomous-helicopter-flight-via-RL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="One's Way">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Autonomous Helicopter Flight via RL 笔记</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-25T20:44:53+08:00">
                2020-04-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/paper/" itemprop="url" rel="index">
                    <span itemprop="name">paper</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  16k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  58 mins.
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>[toc]</p>
<p>Autonomous Helicopter Flight via Reinforcement Learning</p>
<p><a
target="_blank" rel="noopener" href="https://people.eecs.berkeley.edu/~jordan/papers/ng-etal03.pdf">Paper
download link</a></p>
<p>多平台维护不易，内容实时更新于 <a
href="http://www.waylon.one/paper/autonomous-helicopter-flight-via-RL/">个人网站</a>，请移步阅读最新内容。</p>
<!--
- 先给出结论，然后举个例子，方便读者理解。这是一种好的写作方法，可以借鉴下。

-->
<h1 id="abstract">Abstract</h1>
<p>直升机飞行被普遍认为是一个具有挑战性的控制问题。作者在本文中描述了强化学习在自动直升机飞行控制器设计上的成功应用：本文首先拟合了一个随机、非线性的直升机动态模型，然后使用该模型去学习如何定点悬浮(hover
in place)，以及如何飞出RC直升机竞赛的复杂行为(maneuvers)。 &gt; In this
paper, we describe the successful application of reinforcement learning
to designing a controller for autonomous helicopter flight.</p>
<blockquote>
<p>CM (Comment):
博客着重分析直升机模型建立，以及基于模型的控制策略学习。</p>
</blockquote>
<h1 id="introduction">INTRODUCTION</h1>
<ul>
<li><p>直升机悬停的难度，旋翼顺时针转动，直升机底盘会逆时针旋转；引入尾部旋翼来克服底盘的转动，但同时带来了漂移(drift)的问题。所以，直升机悬停时，一般是机体向右倾斜。
&gt; So, for a helicopter to hover in place, it must actually be tilted
slightly to the right, so that the main rotor’s thrust is directed
downwards and slightly to the left, to counteract this tendency to drift
sideways.</p></li>
<li><p>对于没有较多直升机控制知识的同学，建议先观看一个讲解直升机飞行原理和控制策略的科普视频，复习一下牛顿三大定律在直升机控制上的应用，否则后面的控制学习不容易理解。</p></li>
</ul>
<!--
[牛顿力学三大定律](http://gaozhongwuli.com/zt/niudun/480447.html)
- 牛顿第一运动定律(惯性定律):   
  * 任何物体都保持静止或匀速直线运动的状态，直到受到其它物体的作用力迫使它改变这种状态为止。
- 牛顿第二运动定律(加速度定律):
  * 物体在受到合外力的作用会产生加速度，加速度的方向和合外力的方向相同，加速度的大小正比于合外力的大小与物体的惯性质量成反比。
- 牛顿第三运动定律(作用力与反作用力定律):
  * 两个物体之间的作用力和反作用力，在同一条直线上，大小相等，方向相反。
-->

<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
<iframe src="//player.bilibili.com/player.html?aid=14831817&bvid=BV1mx411G7tG&cid=24168563&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe></div>

<!--
- 在物理学里，作用力促使物体绕着转动轴或支点转动的趋向，称为力矩（torque或moment），也就是扭转的力。
- 力矩是角动量的变化量。
- 陀螺进动
  * 进动（precession）是自转物体之自转轴又绕着另一轴旋转的现象。
  * [link](https://zh.wikipedia.org/wiki/%E9%80%B2%E5%8B%95)
-->
<ul>
<li>看完视频后，相比可以看到直升机设计精巧(ingenious
solutions)，然而不直观的直升机动力学(nonintuitive
dynamics)使得直升机的控制具有难度。</li>
</ul>
<h1 id="autonomous-helicopter">Autonomous Helicopter</h1>
<h2 id="硬件设备">硬件设备</h2>
<ul>
<li>Yamaha R-50 helicopter (长3.6m，载重20kg)
<ul>
<li>an Inertial Navigation System (INS)</li>
<li>a differential GPS system (a resolution of 2cm)</li>
<li>a digital compass</li>
<li>an onboard navigation computer</li>
</ul></li>
</ul>
<p><img
src="http://www.waylon.one/downloads/images/blog/Yamaha_R-50_helicopter.png" /></p>
<ul>
<li>最后，基于卡尔曼滤波(the position estimates given by the Kalman
filte)，上述硬件以50Hz对外输出直升机的状态估计(数字量)：位置(position)，方向(orientation)，速度(velocity)和角速度(angular
velocities)。</li>
</ul>
<p>基于上述视频容易理解，大多数直升机是通过4维的运动空间(4-dimensional
action space)来实现飞行控制的：桨旋转平台的前后左右的倾斜(tilting this
plane either forwards/backwards or
sideways)，主螺旋桨角度的变化，机翼螺旋桨角度的变化。</p>
<ol type="1">
<li>Cyclic pitch: The longtitudinal (front-back) and latitudinal
(left-right) cyclic pitch controls. By tilting this plane (the
helicopter’s rotors rotate) either forwards/backwards or sideways, these
controls cause the helicopter to accelerate forward/backwards or
sideways.</li>
</ol>
<p><img width=467 height=263 src="http://www.waylon.one/downloads/images/blog/cyclic_pitch.jpg"/></p>
<ol start="2" type="1">
<li>Collective pitch: The (main rotor) collective pitch control. By
varying the tilt angle ofthe rotor blades, the collective pitch control
affects the main rotor’s thrust.</li>
</ol>
<p><img width=467 height=263 src="http://www.waylon.one/downloads/images/blog/collective_pitch.jpg"/></p>
<ol start="3" type="1">
<li>Yaw motion: The tail rotor collective pitch control. Using a
mechanism similar to the main rotor collective pitch control, this
controls the tail rotor’s thrust.</li>
</ol>
<p><img width=467 height=263 src="http://www.waylon.one/downloads/images/blog/yaw_motion.jpg"/></p>
<p>综上，本文的任务就是基于卡尔曼滤波的位置估计，周期(50Hz)挑选好的控制行为(pick
good control actions)。 &gt; Using the position estimates given by the
Kalman filter, our task is to pick good control actions every 50th of a
second.</p>
<h1 id="model-identification">Model identification</h1>
<h2 id="fit-the-helicopters-dynamics-model">Fit the helicopter’s
dynamics model</h2>
<ul>
<li><p>数据输入：记录人类驾驶员操作直升机的数据(12-dimensional
helicopter state &amp; 4-dimensional helicopter control
inputs)，使用这些飞行数据进行模型拟合(model fittin)。 &gt; We began by
asking a human pilot to fly the helicopter for several minutes, and
recorded the 12-dimensional helicopter state and 4-dimensional
helicopter control inputs as it was flown.</p></li>
<li><p>使用机体坐标系(helicopter body coordinates)，可以减少参数辨识量。
&gt; in which the x, y, and z axes are forwards, sideways, and down
relative to the current position of the helicopter.</p>
<blockquote>
<p>Our model is identified in the body coordinates, which has four fewer
variables than the spatial (world) coordinates.</p>
</blockquote></li>
</ul>
<h3 id="locally-weighted-linear-regression-局部加权线性回归">Locally
weighted linear regression (局部加权线性回归)</h3>
<ul>
<li><p><a
target="_blank" rel="noopener" href="https://www.cnblogs.com/czdbest/p/5767138.html">局部加权线性回归知识</a></p></li>
<li><p>s(t+1) = f(s(t), a(t), noise)<br />
&gt; By applying locally-weighted regression with the state s(t) and
action a(t) as inputs, and the one-step differences of each of the state
variables in turn as the target output, this gives us a non-linear,
stochastic, model ofthe dynamics, allowing us to predict s(t+1) as a
function of s(t) and a(t) plus noise.</p></li>
<li><p>此外，和直升机的先验知识结合，提出优化模型的一些策略方法，减少拟合的参数量。
&gt; Similar to the use of body coordinates to exploit symmetries, there
is other prior knowledge that can be incorporated.</p>
<blockquote>
<p>Similar reasoning allows us to conclude that certain other parameters
should be 0， 1/50(50Hz) or g(gravity), and these were also
<strong>hard-coded</strong> into the model.</p>
</blockquote></li>
<li><p>加入三个不可观测的参数(unobserved
variables)来描述模型在控制上的延迟(model latencies)。</p>
<blockquote>
<p>Finally, we added three extra (unobserved) variables to model
latencies in the responses to the controls.</p>
</blockquote></li>
<li><p>通过图片(plots)将长时间段的均方差显示出来的交互方式，更容易看出差异和比较来选择模型，观察模型在长时间段内的拟合准确程度。
&gt; Our main tool for choosing among the models was plots.</p>
<blockquote>
<p>查看在一段时间内(at longer time scales)的预测位置(estimated
position)和真实位置(true position)的均方差(mean-squared error)。</p>
</blockquote>
<blockquote>
<p>For a model, the mean-squared error (as measured on test data)
between the helicopter’s true position and the estimated position at a
certain time in the future.</p>
</blockquote></li>
<li><p>建立好模型的意义，增强后期在真实环境下的可靠性。 &gt; We wanted
to verify the fitted model carefully, so as to be reasonably confident
that a controller tested successfully in simulation will also be safe in
real life.</p>
<blockquote>
<p>对没有建模的噪声输入，担心噪声超出模型的预测。为次，通过图片检查(plots)直升机的预测输出是否超出误差阈值。</p>
</blockquote>
<blockquote>
<p>One of our concerns was the possibility that unmodeled correlations
in noise might mean the noise variance of the actual dynamics is much
larger than predicted by the model.</p>
</blockquote></li>
</ul>
<h1 id="reinforcement-learning-the-pegasus-algorithm">Reinforcement
learning: The PEGASUS algorithm</h1>
<h2 id="对pegasus的描述">对PEGASUS的描述</h2>
<p><img width=628 height=140 src="http://www.waylon.one/downloads/images/blog/PEGASUS.jpg"/></p>
<ul>
<li>这些使用程序很难精确计算，但是可以借助于计算机来仿真MDP的动力学。</li>
</ul>
<p><img width=631 height=120 src="http://www.waylon.one/downloads/images/blog/PEGASUS_calculate.jpg"/></p>
<!--
- 看似简单的PEGASUS算法，实则是一个困难的随机优化问题。

CM: 为何会有这样的论断，自己却不是很清楚，看来对深度学习的理论知识了解的还不够呢。

> This is a difficult stochastic optimization problem.
-->
<p><img width=631 height=108 src="http://www.waylon.one/downloads/images/blog/good_estimate_of_U.jpg"/></p>
<h1 id="learning-to-hover">Learning to Hover</h1>
<ul>
<li><p>以其他控制器尝试为例(μ-synthesis)，来说明问题的难度和微妙</p>
<blockquote>
<p>These comments should not be taken as conclusive of the viability of
any of these methods; rather, we take them to be indicative of the
difficulty and subtlety involved in learning a helicopter
controller.</p>
</blockquote></li>
</ul>
<!--
自己的眼光局限，限制了对Matlab的理解，原来matlab有很多的tools，避免重复造轮子的麻烦

[matlab toolbox](http://math.cumt.edu.cn/_upload/article/files/0c/51/f02bf76b4f06ad4652ba3818e1c4/90c825c4-382c-473f-9be8-c54074793153.pdf)
[Matlab 工具介绍](http://www.360doc.com/content/16/0719/12/27698033_576742232.shtml)
![Matlab toolbox](57057D4A185949F5A4225AC73B271013)

![](https://www.yanlongwang.net/downloads/images/blog/matlab_toolbox.jpg)

曾经以为，计算机是万能的，机械无用论，matlab可以被python无情替代，现在看来是自己太naive，各行各业都有一大群人在默默地努力。计算机只是一个替代人计算和行动的工具，怎么可能是万能的呢？

尊重每一个学科，存在是有必要性的，只不过必要性现在没有体现出来而已。如果自己不是读文献，不是准备读博士，怎么会发现世界的奇妙呢？困在自己的一点认知中，妄自尊大才可怕。
-->
<ul>
<li><p>从直升机悬停开始学习策略。 &gt; We began by learning a policy for
hovering in place.</p>
<ul>
<li><p>直升机悬停控制的神经网络设计<br />
<img
src="http://www.waylon.one/downloads/images/blog/RL_helicopter_policy_class.jpg" /></p>
<blockquote>
<p>The picture inside the circles indicate whether a node outputs the
sum of their inputs, or the tanh of the sum of their inputs. Each edge
with an arrow in the picture denotes a tunable parameter. The solid
lines show the hovering policy class. The dashed lines show the extra
weights added for trajectory following.</p>
</blockquote>
<ul>
<li>很明显，需要具备直升机控制的理论和实践知识。</li>
</ul>
<blockquote>
<p>Each of the edges in the figure represents a weight, and <strong>the
connections were chosen via simple reasoning about which control channel
should be used to control which state variables</strong>.</p>
</blockquote></li>
</ul></li>
<li><p>结合具体的问题和目标，设计奖励函数和惩罚函数，这是需要除计算机知识和强化学习知识外的专业知识和实践经验。</p>
<ul>
<li>二阶奖励函数(靠近目标点+速度变化慢) &gt; This encourages the
helicopter to hover near target position, while also keeping the
velocity small and not making abrupt movements.</li>
<li>二阶惩罚函数(鼓励平滑控制和小行动) &gt; To encourage small actions
and smooth control of the helicopter, we also used a quadratic penalty
for actions.</li>
</ul></li>
<li><p>基于辨识的模型(model
identified)，使用PEGASUS算法来获得实用策略(the utilities of
policies)的近似值 <span
class="math inline">\(\[\hat{U}(\pi)\]\)</span>。 &gt; Using the model
identified, we can now apply PEGASUS to define approximations <span
class="math inline">\(\[\hat{U}(\pi)\]\)</span> to the utilities of
policies.</p></li>
<li><p>策略和动态特性的可连续和平滑性。</p>
<blockquote>
<p>Since policies are smoothly parameterized in the weights, and the
dynamics are themselves continuous in the actions, the estimates of
utilities are also continuous in the weights.</p>
</blockquote></li>
</ul>
<!--
  * 作者在脚注中，非常严谨地作出说明，因为计算的数值精度，可能导致策略的不连续性。严谨的做学问态度，让自己自愧不如。

一篇好的实用论文，绝对不是因为弄虚作假而被人喜爱，如果自己辛苦的实现，仅仅是一堆废纸，弄虚作假浪费别人的时间，价值无法被肯定，那么写来有何用。乾隆的诗词万篇，最后流传被人喜爱的又有几篇呢？
-->
<ul>
<li><p>求取策略的权重时，应用爬山算法来最大化<span
class="math inline">\(\[\hat{U}(\pi)\]\)</span>，其中使用梯度上升(gradient
ascent algorithm)和随机游走(random-walk algorithm)两种算法，来最大化策略
<span class="math inline">\(\[\pi\]\)</span>。 &gt; We may thus apply
standard hillclimbing algorithms to maximize <span
class="math inline">\(\[\hat{U}(\pi)\]\)</span> in terms of the policy’s
weights.</p></li>
<li><p>在策略学习中，最消耗资源的是重复加速蒙特卡罗评价(Monte Carlo
evaluation)来获得策略，文章提出使用并行计算(parallelized our
implementation)来加速蒙特卡罗评价的训练。</p>
<ul>
<li>在不同的计算机使用不同的样本来计算；</li>
<li>然后聚合训练结果，获得策略 <span
class="math inline">\(\[\hat{U}(\pi)\]\)</span>。</li>
</ul>
<blockquote>
<p>The most expensive step in policy search was the repeated Monte Carlo
evaluation to obtain <span
class="math inline">\(\[\hat{U}(\pi)\]\)</span>. To speed this up, we
parallelized our implementation, and Monte Carlo evaluations using
different samples were run on different computers, and the results were
then aggregated to obtain <span
class="math inline">\(\[\hat{U}(\pi)\]\)</span>.</p>
</blockquote></li>
<li><p>如何评价控制策略的表现：文章比较基于学习的策略和人类驾驶员的性能表现，来证明算法的稳定性。
&gt; We also compare the performance of our learned policy against that
of our human pilot trained and licensed by Yamaha to fly the R-50
helicopter.</p></li>
</ul>
<h1 id="flying-competition-maneuvers">Flying competition maneuvers</h1>
<ul>
<li><p>作者参加了AMA(the Academy of Model
Aeronautics)组织的直升机飞行挑战(an annual RC helicopter
competition)，挑战极具难度的3个行为，比如如下图所示的 pirouette (turning
in place)。</p>
<blockquote>
<p>We took the first three maneuvers from the most challenging, Class
III, segment of their competition.</p>
</blockquote>
<p><img width=300 height=300 src="https://thumbs.dreamstime.com/b/colorful-dancer-pirouette-fifth-position-vector-illustration-79727401.jpg"/></p></li>
</ul>
<!--
貌似搞学术，也是可以参加一些竞赛的，验证自己的水平，为自己的研究打call!

读论文，居然可以学习到芭蕾的一个概念，单脚尖旋转，看起来很酷。
-->
<ul>
<li><p>文章目前只是学习了如何悬停(hover)，那么如何能够沿着轨迹飞行呢？作者给出的一种做法是让直升机沿着特定的轨迹点，慢慢变化状态，控制策略和悬停基本一致。</p>
<blockquote>
<p>How does one design a controller for flying trajectories? Given a
controller for keeping a system’s state at a point, one standard way to
make the system move through a particular trajectory is to slowly vary
along a sequence of set points on that trajectory.</p>
</blockquote></li>
<li><p>另一种做法，重新训练参数来准确跟踪轨迹 &gt; Retrain the policy’s
parameters for accurate trajectory following.</p>
<ul>
<li><p>trajectory following vs trajectory tracking</p>
<blockquote>
<p>Path/Trajectory following is all about following a predefined path
which does not involve time as a constraint. Thus, if you are on the
path and following it with whatever speed you have reached your goal. On
the contrary, trajectory tracking involves time as a constraint. Meaning
that you have to be at a certain point at a certain time.</p>
</blockquote></li>
<li><p>基于直升机的理论机制，优化网络模型。</p>
<blockquote>
<p>Since we are now flying trajectories and not only hovering, we also
augmented the policy class to take into account more of the coupling
between the helicopter’s different sub-dynamics. /
比如旋转时，尾翼控制会带来漂移；上升下降控制时，带来旋转的影响，这一部分在最开始的视频中有讲到。</p>
</blockquote></li>
<li><p>设计(specify)轨迹跟踪(trajectory following)时的奖励函数。</p>
<ul>
<li><p>贴近轨迹(penalize
deviation)：惩罚位置的偏差，计算直升机当前位置和其投影到理想轨迹的位置偏差。</p>
<blockquote>
<p>“tracked” position: the “projection” of the helicopter’s position
onto the path of the idealized, desired trajectory.</p>
</blockquote>
<blockquote>
<p>the learning algorithm pays a penalty that is quadratic between the
actual position and the “tracked” position on the idealized
trajectory.</p>
</blockquote></li>
<li><p>前进奖励(making progress)：使用沿着轨迹增加的势函数(potential
function)，如果直升机前进，那么可以获得正奖励(positive reward)。</p>
<blockquote>
<p>Since, we are already tracking where along the desired trajectory the
helicopter is, we chose a potential function that increases along the
trajectory. Thus, whenever the helicopter’s makes forward progress along
this trajectory, it receives positive reward.</p>
</blockquote></li>
<li><p>定义解耦(decouple our definition) &gt; Finally, our modifications
have decoupled our definition of the reward function from (x<em>,
y</em>, z<em>, w</em>) and the evolution of (x<em>, y</em>, z<em>,
w</em>) in time.</p>
<ul>
<li>(x<em>, y</em>, z<em>, w</em>) represents a desired hovering
position and orientation.</li>
</ul>
<blockquote>
<p>We considered several alternatives, but the main one used ended up
being a modification for flying trajectories that have both a vertical
and a horizontal component (such as along the two upper edges of the
triangle in III.1).</p>
</blockquote></li>
<li><p>模型控制需要根据实际测试，人为干预，不断调整，而不是一劳永逸，比如在z方向上人为加入时延，来避免“bowed-out”或者“bowed-in”轨迹。
&gt; the z (vertical)-response of the helicopter is very fast. In
contrast, the x and y responses are much slower.</p></li>
</ul></li>
</ul></li>
</ul>

<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
<iframe src="//player.bilibili.com/player.html?aid=242991298&bvid=BV19e411s7Ho&cid=183111788&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe></div>

<h1 id="references">References</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/u013181595/article/details/86563414">吴恩达直升机控制系列论文笔记</a></li>
<li><a target="_blank" rel="noopener" href="http://heli.stanford.edu/">吴恩达的链接</a></li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Weekly-Blogs/" rel="tag"># Weekly Blogs</a>
          
            <a href="/tags/Robotics/" rel="tag"># Robotics</a>
          
            <a href="/tags/paper/" rel="tag"># paper</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/Reading/reprinte-impression-of-Ein-Hund-namens-Money/" rel="next" title="转载-小狗钱钱读后感-不只是理财">
                <i class="fa fa-chevron-left"></i> 转载-小狗钱钱读后感-不只是理财
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/website/dynadot-buy-domain/" rel="prev" title="从域名注册商 Dynadot 购买域名及配置">
                从域名注册商 Dynadot 购买域名及配置 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">94</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">38</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/wylloong" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yanlong.wangchn@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#abstract"><span class="nav-number">1.</span> <span class="nav-text">Abstract</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#introduction"><span class="nav-number">2.</span> <span class="nav-text">INTRODUCTION</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#autonomous-helicopter"><span class="nav-number">3.</span> <span class="nav-text">Autonomous Helicopter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6%E8%AE%BE%E5%A4%87"><span class="nav-number">3.1.</span> <span class="nav-text">硬件设备</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#model-identification"><span class="nav-number">4.</span> <span class="nav-text">Model identification</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#fit-the-helicopters-dynamics-model"><span class="nav-number">4.1.</span> <span class="nav-text">Fit the helicopter’s
dynamics model</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#locally-weighted-linear-regression-%E5%B1%80%E9%83%A8%E5%8A%A0%E6%9D%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92"><span class="nav-number">4.1.1.</span> <span class="nav-text">Locally
weighted linear regression (局部加权线性回归)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#reinforcement-learning-the-pegasus-algorithm"><span class="nav-number">5.</span> <span class="nav-text">Reinforcement
learning: The PEGASUS algorithm</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9pegasus%E7%9A%84%E6%8F%8F%E8%BF%B0"><span class="nav-number">5.1.</span> <span class="nav-text">对PEGASUS的描述</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#learning-to-hover"><span class="nav-number">6.</span> <span class="nav-text">Learning to Hover</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#flying-competition-maneuvers"><span class="nav-number">7.</span> <span class="nav-text">Flying competition maneuvers</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#references"><span class="nav-number">8.</span> <span class="nav-text">References</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nobody</span>

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
